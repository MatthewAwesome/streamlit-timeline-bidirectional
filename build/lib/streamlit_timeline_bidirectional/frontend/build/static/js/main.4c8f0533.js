/*! For license information please see main.4c8f0533.js.LICENSE.txt */
(()=>{var t={213:function(t){t.exports=function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,i){return e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(t,i)}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function n(t,s,r){return n=i()?Reflect.construct:function(t,i,n){var s=[null];s.push.apply(s,i);var r=new(Function.bind.apply(t,s));return n&&e(r,n.prototype),r},n.apply(null,arguments)}function s(t){return r(t)||a(t)||o(t)||h()}function r(t){if(Array.isArray(t))return l(t)}function a(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function o(t,e){if(t){if("string"===typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c=Object.hasOwnProperty,d=Object.setPrototypeOf,u=Object.isFrozen,p=Object.getPrototypeOf,f=Object.getOwnPropertyDescriptor,m=Object.freeze,_=Object.seal,y=Object.create,g="undefined"!==typeof Reflect&&Reflect,b=g.apply,v=g.construct;b||(b=function(t,e,i){return t.apply(e,i)}),m||(m=function(t){return t}),_||(_=function(t){return t}),v||(v=function(t,e){return n(t,s(e))});var w=N(Array.prototype.forEach),x=N(Array.prototype.pop),T=N(Array.prototype.push),S=N(String.prototype.toLowerCase),k=N(String.prototype.toString),I=N(String.prototype.match),M=N(String.prototype.replace),A=N(String.prototype.indexOf),D=N(String.prototype.trim),L=N(RegExp.prototype.test),E=B(TypeError);function O(t){return"number"===typeof t&&isNaN(t)}function N(t){return function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return b(t,e,n)}}function B(t){return function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return v(t,i)}}function C(t,e,i){var n;i=null!==(n=i)&&void 0!==n?n:S,d&&d(t,null);for(var s=e.length;s--;){var r=e[s];if("string"===typeof r){var a=i(r);a!==r&&(u(e)||(e[s]=a),r=a)}t[r]=!0}return t}function F(t){var e,i=y(null);for(e in t)!0===b(c,t,[e])&&(i[e]=t[e]);return i}function R(t,e){for(;null!==t;){var i=f(t,e);if(i){if(i.get)return N(i.get);if("function"===typeof i.value)return N(i.value)}t=p(t)}function n(t){return console.warn("fallback value for",t),null}return n}var U=m(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),j=m(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),P=m(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),z=m(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),V=m(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),H=m(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),q=m(["#text"]),W=m(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Y=m(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$=m(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),G=m(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Z=_(/\{\{[\w\W]*|[\w\W]*\}\}/gm),J=_(/<%[\w\W]*|[\w\W]*%>/gm),K=_(/\${[\w\W]*}/gm),X=_(/^data-[\-\w.\u00B7-\uFFFF]/),Q=_(/^aria-[\-\w]+$/),tt=_(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),et=_(/^(?:\w+script|data):/i),it=_(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),nt=_(/^html$/i),st=_(/^[a-z][.\w]*(-[.\w]+)+$/i),rt=function(){return"undefined"===typeof window?null:window},at=function(e,i){if("object"!==t(e)||"function"!==typeof e.createPolicy)return null;var n=null,s="data-tt-policy-suffix";i.currentScript&&i.currentScript.hasAttribute(s)&&(n=i.currentScript.getAttribute(s));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch(a){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt(),i=function(t){return ot(t)};if(i.version="2.5.4",i.removed=[],!e||!e.document||9!==e.document.nodeType)return i.isSupported=!1,i;var n=e.document,r=e.document,a=e.DocumentFragment,o=e.HTMLTemplateElement,l=e.Node,h=e.Element,c=e.NodeFilter,d=e.NamedNodeMap,u=void 0===d?e.NamedNodeMap||e.MozNamedAttrMap:d,p=e.HTMLFormElement,f=e.DOMParser,_=e.trustedTypes,y=h.prototype,g=R(y,"cloneNode"),b=R(y,"nextSibling"),v=R(y,"childNodes"),N=R(y,"parentNode");if("function"===typeof o){var B=r.createElement("template");B.content&&B.content.ownerDocument&&(r=B.content.ownerDocument)}var lt=at(_,n),ht=lt?lt.createHTML(""):"",ct=r,dt=ct.implementation,ut=ct.createNodeIterator,pt=ct.createDocumentFragment,ft=ct.getElementsByTagName,mt=n.importNode,_t={};try{_t=F(r).documentMode?r.documentMode:{}}catch(Ue){}var yt={};i.isSupported="function"===typeof N&&dt&&void 0!==dt.createHTMLDocument&&9!==_t;var gt,bt,vt=Z,wt=J,xt=K,Tt=X,St=Q,kt=et,It=it,Mt=st,At=tt,Dt=null,Lt=C({},[].concat(s(U),s(j),s(P),s(V),s(q))),Et=null,Ot=C({},[].concat(s(W),s(Y),s($),s(G))),Nt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Bt=null,Ct=null,Ft=!0,Rt=!0,Ut=!1,jt=!0,Pt=!1,zt=!0,Vt=!1,Ht=!1,qt=!1,Wt=!1,Yt=!1,$t=!1,Gt=!0,Zt=!1,Jt="user-content-",Kt=!0,Xt=!1,Qt={},te=null,ee=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ie=null,ne=C({},["audio","video","img","source","image","track"]),se=null,re=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ae="http://www.w3.org/1998/Math/MathML",oe="http://www.w3.org/2000/svg",le="http://www.w3.org/1999/xhtml",he=le,ce=!1,de=null,ue=C({},[ae,oe,le],k),pe=["application/xhtml+xml","text/html"],fe="text/html",me=null,_e=255,ye=r.createElement("form"),ge=function(t){return t instanceof RegExp||t instanceof Function},be=function(e){me&&me===e||(e&&"object"===t(e)||(e={}),e=F(e),gt=gt=-1===pe.indexOf(e.PARSER_MEDIA_TYPE)?fe:e.PARSER_MEDIA_TYPE,bt="application/xhtml+xml"===gt?k:S,Dt="ALLOWED_TAGS"in e?C({},e.ALLOWED_TAGS,bt):Lt,Et="ALLOWED_ATTR"in e?C({},e.ALLOWED_ATTR,bt):Ot,de="ALLOWED_NAMESPACES"in e?C({},e.ALLOWED_NAMESPACES,k):ue,se="ADD_URI_SAFE_ATTR"in e?C(F(re),e.ADD_URI_SAFE_ATTR,bt):re,ie="ADD_DATA_URI_TAGS"in e?C(F(ne),e.ADD_DATA_URI_TAGS,bt):ne,te="FORBID_CONTENTS"in e?C({},e.FORBID_CONTENTS,bt):ee,Bt="FORBID_TAGS"in e?C({},e.FORBID_TAGS,bt):{},Ct="FORBID_ATTR"in e?C({},e.FORBID_ATTR,bt):{},Qt="USE_PROFILES"in e&&e.USE_PROFILES,Ft=!1!==e.ALLOW_ARIA_ATTR,Rt=!1!==e.ALLOW_DATA_ATTR,Ut=e.ALLOW_UNKNOWN_PROTOCOLS||!1,jt=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Pt=e.SAFE_FOR_TEMPLATES||!1,zt=!1!==e.SAFE_FOR_XML,Vt=e.WHOLE_DOCUMENT||!1,Wt=e.RETURN_DOM||!1,Yt=e.RETURN_DOM_FRAGMENT||!1,$t=e.RETURN_TRUSTED_TYPE||!1,qt=e.FORCE_BODY||!1,Gt=!1!==e.SANITIZE_DOM,Zt=e.SANITIZE_NAMED_PROPS||!1,Kt=!1!==e.KEEP_CONTENT,Xt=e.IN_PLACE||!1,At=e.ALLOWED_URI_REGEXP||At,he=e.NAMESPACE||le,Nt=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ge(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Nt.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ge(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Nt.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Nt.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Pt&&(Rt=!1),Yt&&(Wt=!0),Qt&&(Dt=C({},s(q)),Et=[],!0===Qt.html&&(C(Dt,U),C(Et,W)),!0===Qt.svg&&(C(Dt,j),C(Et,Y),C(Et,G)),!0===Qt.svgFilters&&(C(Dt,P),C(Et,Y),C(Et,G)),!0===Qt.mathMl&&(C(Dt,V),C(Et,$),C(Et,G))),e.ADD_TAGS&&(Dt===Lt&&(Dt=F(Dt)),C(Dt,e.ADD_TAGS,bt)),e.ADD_ATTR&&(Et===Ot&&(Et=F(Et)),C(Et,e.ADD_ATTR,bt)),e.ADD_URI_SAFE_ATTR&&C(se,e.ADD_URI_SAFE_ATTR,bt),e.FORBID_CONTENTS&&(te===ee&&(te=F(te)),C(te,e.FORBID_CONTENTS,bt)),Kt&&(Dt["#text"]=!0),Vt&&C(Dt,["html","head","body"]),Dt.table&&(C(Dt,["tbody"]),delete Bt.tbody),m&&m(e),me=e)},ve=C({},["mi","mo","mn","ms","mtext"]),we=C({},["foreignobject","annotation-xml"]),xe=C({},["title","style","font","a","script"]),Te=C({},j);C(Te,P),C(Te,z);var Se=C({},V);C(Se,H);var ke=function(t){var e=N(t);e&&e.tagName||(e={namespaceURI:he,tagName:"template"});var i=S(t.tagName),n=S(e.tagName);return!!de[t.namespaceURI]&&(t.namespaceURI===oe?e.namespaceURI===le?"svg"===i:e.namespaceURI===ae?"svg"===i&&("annotation-xml"===n||ve[n]):Boolean(Te[i]):t.namespaceURI===ae?e.namespaceURI===le?"math"===i:e.namespaceURI===oe?"math"===i&&we[n]:Boolean(Se[i]):t.namespaceURI===le?!(e.namespaceURI===oe&&!we[n])&&!(e.namespaceURI===ae&&!ve[n])&&!Se[i]&&(xe[i]||!Te[i]):!("application/xhtml+xml"!==gt||!de[t.namespaceURI]))},Ie=function(t){T(i.removed,{element:t});try{t.parentNode.removeChild(t)}catch(Ue){try{t.outerHTML=ht}catch(Ue){t.remove()}}},Me=function(t,e){try{T(i.removed,{attribute:e.getAttributeNode(t),from:e})}catch(Ue){T(i.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!Et[t])if(Wt||Yt)try{Ie(e)}catch(Ue){}else try{e.setAttribute(t,"")}catch(Ue){}},Ae=function(t){var e,i;if(qt)t="<remove></remove>"+t;else{var n=I(t,/^[\r\n\t ]+/);i=n&&n[0]}"application/xhtml+xml"===gt&&he===le&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var s=lt?lt.createHTML(t):t;if(he===le)try{e=(new f).parseFromString(s,gt)}catch(Ue){}if(!e||!e.documentElement){e=dt.createDocument(he,"template",null);try{e.documentElement.innerHTML=ce?ht:s}catch(Ue){}}var a=e.body||e.documentElement;return t&&i&&a.insertBefore(r.createTextNode(i),a.childNodes[0]||null),he===le?ft.call(e,Vt?"html":"body")[0]:Vt?e.documentElement:a},De=function(t){return ut.call(t.ownerDocument||t,t,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null,!1)},Le=function(t){return t instanceof p&&("undefined"!==typeof t.__depth&&"number"!==typeof t.__depth||"undefined"!==typeof t.__removalCount&&"number"!==typeof t.__removalCount||"string"!==typeof t.nodeName||"string"!==typeof t.textContent||"function"!==typeof t.removeChild||!(t.attributes instanceof u)||"function"!==typeof t.removeAttribute||"function"!==typeof t.setAttribute||"string"!==typeof t.namespaceURI||"function"!==typeof t.insertBefore||"function"!==typeof t.hasChildNodes)},Ee=function(e){return"object"===t(l)?e instanceof l:e&&"object"===t(e)&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName},Oe=function(t,e,n){yt[t]&&w(yt[t],(function(t){t.call(i,e,n,me)}))},Ne=function(t){var e;if(Oe("beforeSanitizeElements",t,null),Le(t))return Ie(t),!0;if(L(/[\u0080-\uFFFF]/,t.nodeName))return Ie(t),!0;var n=bt(t.nodeName);if(Oe("uponSanitizeElement",t,{tagName:n,allowedTags:Dt}),t.hasChildNodes()&&!Ee(t.firstElementChild)&&(!Ee(t.content)||!Ee(t.content.firstElementChild))&&L(/<[/\w]/g,t.innerHTML)&&L(/<[/\w]/g,t.textContent))return Ie(t),!0;if("select"===n&&L(/<template/i,t.innerHTML))return Ie(t),!0;if(7===t.nodeType)return Ie(t),!0;if(zt&&8===t.nodeType&&L(/<[/\w]/g,t.data))return Ie(t),!0;if(!Dt[n]||Bt[n]){if(!Bt[n]&&Ce(n)){if(Nt.tagNameCheck instanceof RegExp&&L(Nt.tagNameCheck,n))return!1;if(Nt.tagNameCheck instanceof Function&&Nt.tagNameCheck(n))return!1}if(Kt&&!te[n]){var s=N(t)||t.parentNode,r=v(t)||t.childNodes;if(r&&s)for(var a=r.length-1;a>=0;--a){var o=g(r[a],!0);o.__removalCount=(t.__removalCount||0)+1,s.insertBefore(o,b(t))}}return Ie(t),!0}return t instanceof h&&!ke(t)?(Ie(t),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!L(/<\/no(script|embed|frames)/i,t.innerHTML)?(Pt&&3===t.nodeType&&(e=t.textContent,e=M(e,vt," "),e=M(e,wt," "),e=M(e,xt," "),t.textContent!==e&&(T(i.removed,{element:t.cloneNode()}),t.textContent=e)),Oe("afterSanitizeElements",t,null),!1):(Ie(t),!0)},Be=function(t,e,i){if(Gt&&("id"===e||"name"===e)&&(i in r||i in ye||"__depth"===i||"__removalCount"===i))return!1;if(Rt&&!Ct[e]&&L(Tt,e));else if(Ft&&L(St,e));else if(!Et[e]||Ct[e]){if(!(Ce(t)&&(Nt.tagNameCheck instanceof RegExp&&L(Nt.tagNameCheck,t)||Nt.tagNameCheck instanceof Function&&Nt.tagNameCheck(t))&&(Nt.attributeNameCheck instanceof RegExp&&L(Nt.attributeNameCheck,e)||Nt.attributeNameCheck instanceof Function&&Nt.attributeNameCheck(e))||"is"===e&&Nt.allowCustomizedBuiltInElements&&(Nt.tagNameCheck instanceof RegExp&&L(Nt.tagNameCheck,i)||Nt.tagNameCheck instanceof Function&&Nt.tagNameCheck(i))))return!1}else if(se[e]);else if(L(At,M(i,It,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==A(i,"data:")||!ie[t])if(Ut&&!L(kt,M(i,It,"")));else if(i)return!1;return!0},Ce=function(t){return"annotation-xml"!==t&&I(t,Mt)},Fe=function(e){var n,s,r,a;Oe("beforeSanitizeAttributes",e,null);var o=e.attributes;if(o){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Et};for(a=o.length;a--;){var h=n=o[a],c=h.name,d=h.namespaceURI;if(s="value"===c?n.value:D(n.value),r=bt(c),l.attrName=r,l.attrValue=s,l.keepAttr=!0,l.forceKeepAttr=void 0,Oe("uponSanitizeAttribute",e,l),s=l.attrValue,!l.forceKeepAttr&&(Me(c,e),l.keepAttr))if(jt||!L(/\/>/i,s))if(zt&&L(/((--!?|])>)|<\/(style|title)/i,s))Me(c,e);else{Pt&&(s=M(s,vt," "),s=M(s,wt," "),s=M(s,xt," "));var u=bt(e.nodeName);if(Be(u,r,s)){if(!Zt||"id"!==r&&"name"!==r||(Me(c,e),s=Jt+s),lt&&"object"===t(_)&&"function"===typeof _.getAttributeType)if(d);else switch(_.getAttributeType(u,r)){case"TrustedHTML":s=lt.createHTML(s);break;case"TrustedScriptURL":s=lt.createScriptURL(s)}try{d?e.setAttributeNS(d,c,s):e.setAttribute(c,s),Le(e)?Ie(e):x(i.removed)}catch(Ue){}}}else Me(c,e)}Oe("afterSanitizeAttributes",e,null)}},Re=function t(e){var i,n=De(e);for(Oe("beforeSanitizeShadowDOM",e,null);i=n.nextNode();)if(Oe("uponSanitizeShadowNode",i,null),!Ne(i)){var s=N(i);1===i.nodeType&&(s&&s.__depth?i.__depth=(i.__removalCount||0)+s.__depth+1:i.__depth=1),(i.__depth>=_e||O(i.__depth))&&Ie(i),i.content instanceof a&&(i.content.__depth=i.__depth,t(i.content)),Fe(i)}Oe("afterSanitizeShadowDOM",e,null)};return i.sanitize=function(s){var r,o,h,c,d,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((ce=!s)&&(s="\x3c!--\x3e"),"string"!==typeof s&&!Ee(s)){if("function"!==typeof s.toString)throw E("toString is not a function");if("string"!==typeof(s=s.toString()))throw E("dirty is not a string, aborting")}if(!i.isSupported){if("object"===t(e.toStaticHTML)||"function"===typeof e.toStaticHTML){if("string"===typeof s)return e.toStaticHTML(s);if(Ee(s))return e.toStaticHTML(s.outerHTML)}return s}if(Ht||be(u),i.removed=[],"string"===typeof s&&(Xt=!1),Xt){if(s.nodeName){var p=bt(s.nodeName);if(!Dt[p]||Bt[p])throw E("root node is forbidden and cannot be sanitized in-place")}}else if(s instanceof l)1===(o=(r=Ae("\x3c!----\x3e")).ownerDocument.importNode(s,!0)).nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?r=o:r.appendChild(o);else{if(!Wt&&!Pt&&!Vt&&-1===s.indexOf("<"))return lt&&$t?lt.createHTML(s):s;if(!(r=Ae(s)))return Wt?null:$t?ht:""}r&&qt&&Ie(r.firstChild);for(var f=De(Xt?s:r);h=f.nextNode();)if((3!==h.nodeType||h!==c)&&!Ne(h)){var m=N(h);1===h.nodeType&&(m&&m.__depth?h.__depth=(h.__removalCount||0)+m.__depth+1:h.__depth=1),(h.__depth>=_e||O(h.__depth))&&Ie(h),h.content instanceof a&&(h.content.__depth=h.__depth,Re(h.content)),Fe(h),c=h}if(c=null,Xt)return s;if(Wt){if(Yt)for(d=pt.call(r.ownerDocument);r.firstChild;)d.appendChild(r.firstChild);else d=r;return(Et.shadowroot||Et.shadowrootmod)&&(d=mt.call(n,d,!0)),d}var _=Vt?r.outerHTML:r.innerHTML;return Vt&&Dt["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&L(nt,r.ownerDocument.doctype.name)&&(_="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+_),Pt&&(_=M(_,vt," "),_=M(_,wt," "),_=M(_,xt," ")),lt&&$t?lt.createHTML(_):_},i.setConfig=function(t){be(t),Ht=!0},i.clearConfig=function(){me=null,Ht=!1},i.isValidAttribute=function(t,e,i){me||be({});var n=bt(t),s=bt(e);return Be(n,s,i)},i.addHook=function(t,e){"function"===typeof e&&(yt[t]=yt[t]||[],T(yt[t],e))},i.removeHook=function(t){if(yt[t])return x(yt[t])},i.removeHooks=function(t){yt[t]&&(yt[t]=[])},i.removeAllHooks=function(){yt={}},i}return ot()}()},219:(t,e,i)=>{"use strict";var n=i(86),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(t){return n.isMemo(t)?a:o[t.$$typeof]||s}o[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[n.Memo]=a;var h=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,i,n){if("string"!==typeof i){if(f){var s=p(i);s&&s!==f&&t(e,s,n)}var a=c(i);d&&(a=a.concat(d(i)));for(var o=l(e),m=l(i),_=0;_<a.length;++_){var y=a[_];if(!r[y]&&(!n||!n[y])&&(!m||!m[y])&&(!o||!o[y])){var g=u(i,y);try{h(e,y,g)}catch(b){}}}}return e}},123:t=>{"use strict";var e=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(s){return!1}}()?Object.assign:function(t,s){for(var r,a,o=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var h in r=Object(arguments[l]))i.call(r,h)&&(o[h]=r[h]);if(e){a=e(r);for(var c=0;c<a.length;c++)n.call(r,a[c])&&(o[a[c]]=r[a[c]])}}return o}},82:(t,e)=>{"use strict";var i="function"===typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,r=i?Symbol.for("react.fragment"):60107,a=i?Symbol.for("react.strict_mode"):60108,o=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,d=i?Symbol.for("react.concurrent_mode"):60111,u=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,_=i?Symbol.for("react.lazy"):60116,y=i?Symbol.for("react.block"):60121,g=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,v=i?Symbol.for("react.scope"):60119;function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case c:case d:case r:case o:case a:case p:return t;default:switch(t=t&&t.$$typeof){case h:case u:case _:case m:case l:return t;default:return e}}case s:return e}}}function x(t){return w(t)===d}e.AsyncMode=c,e.ConcurrentMode=d,e.ContextConsumer=h,e.ContextProvider=l,e.Element=n,e.ForwardRef=u,e.Fragment=r,e.Lazy=_,e.Memo=m,e.Portal=s,e.Profiler=o,e.StrictMode=a,e.Suspense=p,e.isAsyncMode=function(t){return x(t)||w(t)===c},e.isConcurrentMode=x,e.isContextConsumer=function(t){return w(t)===h},e.isContextProvider=function(t){return w(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===n},e.isForwardRef=function(t){return w(t)===u},e.isFragment=function(t){return w(t)===r},e.isLazy=function(t){return w(t)===_},e.isMemo=function(t){return w(t)===m},e.isPortal=function(t){return w(t)===s},e.isProfiler=function(t){return w(t)===o},e.isStrictMode=function(t){return w(t)===a},e.isSuspense=function(t){return w(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===r||t===d||t===o||t===a||t===p||t===f||"object"===typeof t&&null!==t&&(t.$$typeof===_||t.$$typeof===m||t.$$typeof===l||t.$$typeof===h||t.$$typeof===u||t.$$typeof===g||t.$$typeof===b||t.$$typeof===v||t.$$typeof===y)},e.typeOf=w},86:(t,e,i)=>{"use strict";t.exports=i(82)},202:(t,e,i)=>{"use strict";var n=i(123),s="function"===typeof Symbol&&Symbol.for,r=s?Symbol.for("react.element"):60103,a=s?Symbol.for("react.portal"):60106,o=s?Symbol.for("react.fragment"):60107,l=s?Symbol.for("react.strict_mode"):60108,h=s?Symbol.for("react.profiler"):60114,c=s?Symbol.for("react.provider"):60109,d=s?Symbol.for("react.context"):60110,u=s?Symbol.for("react.forward_ref"):60112,p=s?Symbol.for("react.suspense"):60113,f=s?Symbol.for("react.memo"):60115,m=s?Symbol.for("react.lazy"):60116,_="function"===typeof Symbol&&Symbol.iterator;function y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function v(t,e,i){this.props=t,this.context=e,this.refs=b,this.updater=i||g}function w(){}function x(t,e,i){this.props=t,this.context=e,this.refs=b,this.updater=i||g}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(y(85));this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=v.prototype;var T=x.prototype=new w;T.constructor=x,n(T,v.prototype),T.isPureReactComponent=!0;var S={current:null},k=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function M(t,e,i){var n,s={},a=null,o=null;if(null!=e)for(n in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(a=""+e.key),e)k.call(e,n)&&!I.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];s.children=h}if(t&&t.defaultProps)for(n in l=t.defaultProps)void 0===s[n]&&(s[n]=l[n]);return{$$typeof:r,type:t,key:a,ref:o,props:s,_owner:S.current}}function A(t){return"object"===typeof t&&null!==t&&t.$$typeof===r}var D=/\/+/g,L=[];function E(t,e,i,n){if(L.length){var s=L.pop();return s.result=t,s.keyPrefix=e,s.func=i,s.context=n,s.count=0,s}return{result:t,keyPrefix:e,func:i,context:n,count:0}}function O(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>L.length&&L.push(t)}function N(t,e,i,n){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var o=!1;if(null===t)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case r:case a:o=!0}}if(o)return i(n,t,""===e?"."+C(t,0):e),1;if(o=0,e=""===e?".":e+":",Array.isArray(t))for(var l=0;l<t.length;l++){var h=e+C(s=t[l],l);o+=N(s,h,i,n)}else if(null===t||"object"!==typeof t?h=null:h="function"===typeof(h=_&&t[_]||t["@@iterator"])?h:null,"function"===typeof h)for(t=h.call(t),l=0;!(s=t.next()).done;)o+=N(s=s.value,h=e+C(s,l++),i,n);else if("object"===s)throw i=""+t,Error(y(31,"[object Object]"===i?"object with keys {"+Object.keys(t).join(", ")+"}":i,""));return o}function B(t,e,i){return null==t?0:N(t,"",e,i)}function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function F(t,e){t.func.call(t.context,e,t.count++)}function R(t,e,i){var n=t.result,s=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?U(t,n,i,(function(t){return t})):null!=t&&(A(t)&&(t=function(t,e){return{$$typeof:r,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,s+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(D,"$&/")+"/")+i)),n.push(t))}function U(t,e,i,n,s){var r="";null!=i&&(r=(""+i).replace(D,"$&/")+"/"),B(t,R,e=E(e,r,n,s)),O(e)}var j={current:null};function P(){var t=j.current;if(null===t)throw Error(y(321));return t}var z={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:n};e.PureComponent=x},43:(t,e,i)=>{"use strict";t.exports=i(202)},833:()=>{var t=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){if("undefined"!==typeof window){var i=Array.prototype.slice,n=Element.prototype.matches||Element.prototype.msMatchesSelector,s=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","[contenteditable]"].join(","),r=function(){function r(t,i){e(this,r),this._inertManager=i,this._rootElement=t,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return t(r,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(null!==this._savedAriaHidden?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach((function(t){this._unmanageNode(t.node)}),this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(t){var e=this;h(t,(function(t){return e._visitNode(t)}));var i=document.activeElement;if(!document.body.contains(t)){for(var n=t,s=void 0;n;){if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){s=n;break}n=n.parentNode}s&&(i=s.activeElement)}t.contains(i)&&(i.blur(),i===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(t){if(t.nodeType===Node.ELEMENT_NODE){var e=t;e!==this._rootElement&&e.hasAttribute("inert")&&this._adoptInertRoot(e),(n.call(e,s)||e.hasAttribute("tabindex"))&&this._manageNode(e)}}},{key:"_manageNode",value:function(t){var e=this._inertManager.register(t,this);this._managedNodes.add(e)}},{key:"_unmanageNode",value:function(t){var e=this._inertManager.deregister(t,this);e&&this._managedNodes.delete(e)}},{key:"_unmanageSubtree",value:function(t){var e=this;h(t,(function(t){return e._unmanageNode(t)}))}},{key:"_adoptInertRoot",value:function(t){var e=this._inertManager.getInertRoot(t);e||(this._inertManager.setInert(t,!0),e=this._inertManager.getInertRoot(t)),e.managedNodes.forEach((function(t){this._manageNode(t.node)}),this)}},{key:"_onMutation",value:function(t,e){t.forEach((function(t){var e=t.target;if("childList"===t.type)i.call(t.addedNodes).forEach((function(t){this._makeSubtreeUnfocusable(t)}),this),i.call(t.removedNodes).forEach((function(t){this._unmanageSubtree(t)}),this);else if("attributes"===t.type)if("tabindex"===t.attributeName)this._manageNode(e);else if(e!==this._rootElement&&"inert"===t.attributeName&&e.hasAttribute("inert")){this._adoptInertRoot(e);var n=this._inertManager.getInertRoot(e);this._managedNodes.forEach((function(t){e.contains(t.node)&&n._manageNode(t.node)}))}}),this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return null!==this._savedAriaHidden}},{key:"savedAriaHidden",set:function(t){this._savedAriaHidden=t},get:function(){return this._savedAriaHidden}}]),r}(),a=function(){function i(t,n){e(this,i),this._node=t,this._overrodeFocusMethod=!1,this._inertRoots=new Set([n]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return t(i,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var t=this._node;null!==this._savedTabIndex?t.setAttribute("tabindex",this._savedTabIndex):t.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete t.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var t=this.node;if(n.call(t,s)){if(-1===t.tabIndex&&this.hasSavedTabIndex)return;t.hasAttribute("tabindex")&&(this._savedTabIndex=t.tabIndex),t.setAttribute("tabindex","-1"),t.nodeType===Node.ELEMENT_NODE&&(t.focus=function(){},this._overrodeFocusMethod=!0)}else t.hasAttribute("tabindex")&&(this._savedTabIndex=t.tabIndex,t.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(t){this._throwIfDestroyed(),this._inertRoots.add(t)}},{key:"removeInertRoot",value:function(t){this._throwIfDestroyed(),this._inertRoots.delete(t),0===this._inertRoots.size&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return null!==this._savedTabIndex}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(t){this._throwIfDestroyed(),this._savedTabIndex=t},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),i}(),o=function(){function s(t){if(e(this,s),!t)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=t,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),c(t.head||t.body||t.documentElement),"loading"===t.readyState?t.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return t(s,[{key:"setInert",value:function(t,e){if(e){if(this._inertRoots.has(t))return;var i=new r(t,this);if(t.setAttribute("inert",""),this._inertRoots.set(t,i),!this._document.body.contains(t))for(var n=t.parentNode;n;)11===n.nodeType&&c(n),n=n.parentNode}else{if(!this._inertRoots.has(t))return;this._inertRoots.get(t).destructor(),this._inertRoots.delete(t),t.removeAttribute("inert")}}},{key:"getInertRoot",value:function(t){return this._inertRoots.get(t)}},{key:"register",value:function(t,e){var i=this._managedNodes.get(t);return void 0!==i?i.addInertRoot(e):i=new a(t,e),this._managedNodes.set(t,i),i}},{key:"deregister",value:function(t,e){var i=this._managedNodes.get(t);return i?(i.removeInertRoot(e),i.destroyed&&this._managedNodes.delete(t),i):null}},{key:"_onDocumentLoaded",value:function(){i.call(this._document.querySelectorAll("[inert]")).forEach((function(t){this.setInert(t,!0)}),this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(t,e){var s=this;t.forEach((function(t){switch(t.type){case"childList":i.call(t.addedNodes).forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE){var e=i.call(t.querySelectorAll("[inert]"));n.call(t,"[inert]")&&e.unshift(t),e.forEach((function(t){this.setInert(t,!0)}),s)}}),s);break;case"attributes":if("inert"!==t.attributeName)return;var e=t.target,r=e.hasAttribute("inert");s.setInert(e,r)}}),this)}}]),s}();if(!HTMLElement.prototype.hasOwnProperty("inert")){var l=new o(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(t){l.setInert(this,t)}})}}function h(t,e,i){if(t.nodeType==Node.ELEMENT_NODE){var n=t;e&&e(n);var s=n.shadowRoot;if(s)return void h(s,e,s);if("content"==n.localName){for(var r=n,a=r.getDistributedNodes?r.getDistributedNodes():[],o=0;o<a.length;o++)h(a[o],e,i);return}if("slot"==n.localName){for(var l=n,c=l.assignedNodes?l.assignedNodes({flatten:!0}):[],d=0;d<c.length;d++)h(c[d],e,i);return}}for(var u=t.firstChild;null!=u;)h(u,e,i),u=u.nextSibling}function c(t){if(!t.querySelector("style#inert-style, link#inert-style")){var e=document.createElement("style");e.setAttribute("id","inert-style"),e.textContent="\n[inert] {\n  pointer-events: none;\n  cursor: default;\n}\n\n[inert], [inert] * {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n",t.appendChild(e)}}}()}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.p="./",(()=>{"use strict";i(219);var t,e,s,r,a,o,l,h,c,d=i(43);!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(t||(t={})),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(e||(e={})),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(s||(s={})),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(r||(r={})),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(a||(a={})),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(o||(o={})),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(l||(l={})),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(h||(h={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(c||(c={}));const[u,p]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!==typeof BigInt?[BigInt,!0]:[e,!1]})(),[f,m]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!==typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[_,y]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!==typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),g=t=>"number"===typeof t,b=t=>"boolean"===typeof t,v=t=>"function"===typeof t,w=t=>null!=t&&Object(t)===t,x=t=>w(t)&&v(t.then),T=t=>w(t)&&v(t[Symbol.iterator]),S=t=>w(t)&&v(t[Symbol.asyncIterator]),I=t=>w(t)&&w(t.schema),M=t=>w(t)&&"done"in t&&"value"in t,A=t=>w(t)&&v(t.stat)&&g(t.fd),D=t=>w(t)&&E(t.body),L=t=>"_getDOMStream"in t&&"_getNodeStream"in t,E=t=>w(t)&&v(t.cancel)&&v(t.getReader)&&!L(t),O=t=>w(t)&&v(t.read)&&v(t.pipe)&&b(t.readable)&&!L(t),N=t=>w(t)&&v(t.clear)&&v(t.bytes)&&v(t.position)&&v(t.setPosition)&&v(t.capacity)&&v(t.getBufferIdentifier)&&v(t.createLong);function B(t){if(null===t)return"null";if(undefined===t)return"undefined";switch(typeof t){case"number":case"bigint":return"".concat(t);case"string":return'"'.concat(t,'"')}return"function"===typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?"[".concat(t instanceof f||t instanceof _?[...t].map((t=>B(t))):t,"]"):ArrayBuffer.isView(t)?"[".concat(t,"]"):JSON.stringify(t,((t,e)=>"bigint"===typeof e?"".concat(e):e))}function C(t,e,i,n){return new(i||(i=Promise))((function(s,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function o(t){try{l(n.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))}Object.create;function F(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(t){return this instanceof R?(this.v=t,this):new R(t)}function U(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=i.apply(t,e||[]),r=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){s[t]&&(n[t]=function(e){return new Promise((function(i,n){r.push([t,e,i,n])>1||o(t,e)}))})}function o(t,e){try{(i=s[t](e)).value instanceof R?Promise.resolve(i.value.v).then(l,h):c(r[0][2],i)}catch(n){c(r[0][3],n)}var i}function l(t){o("next",t)}function h(t){o("throw",t)}function c(t,e){t(e),r.shift(),r.length&&o(r[0][0],r[0][1])}}function j(t){var e,i;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,s){e[n]=t[n]?function(e){return(i=!i)?{value:R(t[n](e)),done:!1}:s?s(e):e}:s}}function P(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=F(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(i){e[i]=t[i]&&function(e){return new Promise((function(n,s){(function(t,e,i,n){Promise.resolve(n).then((function(e){t({value:e,done:i})}),e)})(n,s,(e=t[i](e)).done,e.value)}))}}}Object.create;"function"===typeof SuppressedError&&SuppressedError;const z=new TextDecoder("utf-8"),V=t=>z.decode(t),H=new TextEncoder,q=t=>H.encode(t),W="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function Y(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.byteLength;const s=t.byteLength,r=new Uint8Array(t.buffer,t.byteOffset,s),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(n,s));return r.set(a,i),t}function $(t,e){const i=function(t){const e=t[0]?[t[0]]:[];let i,n,s,r;for(let a,o,l=0,h=0,c=t.length;++l<c;)a=e[h],o=t[l],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset?o&&(e[++h]=o):(({byteOffset:i,byteLength:s}=a),({byteOffset:n,byteLength:r}=o),i+s<n||n+r<i?o&&(e[++h]=o):e[h]=new Uint8Array(a.buffer,i,n-i+r));return e}(t),n=i.reduce(((t,e)=>t+e.byteLength),0);let s,r,a,o=0,l=-1;const h=Math.min(e||Number.POSITIVE_INFINITY,n);for(const c=i.length;++l<c;){if(s=i[l],r=s.subarray(0,Math.min(s.length,h-o)),h<=o+r.length){r.length<s.length?i[l]=s.subarray(r.length):r.length===s.length&&l++,a?Y(a,r,o):a=r;break}Y(a||(a=new Uint8Array(h)),r,o),o+=r.length}return[a||new Uint8Array(0),i.slice(l),n-(a?a.byteLength:0)]}function G(t,e){let i=M(e)?e.value:e;return i instanceof t?t===Uint8Array?new t(i.buffer,i.byteOffset,i.byteLength):i:i?("string"===typeof i&&(i=q(i)),i instanceof ArrayBuffer||i instanceof W?new t(i):N(i)?G(t,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new t(0):new t(i.buffer,i.byteOffset,i.byteLength/t.BYTES_PER_ELEMENT):t.from(i)):new t(0)}const Z=t=>G(Int32Array,t),J=t=>G(Uint8Array,t),K=t=>(t.next(),t);function*X(t,e){const i=function*(t){yield t},n="string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof W?i(e):T(e)?e:i(e);return yield*K(function*(e){let i=null;do{i=e.next(yield G(t,i))}while(!i.done)}(n[Symbol.iterator]())),new t}function Q(t,e){return U(this,arguments,(function*(){if(x(e))return yield R(yield R(yield*j(P(Q(t,yield R(e))))));const i=function(t){return U(this,arguments,(function*(){yield yield R(yield R(t))}))},n="string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof W?i(e):T(e)?function(t){return U(this,arguments,(function*(){yield R(yield*j(P(K(function*(t){let e=null;do{e=t.next(yield null===e||void 0===e?void 0:e.value)}while(!e.done)}(t[Symbol.iterator]())))))}))}(e):S(e)?e:i(e);return yield R(yield*j(P(K(function(e){return U(this,arguments,(function*(){let i=null;do{i=yield R(e.next(yield yield R(G(t,i))))}while(!i.done)}))}(n[Symbol.asyncIterator]()))))),yield R(new t)}))}function tt(t,e,i){if(0!==t){i=i.slice(0,e+1);for(let n=-1;++n<=e;)i[n]+=t}return i}const et=Symbol.for("isArrowBigNum");function it(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return 0===i.length?Object.setPrototypeOf(G(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...i),this.constructor.prototype)}function nt(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return it.apply(this,e)}function st(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return it.apply(this,e)}function rt(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return it.apply(this,e)}function at(t){const{buffer:e,byteOffset:i,length:n,signed:s}=t,r=new _(e,i,n),a=s&&r[r.length-1]&BigInt(1)<<BigInt(63);let o=a?BigInt(1):BigInt(0),l=BigInt(0);if(a){for(const t of r)o+=~t*(BigInt(1)<<BigInt(32)*l++);o*=BigInt(-1)}else for(const h of r)o+=h*(BigInt(1)<<BigInt(32)*l++);return o}let ot,lt;function ht(t){let e="";const i=new Uint32Array(2);let n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const s=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let r=-1;const a=n.length-1;do{for(i[0]=n[r=0];r<a;)n[r++]=i[1]=i[0]/10,i[0]=(i[0]-10*i[1]<<16)+n[r];n[r]=i[1]=i[0]/10,i[0]=i[0]-10*i[1],e="".concat(i[0]).concat(e)}while(s[0]||s[1]||s[2]||s[3]);return null!==e&&void 0!==e?e:"0"}it.prototype[et]=!0,it.prototype.toJSON=function(){return'"'.concat(ot(this),'"')},it.prototype.valueOf=function(){return at(this)},it.prototype.toString=function(){return ot(this)},it.prototype[Symbol.toPrimitive]=function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"){case"number":return at(this);case"string":return ot(this);case"default":return lt(this)}return ot(this)},Object.setPrototypeOf(nt.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(st.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(rt.prototype,Object.create(Uint32Array.prototype)),Object.assign(nt.prototype,it.prototype,{constructor:nt,signed:!0,TypedArray:Int32Array,BigIntArray:f}),Object.assign(st.prototype,it.prototype,{constructor:st,signed:!1,TypedArray:Uint32Array,BigIntArray:_}),Object.assign(rt.prototype,it.prototype,{constructor:rt,signed:!0,TypedArray:Uint32Array,BigIntArray:_}),p?(lt=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:ht(t),ot=t=>8===t.byteLength?"".concat(new t.BigIntArray(t.buffer,t.byteOffset,1)[0]):ht(t)):(ot=ht,lt=ot);class ct{static new(t,e){switch(e){case!0:return new nt(t);case!1:return new st(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case f:return new nt(t)}return 16===t.byteLength?new rt(t):new st(t)}static signed(t){return new nt(t)}static unsigned(t){return new st(t)}static decimal(t){return new rt(t)}constructor(t,e){return ct.new(t,e)}}var dt,ut,pt,ft,mt,_t,yt,gt,bt,vt,wt,xt,Tt,St,kt,It,Mt,At,Dt,Lt;class Et{static isNull(t){return(null===t||void 0===t?void 0:t.typeId)===h.Null}static isInt(t){return(null===t||void 0===t?void 0:t.typeId)===h.Int}static isFloat(t){return(null===t||void 0===t?void 0:t.typeId)===h.Float}static isBinary(t){return(null===t||void 0===t?void 0:t.typeId)===h.Binary}static isUtf8(t){return(null===t||void 0===t?void 0:t.typeId)===h.Utf8}static isBool(t){return(null===t||void 0===t?void 0:t.typeId)===h.Bool}static isDecimal(t){return(null===t||void 0===t?void 0:t.typeId)===h.Decimal}static isDate(t){return(null===t||void 0===t?void 0:t.typeId)===h.Date}static isTime(t){return(null===t||void 0===t?void 0:t.typeId)===h.Time}static isTimestamp(t){return(null===t||void 0===t?void 0:t.typeId)===h.Timestamp}static isInterval(t){return(null===t||void 0===t?void 0:t.typeId)===h.Interval}static isList(t){return(null===t||void 0===t?void 0:t.typeId)===h.List}static isStruct(t){return(null===t||void 0===t?void 0:t.typeId)===h.Struct}static isUnion(t){return(null===t||void 0===t?void 0:t.typeId)===h.Union}static isFixedSizeBinary(t){return(null===t||void 0===t?void 0:t.typeId)===h.FixedSizeBinary}static isFixedSizeList(t){return(null===t||void 0===t?void 0:t.typeId)===h.FixedSizeList}static isMap(t){return(null===t||void 0===t?void 0:t.typeId)===h.Map}static isDictionary(t){return(null===t||void 0===t?void 0:t.typeId)===h.Dictionary}static isDenseUnion(t){return Et.isUnion(t)&&t.mode===e.Dense}static isSparseUnion(t){return Et.isUnion(t)&&t.mode===e.Sparse}get typeId(){return h.NONE}}dt=Symbol.toStringTag,Et[dt]=((Lt=Et.prototype).children=null,Lt.ArrayType=Array,Lt[Symbol.toStringTag]="DataType");class Ot extends Et{toString(){return"Null"}get typeId(){return h.Null}}ut=Symbol.toStringTag,Ot[ut]=(t=>t[Symbol.toStringTag]="Null")(Ot.prototype);class Nt extends Et{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return h.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?f:_}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}pt=Symbol.toStringTag,Nt[pt]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Nt.prototype);class Bt extends Nt{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(class extends Nt{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(class extends Nt{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(Bt.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(class extends Nt{constructor(){super(!0,64)}get ArrayType(){return f}}.prototype,"ArrayType",{value:f}),Object.defineProperty(class extends Nt{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(class extends Nt{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends Nt{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(class extends Nt{constructor(){super(!1,64)}get ArrayType(){return _}}.prototype,"ArrayType",{value:_});class Ct extends Et{constructor(t){super(),this.precision=t}get typeId(){return h.Float}get ArrayType(){switch(this.precision){case s.HALF:return Uint16Array;case s.SINGLE:return Float32Array;case s.DOUBLE:return Float64Array}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}toString(){return"Float".concat(this.precision<<5||16)}}ft=Symbol.toStringTag,Ct[ft]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(Ct.prototype);Object.defineProperty(class extends Ct{constructor(){super(s.HALF)}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends Ct{constructor(){super(s.SINGLE)}}.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(class extends Ct{constructor(){super(s.DOUBLE)}}.prototype,"ArrayType",{value:Float64Array});class Ft extends Et{constructor(){super()}get typeId(){return h.Binary}toString(){return"Binary"}}mt=Symbol.toStringTag,Ft[mt]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(Ft.prototype);class Rt extends Et{constructor(){super()}get typeId(){return h.Utf8}toString(){return"Utf8"}}_t=Symbol.toStringTag,Rt[_t]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(Rt.prototype);class Ut extends Et{constructor(){super()}get typeId(){return h.Bool}toString(){return"Bool"}}yt=Symbol.toStringTag,Ut[yt]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Ut.prototype);class jt extends Et{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;super(),this.scale=t,this.precision=e,this.bitWidth=i}get typeId(){return h.Decimal}toString(){return"Decimal[".concat(this.precision,"e").concat(this.scale>0?"+":"").concat(this.scale,"]")}}gt=Symbol.toStringTag,jt[gt]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(jt.prototype);class Pt extends Et{constructor(t){super(),this.unit=t}get typeId(){return h.Date}toString(){return"Date".concat(32*(this.unit+1),"<").concat(r[this.unit],">")}}bt=Symbol.toStringTag,Pt[bt]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Pt.prototype);class zt extends Et{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return h.Time}toString(){return"Time".concat(this.bitWidth,"<").concat(a[this.unit],">")}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return f}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}}vt=Symbol.toStringTag,zt[vt]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(zt.prototype);class Vt extends Et{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return h.Timestamp}toString(){return"Timestamp<".concat(a[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}}wt=Symbol.toStringTag,Vt[wt]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Vt.prototype);class Ht extends Et{constructor(t){super(),this.unit=t}get typeId(){return h.Interval}toString(){return"Interval<".concat(o[this.unit],">")}}xt=Symbol.toStringTag,Ht[xt]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Ht.prototype);class qt extends Et{constructor(t){super(),this.children=[t]}get typeId(){return h.List}toString(){return"List<".concat(this.valueType,">")}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}Tt=Symbol.toStringTag,qt[Tt]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(qt.prototype);class Wt extends Et{constructor(t){super(),this.children=t}get typeId(){return h.Struct}toString(){return"Struct<{".concat(this.children.map((t=>"".concat(t.name,":").concat(t.type))).join(", "),"}>")}}St=Symbol.toStringTag,Wt[St]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(Wt.prototype);class Yt extends Et{constructor(t,e,i){super(),this.mode=t,this.children=i,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,i)=>(t[e]=i)&&t||t),Object.create(null))}get typeId(){return h.Union}toString(){return"".concat(this[Symbol.toStringTag],"<").concat(this.children.map((t=>"".concat(t.type))).join(" | "),">")}}kt=Symbol.toStringTag,Yt[kt]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Yt.prototype);class $t extends Et{constructor(t){super(),this.byteWidth=t}get typeId(){return h.FixedSizeBinary}toString(){return"FixedSizeBinary[".concat(this.byteWidth,"]")}}It=Symbol.toStringTag,$t[It]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))($t.prototype);class Gt extends Et{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return h.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}Mt=Symbol.toStringTag,Gt[Mt]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(Gt.prototype);class Zt extends Et{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.children=[t],this.keysSorted=e}get typeId(){return h.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return"Map<{".concat(this.children[0].type.children.map((t=>"".concat(t.name,":").concat(t.type))).join(", "),"}>")}}At=Symbol.toStringTag,Zt[At]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(Zt.prototype);const Jt=(Kt=-1,()=>++Kt);var Kt;class Xt extends Et{constructor(t,e,i,n){super(),this.indices=e,this.dictionary=t,this.isOrdered=n||!1,this.id=null==i?Jt():"number"===typeof i?i:i.low}get typeId(){return h.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return"Dictionary<".concat(this.indices,", ").concat(this.dictionary,">")}}function Qt(t){const e=t;switch(t.typeId){case h.Decimal:return t.bitWidth/32;case h.Timestamp:return 2;case h.Date:case h.Interval:return 1+e.unit;case h.FixedSizeList:return e.listSize;case h.FixedSizeBinary:return e.byteWidth;default:return 1}}Dt=Symbol.toStringTag,Xt[Dt]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Xt.prototype);class te{visitMany(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return t.map(((t,e)=>this.visit(t,...i.map((t=>t[e])))))}visit(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(t){return function(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("number"===typeof e)return ee(t,e,i);if("string"===typeof e&&e in h)return ee(t,h[e],i);if(e&&e instanceof Et)return ee(t,ie(e),i);if((null===e||void 0===e?void 0:e.type)&&e.type instanceof Et)return ee(t,ie(e.type),i);return ee(t,h.NONE,i)}(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}getVisitFnByTypeId(t){return ee(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}visitNull(t){return null}visitBool(t){return null}visitInt(t){return null}visitFloat(t){return null}visitUtf8(t){return null}visitBinary(t){return null}visitFixedSizeBinary(t){return null}visitDate(t){return null}visitTimestamp(t){return null}visitTime(t){return null}visitDecimal(t){return null}visitList(t){return null}visitStruct(t){return null}visitUnion(t){return null}visitDictionary(t){return null}visitInterval(t){return null}visitFixedSizeList(t){return null}visitMap(t){return null}}function ee(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=null;switch(e){case h.Null:n=t.visitNull;break;case h.Bool:n=t.visitBool;break;case h.Int:n=t.visitInt;break;case h.Int8:n=t.visitInt8||t.visitInt;break;case h.Int16:n=t.visitInt16||t.visitInt;break;case h.Int32:n=t.visitInt32||t.visitInt;break;case h.Int64:n=t.visitInt64||t.visitInt;break;case h.Uint8:n=t.visitUint8||t.visitInt;break;case h.Uint16:n=t.visitUint16||t.visitInt;break;case h.Uint32:n=t.visitUint32||t.visitInt;break;case h.Uint64:n=t.visitUint64||t.visitInt;break;case h.Float:n=t.visitFloat;break;case h.Float16:n=t.visitFloat16||t.visitFloat;break;case h.Float32:n=t.visitFloat32||t.visitFloat;break;case h.Float64:n=t.visitFloat64||t.visitFloat;break;case h.Utf8:n=t.visitUtf8;break;case h.Binary:n=t.visitBinary;break;case h.FixedSizeBinary:n=t.visitFixedSizeBinary;break;case h.Date:n=t.visitDate;break;case h.DateDay:n=t.visitDateDay||t.visitDate;break;case h.DateMillisecond:n=t.visitDateMillisecond||t.visitDate;break;case h.Timestamp:n=t.visitTimestamp;break;case h.TimestampSecond:n=t.visitTimestampSecond||t.visitTimestamp;break;case h.TimestampMillisecond:n=t.visitTimestampMillisecond||t.visitTimestamp;break;case h.TimestampMicrosecond:n=t.visitTimestampMicrosecond||t.visitTimestamp;break;case h.TimestampNanosecond:n=t.visitTimestampNanosecond||t.visitTimestamp;break;case h.Time:n=t.visitTime;break;case h.TimeSecond:n=t.visitTimeSecond||t.visitTime;break;case h.TimeMillisecond:n=t.visitTimeMillisecond||t.visitTime;break;case h.TimeMicrosecond:n=t.visitTimeMicrosecond||t.visitTime;break;case h.TimeNanosecond:n=t.visitTimeNanosecond||t.visitTime;break;case h.Decimal:n=t.visitDecimal;break;case h.List:n=t.visitList;break;case h.Struct:n=t.visitStruct;break;case h.Union:n=t.visitUnion;break;case h.DenseUnion:n=t.visitDenseUnion||t.visitUnion;break;case h.SparseUnion:n=t.visitSparseUnion||t.visitUnion;break;case h.Dictionary:n=t.visitDictionary;break;case h.Interval:n=t.visitInterval;break;case h.IntervalDayTime:n=t.visitIntervalDayTime||t.visitInterval;break;case h.IntervalYearMonth:n=t.visitIntervalYearMonth||t.visitInterval;break;case h.FixedSizeList:n=t.visitFixedSizeList;break;case h.Map:n=t.visitMap}if("function"===typeof n)return n;if(!i)return()=>null;throw new Error("Unrecognized type '".concat(h[e],"'"))}function ie(t){switch(t.typeId){case h.Null:return h.Null;case h.Int:{const{bitWidth:e,isSigned:i}=t;switch(e){case 8:return i?h.Int8:h.Uint8;case 16:return i?h.Int16:h.Uint16;case 32:return i?h.Int32:h.Uint32;case 64:return i?h.Int64:h.Uint64}return h.Int}case h.Float:switch(t.precision){case s.HALF:return h.Float16;case s.SINGLE:return h.Float32;case s.DOUBLE:return h.Float64}return h.Float;case h.Binary:return h.Binary;case h.Utf8:return h.Utf8;case h.Bool:return h.Bool;case h.Decimal:return h.Decimal;case h.Time:switch(t.unit){case a.SECOND:return h.TimeSecond;case a.MILLISECOND:return h.TimeMillisecond;case a.MICROSECOND:return h.TimeMicrosecond;case a.NANOSECOND:return h.TimeNanosecond}return h.Time;case h.Timestamp:switch(t.unit){case a.SECOND:return h.TimestampSecond;case a.MILLISECOND:return h.TimestampMillisecond;case a.MICROSECOND:return h.TimestampMicrosecond;case a.NANOSECOND:return h.TimestampNanosecond}return h.Timestamp;case h.Date:switch(t.unit){case r.DAY:return h.DateDay;case r.MILLISECOND:return h.DateMillisecond}return h.Date;case h.Interval:switch(t.unit){case o.DAY_TIME:return h.IntervalDayTime;case o.YEAR_MONTH:return h.IntervalYearMonth}return h.Interval;case h.Map:return h.Map;case h.List:return h.List;case h.Struct:return h.Struct;case h.Union:switch(t.mode){case e.Dense:return h.DenseUnion;case e.Sparse:return h.SparseUnion}return h.Union;case h.FixedSizeBinary:return h.FixedSizeBinary;case h.FixedSizeList:return h.FixedSizeList;case h.Dictionary:return h.Dictionary}throw new Error("Unrecognized type '".concat(h[t.typeId],"'"))}te.prototype.visitInt8=null,te.prototype.visitInt16=null,te.prototype.visitInt32=null,te.prototype.visitInt64=null,te.prototype.visitUint8=null,te.prototype.visitUint16=null,te.prototype.visitUint32=null,te.prototype.visitUint64=null,te.prototype.visitFloat16=null,te.prototype.visitFloat32=null,te.prototype.visitFloat64=null,te.prototype.visitDateDay=null,te.prototype.visitDateMillisecond=null,te.prototype.visitTimestampSecond=null,te.prototype.visitTimestampMillisecond=null,te.prototype.visitTimestampMicrosecond=null,te.prototype.visitTimestampNanosecond=null,te.prototype.visitTimeSecond=null,te.prototype.visitTimeMillisecond=null,te.prototype.visitTimeMicrosecond=null,te.prototype.visitTimeNanosecond=null,te.prototype.visitDenseUnion=null,te.prototype.visitSparseUnion=null,te.prototype.visitIntervalDayTime=null,te.prototype.visitIntervalYearMonth=null;const ne=new Float64Array(1),se=new Uint32Array(ne.buffer);function re(t){const e=(31744&t)>>10,i=(1023&t)/1024,n=Math.pow(-1,(32768&t)>>15);switch(e){case 31:return n*(i?Number.NaN:1/0);case 0:return n*(i?6103515625e-14*i:0)}return n*Math.pow(2,e-15)*(1+i)}class ae extends te{}function oe(t){return(e,i,n)=>{if(e.setValid(i,null!=n))return t(e,i,n)}}const le=(t,e,i)=>{t[e]=Math.trunc(i%4294967296),t[e+1]=Math.trunc(i/4294967296)},he=(t,e,i,n)=>{if(i+1<e.length){const{[i]:s,[i+1]:r}=e;t.set(n.subarray(0,r-s),s)}},ce=(t,e,i)=>{let{values:n}=t;n[e]=i},de=(t,e,i)=>{let{values:n}=t;n[e]=i},ue=(t,e,i)=>{let{values:n}=t;n[e]=function(t){if(t!==t)return 32256;ne[0]=t;const e=(2147483648&se[1])>>16&65535;let i=2146435072&se[1],n=0;return i>=1089470464?se[0]>0?i=31744:(i=(2080374784&i)>>16,n=(1048575&se[1])>>10):i<=1056964608?(n=1048576+(1048575&se[1]),n=1048576+(n<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,n=512+(1048575&se[1])>>10),e|i|65535&n}(i)},pe=(t,e,i)=>{let{values:n}=t;((t,e,i)=>{t[e]=Math.trunc(i/864e5)})(n,e,i.valueOf())},fe=(t,e,i)=>{let{values:n}=t;le(n,2*e,i.valueOf())},me=(t,e,i)=>{let{values:n}=t;return le(n,2*e,i/1e3)},_e=(t,e,i)=>{let{values:n}=t;return le(n,2*e,i)},ye=(t,e,i)=>{let{values:n}=t;return((t,e,i)=>{t[e]=Math.trunc(1e3*i%4294967296),t[e+1]=Math.trunc(1e3*i/4294967296)})(n,2*e,i)},ge=(t,e,i)=>{let{values:n}=t;return((t,e,i)=>{t[e]=Math.trunc(1e6*i%4294967296),t[e+1]=Math.trunc(1e6*i/4294967296)})(n,2*e,i)},be=(t,e,i)=>{let{values:n}=t;n[e]=i},ve=(t,e,i)=>{let{values:n}=t;n[e]=i},we=(t,e,i)=>{let{values:n}=t;n[e]=i},xe=(t,e,i)=>{let{values:n}=t;n[e]=i},Te=(t,e,i)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[n];Me.visit(s,t.valueOffsets[e],i)},Se=(t,e,i)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[n];Me.visit(s,e,i)},ke=(t,e,i)=>{let{values:n}=t;n.set(i.subarray(0,2),2*e)},Ie=(t,e,i)=>{let{values:n}=t;n[e]=12*i[0]+i[1]%12};ae.prototype.visitBool=oe(((t,e,i)=>{let{offset:n,values:s}=t;const r=n+e;i?s[r>>3]|=1<<r%8:s[r>>3]&=~(1<<r%8)})),ae.prototype.visitInt=oe(ce),ae.prototype.visitInt8=oe(ce),ae.prototype.visitInt16=oe(ce),ae.prototype.visitInt32=oe(ce),ae.prototype.visitInt64=oe(ce),ae.prototype.visitUint8=oe(ce),ae.prototype.visitUint16=oe(ce),ae.prototype.visitUint32=oe(ce),ae.prototype.visitUint64=oe(ce),ae.prototype.visitFloat=oe(((t,e,i)=>{switch(t.type.precision){case s.HALF:return ue(t,e,i);case s.SINGLE:case s.DOUBLE:return de(t,e,i)}})),ae.prototype.visitFloat16=oe(ue),ae.prototype.visitFloat32=oe(de),ae.prototype.visitFloat64=oe(de),ae.prototype.visitUtf8=oe(((t,e,i)=>{let{values:n,valueOffsets:s}=t;he(n,s,e,q(i))})),ae.prototype.visitBinary=oe(((t,e,i)=>{let{values:n,valueOffsets:s}=t;return he(n,s,e,i)})),ae.prototype.visitFixedSizeBinary=oe(((t,e,i)=>{let{stride:n,values:s}=t;s.set(i.subarray(0,n),n*e)})),ae.prototype.visitDate=oe(((t,e,i)=>{t.type.unit===r.DAY?pe(t,e,i):fe(t,e,i)})),ae.prototype.visitDateDay=oe(pe),ae.prototype.visitDateMillisecond=oe(fe),ae.prototype.visitTimestamp=oe(((t,e,i)=>{switch(t.type.unit){case a.SECOND:return me(t,e,i);case a.MILLISECOND:return _e(t,e,i);case a.MICROSECOND:return ye(t,e,i);case a.NANOSECOND:return ge(t,e,i)}})),ae.prototype.visitTimestampSecond=oe(me),ae.prototype.visitTimestampMillisecond=oe(_e),ae.prototype.visitTimestampMicrosecond=oe(ye),ae.prototype.visitTimestampNanosecond=oe(ge),ae.prototype.visitTime=oe(((t,e,i)=>{switch(t.type.unit){case a.SECOND:return be(t,e,i);case a.MILLISECOND:return ve(t,e,i);case a.MICROSECOND:return we(t,e,i);case a.NANOSECOND:return xe(t,e,i)}})),ae.prototype.visitTimeSecond=oe(be),ae.prototype.visitTimeMillisecond=oe(ve),ae.prototype.visitTimeMicrosecond=oe(we),ae.prototype.visitTimeNanosecond=oe(xe),ae.prototype.visitDecimal=oe(((t,e,i)=>{let{values:n,stride:s}=t;n.set(i.subarray(0,s),s*e)})),ae.prototype.visitList=oe(((t,e,i)=>{const n=t.children[0],s=t.valueOffsets,r=Me.getVisitFn(n);if(Array.isArray(i))for(let a=-1,o=s[e],l=s[e+1];o<l;)r(n,o++,i[++a]);else for(let a=-1,o=s[e],l=s[e+1];o<l;)r(n,o++,i.get(++a))})),ae.prototype.visitStruct=oe(((t,e,i)=>{const n=t.type.children.map((t=>Me.getVisitFn(t.type))),s=i instanceof Map?(r=e,a=i,(t,e,i,n)=>e&&t(e,r,a.get(i.name))):i instanceof qi?((t,e)=>(i,n,s,r)=>n&&i(n,t,e.get(r)))(e,i):Array.isArray(i)?((t,e)=>(i,n,s,r)=>n&&i(n,t,e[r]))(e,i):((t,e)=>(i,n,s,r)=>n&&i(n,t,e[s.name]))(e,i);var r,a;t.type.children.forEach(((e,i)=>s(n[i],t.children[i],e,i)))})),ae.prototype.visitUnion=oe(((t,i,n)=>{t.type.mode===e.Dense?Te(t,i,n):Se(t,i,n)})),ae.prototype.visitDenseUnion=oe(Te),ae.prototype.visitSparseUnion=oe(Se),ae.prototype.visitDictionary=oe(((t,e,i)=>{var n;null===(n=t.dictionary)||void 0===n||n.set(t.values[e],i)})),ae.prototype.visitInterval=oe(((t,e,i)=>{t.type.unit===o.DAY_TIME?ke(t,e,i):Ie(t,e,i)})),ae.prototype.visitIntervalDayTime=oe(ke),ae.prototype.visitIntervalYearMonth=oe(Ie),ae.prototype.visitFixedSizeList=oe(((t,e,i)=>{const{stride:n}=t,s=t.children[0],r=Me.getVisitFn(s);if(Array.isArray(i))for(let a=-1,o=e*n;++a<n;)r(s,o+a,i[a]);else for(let a=-1,o=e*n;++a<n;)r(s,o+a,i.get(a))})),ae.prototype.visitMap=oe(((t,e,i)=>{const n=t.children[0],{valueOffsets:s}=t,r=Me.getVisitFn(n);let{[e]:a,[e+1]:o}=s;const l=i instanceof Map?i.entries():Object.entries(i);for(const h of l)if(r(n,a,h),++a>=o)break}));const Me=new ae,Ae=Symbol.for("parent"),De=Symbol.for("rowIndex");class Le{constructor(t,e){return this[Ae]=t,this[De]=e,new Proxy(this,new Oe)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[De],e=this[Ae],i=e.type.children,n={};for(let s=-1,r=i.length;++s<r;)n[i[s].name]=ti.visit(e.children[s],t);return n}toString(){return"{".concat([...this].map((t=>{let[e,i]=t;return"".concat(B(e),": ").concat(B(i))})).join(", "),"}")}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Ee(this[Ae],this[De])}}class Ee{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,ti.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Le.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ae]:{writable:!0,enumerable:!1,configurable:!1,value:null},[De]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Oe{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ae].type.children.map((t=>t.name))}has(t,e){return-1!==t[Ae].type.children.findIndex((t=>t.name===e))}getOwnPropertyDescriptor(t,e){if(-1!==t[Ae].type.children.findIndex((t=>t.name===e)))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const i=t[Ae].type.children.findIndex((t=>t.name===e));if(-1!==i){const n=ti.visit(t[Ae].children[i],t[De]);return Reflect.set(t,e,n),n}}set(t,e,i){const n=t[Ae].type.children.findIndex((t=>t.name===e));return-1!==n?(Me.visit(t[Ae].children[n],t[De],i),Reflect.set(t,e,i)):!(!Reflect.has(t,e)&&"symbol"!==typeof e)&&Reflect.set(t,e,i)}}class Ne extends te{}function Be(t){return(e,i)=>e.getValid(i)?t(e,i):null}const Ce=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),Fe=t=>new Date(t),Re=(t,e,i)=>{if(i+1>=e.length)return null;const n=e[i],s=e[i+1];return t.subarray(n,s)},Ue=(t,e)=>{let{values:i}=t;return((t,e)=>Fe(((t,e)=>864e5*t[e])(t,e)))(i,e)},je=(t,e)=>{let{values:i}=t;return((t,e)=>Fe(Ce(t,e)))(i,2*e)},Pe=(t,e)=>{let{stride:i,values:n}=t;return n[i*e]},ze=(t,e)=>{let{values:i}=t;return i[e]},Ve=(t,e)=>{let{values:i}=t;return 1e3*Ce(i,2*e)},He=(t,e)=>{let{values:i}=t;return Ce(i,2*e)},qe=(t,e)=>{let{values:i}=t;return((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(i,2*e)},We=(t,e)=>{let{values:i}=t;return((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(i,2*e)},Ye=(t,e)=>{let{values:i}=t;return i[e]},$e=(t,e)=>{let{values:i}=t;return i[e]},Ge=(t,e)=>{let{values:i}=t;return i[e]},Ze=(t,e)=>{let{values:i}=t;return i[e]},Je=(t,e)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[i];return ti.visit(n,t.valueOffsets[e])},Ke=(t,e)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[i];return ti.visit(n,e)},Xe=(t,e)=>{let{values:i}=t;return i.subarray(2*e,2*(e+1))},Qe=(t,e)=>{let{values:i}=t;const n=i[e],s=new Int32Array(2);return s[0]=Math.trunc(n/12),s[1]=Math.trunc(n%12),s};Ne.prototype.visitNull=Be(((t,e)=>null)),Ne.prototype.visitBool=Be(((t,e)=>{let{offset:i,values:n}=t;const s=i+e;return 0!==(n[s>>3]&1<<s%8)})),Ne.prototype.visitInt=Be(((t,e)=>{let{values:i}=t;return i[e]})),Ne.prototype.visitInt8=Be(Pe),Ne.prototype.visitInt16=Be(Pe),Ne.prototype.visitInt32=Be(Pe),Ne.prototype.visitInt64=Be(ze),Ne.prototype.visitUint8=Be(Pe),Ne.prototype.visitUint16=Be(Pe),Ne.prototype.visitUint32=Be(Pe),Ne.prototype.visitUint64=Be(ze),Ne.prototype.visitFloat=Be(((t,e)=>{let{type:i,values:n}=t;return i.precision!==s.HALF?n[e]:re(n[e])})),Ne.prototype.visitFloat16=Be(((t,e)=>{let{stride:i,values:n}=t;return re(n[i*e])})),Ne.prototype.visitFloat32=Be(Pe),Ne.prototype.visitFloat64=Be(Pe),Ne.prototype.visitUtf8=Be(((t,e)=>{let{values:i,valueOffsets:n}=t;const s=Re(i,n,e);return null!==s?V(s):null})),Ne.prototype.visitBinary=Be(((t,e)=>{let{values:i,valueOffsets:n}=t;return Re(i,n,e)})),Ne.prototype.visitFixedSizeBinary=Be(((t,e)=>{let{stride:i,values:n}=t;return n.subarray(i*e,i*(e+1))})),Ne.prototype.visitDate=Be(((t,e)=>t.type.unit===r.DAY?Ue(t,e):je(t,e))),Ne.prototype.visitDateDay=Be(Ue),Ne.prototype.visitDateMillisecond=Be(je),Ne.prototype.visitTimestamp=Be(((t,e)=>{switch(t.type.unit){case a.SECOND:return Ve(t,e);case a.MILLISECOND:return He(t,e);case a.MICROSECOND:return qe(t,e);case a.NANOSECOND:return We(t,e)}})),Ne.prototype.visitTimestampSecond=Be(Ve),Ne.prototype.visitTimestampMillisecond=Be(He),Ne.prototype.visitTimestampMicrosecond=Be(qe),Ne.prototype.visitTimestampNanosecond=Be(We),Ne.prototype.visitTime=Be(((t,e)=>{switch(t.type.unit){case a.SECOND:return Ye(t,e);case a.MILLISECOND:return $e(t,e);case a.MICROSECOND:return Ge(t,e);case a.NANOSECOND:return Ze(t,e)}})),Ne.prototype.visitTimeSecond=Be(Ye),Ne.prototype.visitTimeMillisecond=Be($e),Ne.prototype.visitTimeMicrosecond=Be(Ge),Ne.prototype.visitTimeNanosecond=Be(Ze),Ne.prototype.visitDecimal=Be(((t,e)=>{let{values:i,stride:n}=t;return ct.decimal(i.subarray(n*e,n*(e+1)))})),Ne.prototype.visitList=Be(((t,e)=>{const{valueOffsets:i,stride:n,children:s}=t,{[e*n]:r,[e*n+1]:a}=i,o=s[0].slice(r,a-r);return new qi([o])})),Ne.prototype.visitStruct=Be(((t,e)=>new Le(t,e))),Ne.prototype.visitUnion=Be(((t,i)=>t.type.mode===e.Dense?Je(t,i):Ke(t,i))),Ne.prototype.visitDenseUnion=Be(Je),Ne.prototype.visitSparseUnion=Be(Ke),Ne.prototype.visitDictionary=Be(((t,e)=>{var i;return null===(i=t.dictionary)||void 0===i?void 0:i.get(t.values[e])})),Ne.prototype.visitInterval=Be(((t,e)=>t.type.unit===o.DAY_TIME?Xe(t,e):Qe(t,e))),Ne.prototype.visitIntervalDayTime=Be(Xe),Ne.prototype.visitIntervalYearMonth=Be(Qe),Ne.prototype.visitFixedSizeList=Be(((t,e)=>{const{stride:i,children:n}=t,s=n[0].slice(e*i,i);return new qi([s])})),Ne.prototype.visitMap=Be(((t,e)=>{const{valueOffsets:i,children:n}=t,{[e]:s,[e+1]:r}=i,a=n[0];return new ni(a.slice(s,r-s))}));const ti=new Ne,ei=Symbol.for("keys"),ii=Symbol.for("vals");class ni{constructor(t){return this[ei]=new qi([t.children[0]]).memoize(),this[ii]=t.children[1],new Proxy(this,new ri)}[Symbol.iterator](){return new si(this[ei],this[ii])}get size(){return this[ei].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ei],e=this[ii],i={};for(let n=-1,s=t.length;++n<s;)i[t.get(n)]=ti.visit(e,n);return i}toString(){return"{".concat([...this].map((t=>{let[e,i]=t;return"".concat(B(e),": ").concat(B(i))})).join(", "),"}")}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class si{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),ti.visit(this.vals,t)]})}}class ri{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ei].toArray().map(String)}has(t,e){return t[ei].includes(e)}getOwnPropertyDescriptor(t,e){if(-1!==t[ei].indexOf(e))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const i=t[ei].indexOf(e);if(-1!==i){const n=ti.visit(Reflect.get(t,ii),i);return Reflect.set(t,e,n),n}}set(t,e,i){const n=t[ei].indexOf(e);return-1!==n?(Me.visit(Reflect.get(t,ii),n,i),Reflect.set(t,e,i)):!!Reflect.has(t,e)&&Reflect.set(t,e,i)}}let ai;function oi(t,e,i,n){const{length:s=0}=t;let r="number"!==typeof e?0:e,a="number"!==typeof i?s:i;return r<0&&(r=(r%s+s)%s),a<0&&(a=(a%s+s)%s),a<r&&(ai=r,r=a,a=ai),a>s&&(a=s),n?n(t,r,a):[r,a]}Object.defineProperties(ni.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ei]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ii]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const li=t=>t!==t;function hi(t){if("object"!==typeof t||null===t)return li(t)?li:e=>e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let i=0;const n=t.length;if(n!==e.length)return!1;if(n>0)do{if(t[i]!==e[i])return!1}while(++i<n);return!0}(t,e):t instanceof Map?function(t){let e=-1;const i=[];for(const n of t.values())i[++e]=hi(n);return ci(i)}(t):Array.isArray(t)?function(t){const e=[];for(let i=-1,n=t.length;++i<n;)e[i]=hi(t[i]);return ci(e)}(t):t instanceof qi?function(t){const e=[];for(let i=-1,n=t.length;++i<n;)e[i]=hi(t.get(i));return ci(e)}(t):function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Object.keys(t);if(!e&&0===i.length)return()=>!1;const n=[];for(let s=-1,r=i.length;++s<r;)n[s]=hi(t[i[s]]);return ci(n,i)}(t,!0)}function ci(t,e){return i=>{if(!i||"object"!==typeof i)return!1;switch(i.constructor){case Array:return function(t,e){const i=t.length;if(e.length!==i)return!1;for(let n=-1;++n<i;)if(!t[n](e[n]))return!1;return!0}(t,i);case Map:return di(t,i,i.keys());case ni:case Le:case Object:case void 0:return di(t,i,e||Object.keys(i))}return i instanceof qi&&function(t,e){const i=t.length;if(e.length!==i)return!1;for(let n=-1;++n<i;)if(!t[n](e.get(n)))return!1;return!0}(t,i)}}function di(t,e,i){const n=i[Symbol.iterator](),s=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),r=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0;const o=t.length;let l=r.next(),h=n.next(),c=s.next();for(;a<o&&!h.done&&!c.done&&!l.done&&(h.value===c.value&&t[a](l.value));++a,h=n.next(),c=s.next(),l=r.next());return!!(a===o&&h.done&&c.done&&l.done)||(n.return&&n.return(),s.return&&s.return(),r.return&&r.return(),!1)}class ui{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function pi(t){return t.reduce(((t,e)=>t+e.nullCount),0)}function fi(t){return t.reduce(((t,e,i)=>(t[i+1]=t[i]+e.length,t)),new Uint32Array(t.length+1))}function mi(t,e,i,n){const s=[];for(let r=-1,a=t.length;++r<a;){const a=t[r],o=e[r],{length:l}=a;if(o>=n)break;if(i>=o+l)continue;if(o>=i&&o+l<=n){s.push(a);continue}const h=Math.max(0,i-o),c=Math.min(n-o,l);s.push(a.slice(h,c-h))}return 0===s.length&&s.push(t[0].slice(0,0)),s}function _i(t,e,i,n){let s=0,r=0,a=e.length-1;do{if(s>=a-1)return i<e[a]?n(t,s,i-e[s]):null;r=s+Math.trunc(.5*(a-s)),i<e[r]?a=r:s=r}while(s<a)}function yi(t,e){return t.getValid(e)}function gi(t){function e(e,i,n){return t(e[i],n)}return function(t){return _i(this.data,this._offsets,t,e)}}function bi(t){let e;function i(i,n,s){return t(i[n],s,e)}return function(t,n){const s=this.data;e=n;const r=_i(s,this._offsets,t,i);return e=void 0,r}}function vi(t){let e;function i(i,n,s){let r=s,a=0,o=0;for(let l=n-1,h=i.length;++l<h;){const n=i[l];if(~(a=t(n,e,r)))return o+a;r=0,o+=n.length}return-1}return function(t,n){e=t;const s=this.data,r="number"!==typeof n?i(s,0,0):_i(s,this._offsets,n,i);return e=void 0,r}}function wi(t,e,i,n){return 0!==(i&1<<n)}function xi(t,e,i,n){return(i&1<<n)>>n}function Ti(t,e,i){const n=i.byteLength+7&-8;if(t>0||i.byteLength<n){const s=new Uint8Array(n);return s.set(t%8===0?i.subarray(t>>3):Si(new ki(i,t,e,null,wi)).subarray(0,n)),s}return i}function Si(t){const e=[];let i=0,n=0,s=0;for(const a of t)a&&(s|=1<<n),8===++n&&(e[i++]=s,s=n=0);(0===i||n>0)&&(e[i++]=s);const r=new Uint8Array(e.length+7&-8);return r.set(e),r}class ki{constructor(t,e,i,n,s){this.bytes=t,this.length=i,this.context=n,this.get=s,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Ii(t,e,i){if(i-e<=0)return 0;if(i-e<8){let n=0;for(const s of new ki(t,e,i-e,t,xi))n+=s;return n}const n=i>>3<<3,s=e+(e%8===0?0:8-e%8);return Ii(t,e,s)+Ii(t,n,i)+function(t,e,i){let n=0,s=Math.trunc(e);const r=new DataView(t.buffer,t.byteOffset,t.byteLength),a=void 0===i?t.byteLength:s+i;for(;a-s>=4;)n+=Mi(r.getUint32(s)),s+=4;for(;a-s>=2;)n+=Mi(r.getUint16(s)),s+=2;for(;a-s>=1;)n+=Mi(r.getUint8(s)),s+=1;return n}(t,s>>3,n-s>>3)}function Mi(t){let e=Math.trunc(t);return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}class Ai extends te{}function Di(t,e,i){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:i}=t;if(!i||t.nullCount<=0)return-1;let n=0;for(const s of new ki(i,t.offset+(e||0),t.length,i,wi)){if(!s)return n;++n}return-1}(t,i);const n=ti.getVisitFn(t),s=hi(e);for(let r=(i||0)-1,a=t.length;++r<a;)if(s(n(t,r)))return r;return-1}function Li(t,e,i){const n=ti.getVisitFn(t),s=hi(e);for(let r=(i||0)-1,a=t.length;++r<a;)if(s(n(t,r)))return r;return-1}Ai.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},Ai.prototype.visitBool=Di,Ai.prototype.visitInt=Di,Ai.prototype.visitInt8=Di,Ai.prototype.visitInt16=Di,Ai.prototype.visitInt32=Di,Ai.prototype.visitInt64=Di,Ai.prototype.visitUint8=Di,Ai.prototype.visitUint16=Di,Ai.prototype.visitUint32=Di,Ai.prototype.visitUint64=Di,Ai.prototype.visitFloat=Di,Ai.prototype.visitFloat16=Di,Ai.prototype.visitFloat32=Di,Ai.prototype.visitFloat64=Di,Ai.prototype.visitUtf8=Di,Ai.prototype.visitBinary=Di,Ai.prototype.visitFixedSizeBinary=Di,Ai.prototype.visitDate=Di,Ai.prototype.visitDateDay=Di,Ai.prototype.visitDateMillisecond=Di,Ai.prototype.visitTimestamp=Di,Ai.prototype.visitTimestampSecond=Di,Ai.prototype.visitTimestampMillisecond=Di,Ai.prototype.visitTimestampMicrosecond=Di,Ai.prototype.visitTimestampNanosecond=Di,Ai.prototype.visitTime=Di,Ai.prototype.visitTimeSecond=Di,Ai.prototype.visitTimeMillisecond=Di,Ai.prototype.visitTimeMicrosecond=Di,Ai.prototype.visitTimeNanosecond=Di,Ai.prototype.visitDecimal=Di,Ai.prototype.visitList=Di,Ai.prototype.visitStruct=Di,Ai.prototype.visitUnion=Di,Ai.prototype.visitDenseUnion=Li,Ai.prototype.visitSparseUnion=Li,Ai.prototype.visitDictionary=Di,Ai.prototype.visitInterval=Di,Ai.prototype.visitIntervalDayTime=Di,Ai.prototype.visitIntervalYearMonth=Di,Ai.prototype.visitFixedSizeList=Di,Ai.prototype.visitMap=Di;const Ei=new Ai;class Oi extends te{}function Ni(t){const{type:e}=t;if(0===t.nullCount&&1===t.stride&&(e.typeId===h.Timestamp||e instanceof Nt&&64!==e.bitWidth||e instanceof zt&&64!==e.bitWidth||e instanceof Ct&&e.precision!==s.HALF))return new ui(t.data.length,(e=>{const i=t.data[e];return i.values.subarray(0,i.length)[Symbol.iterator]()}));let i=0;return new ui(t.data.length,(e=>{const n=t.data[e].length,s=t.slice(i,i+n);return i+=n,new Bi(s)}))}class Bi{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Oi.prototype.visitNull=Ni,Oi.prototype.visitBool=Ni,Oi.prototype.visitInt=Ni,Oi.prototype.visitInt8=Ni,Oi.prototype.visitInt16=Ni,Oi.prototype.visitInt32=Ni,Oi.prototype.visitInt64=Ni,Oi.prototype.visitUint8=Ni,Oi.prototype.visitUint16=Ni,Oi.prototype.visitUint32=Ni,Oi.prototype.visitUint64=Ni,Oi.prototype.visitFloat=Ni,Oi.prototype.visitFloat16=Ni,Oi.prototype.visitFloat32=Ni,Oi.prototype.visitFloat64=Ni,Oi.prototype.visitUtf8=Ni,Oi.prototype.visitBinary=Ni,Oi.prototype.visitFixedSizeBinary=Ni,Oi.prototype.visitDate=Ni,Oi.prototype.visitDateDay=Ni,Oi.prototype.visitDateMillisecond=Ni,Oi.prototype.visitTimestamp=Ni,Oi.prototype.visitTimestampSecond=Ni,Oi.prototype.visitTimestampMillisecond=Ni,Oi.prototype.visitTimestampMicrosecond=Ni,Oi.prototype.visitTimestampNanosecond=Ni,Oi.prototype.visitTime=Ni,Oi.prototype.visitTimeSecond=Ni,Oi.prototype.visitTimeMillisecond=Ni,Oi.prototype.visitTimeMicrosecond=Ni,Oi.prototype.visitTimeNanosecond=Ni,Oi.prototype.visitDecimal=Ni,Oi.prototype.visitList=Ni,Oi.prototype.visitStruct=Ni,Oi.prototype.visitUnion=Ni,Oi.prototype.visitDenseUnion=Ni,Oi.prototype.visitSparseUnion=Ni,Oi.prototype.visitDictionary=Ni,Oi.prototype.visitInterval=Ni,Oi.prototype.visitIntervalDayTime=Ni,Oi.prototype.visitIntervalYearMonth=Ni,Oi.prototype.visitFixedSizeList=Ni,Oi.prototype.visitMap=Ni;const Ci=new Oi,Fi=(t,e)=>t+e;class Ri extends te{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return 4*(t.type.unit+1)}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===a.SECOND?4:8}visitInterval(t,e){return 4*(t.type.unit+1)}visitStruct(t,e){return t.children.reduce(((t,i)=>t+Pi.visit(i,e)),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce(((t,i)=>t+Pi.visit(i,e)),0)}visitDictionary(t,e){var i;return t.type.indices.bitWidth/8+((null===(i=t.dictionary)||void 0===i?void 0:i.getByteLength(t.values[e]))||0)}}const Ui=(t,e)=>{let{type:i,children:n,typeIds:s,valueOffsets:r}=t;const a=i.typeIdToChildIndex[s[e]];return 8+Pi.visit(n[a],r[e])},ji=(t,e)=>{let{children:i}=t;return 4+Pi.visitMany(i,i.map((()=>e))).reduce(Fi,0)};Ri.prototype.visitUtf8=(t,e)=>{let{valueOffsets:i}=t;return i[e+1]-i[e]+8},Ri.prototype.visitBinary=(t,e)=>{let{valueOffsets:i}=t;return i[e+1]-i[e]+8},Ri.prototype.visitList=(t,e)=>{let{valueOffsets:i,stride:n,children:s}=t;const r=s[0],{[e*n]:a}=i,{[e*n+1]:o}=i,l=Pi.getVisitFn(r.type),h=r.slice(a,o-a);let c=8;for(let d=-1,u=o-a;++d<u;)c+=l(h,d);return c},Ri.prototype.visitFixedSizeList=(t,e)=>{let{stride:i,children:n}=t;const s=n[0],r=s.slice(e*i,i),a=Pi.getVisitFn(s.type);let o=0;for(let l=-1,h=r.length;++l<h;)o+=a(r,l);return o},Ri.prototype.visitUnion=(t,i)=>t.type.mode===e.Dense?Ui(t,i):ji(t,i),Ri.prototype.visitDenseUnion=Ui,Ri.prototype.visitSparseUnion=ji;const Pi=new Ri;var zi;const Vi={},Hi={};class qi{constructor(t){var e,i,n;const s=t[0]instanceof qi?t.flatMap((t=>t.data)):t;if(0===s.length||s.some((t=>!(t instanceof Yi))))throw new TypeError("Vector constructor expects an Array of Data instances.");const r=null===(e=s[0])||void 0===e?void 0:e.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:t,set:e,indexOf:i,byteLength:n}=Vi[r.typeId],a=s[0];this.isValid=t=>yi(a,t),this.get=e=>t(a,e),this.set=(t,i)=>e(a,t,i),this.indexOf=t=>i(a,t),this.getByteLength=t=>n(a,t),this._offsets=[0,a.length];break}default:Object.setPrototypeOf(this,Hi[r.typeId]),this._offsets=fi(s)}this.data=s,this.type=r,this.stride=Qt(r),this.numChildren=null!==(n=null===(i=r.children)||void 0===i?void 0:i.length)&&void 0!==n?n:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return-1===this._byteLength&&(this._byteLength=this.data.reduce(((t,e)=>t+e.byteLength),0)),this._byteLength}get nullCount(){return-1===this._nullCount&&(this._nullCount=pi(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return"".concat(this.VectorName,"<").concat(this.type[Symbol.toStringTag],">")}get VectorName(){return"".concat(h[this.type.typeId],"Vector")}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return Ci.visit(this)}concat(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new qi(this.data.concat(e.flatMap((t=>t.data)).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new qi(oi(this,t,e,((t,e,i)=>{let{data:n,_offsets:s}=t;return mi(n,s,e,i)})))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:i,stride:n,ArrayType:s}=this;switch(t.typeId){case h.Int:case h.Float:case h.Decimal:case h.Time:case h.Timestamp:switch(e.length){case 0:return new s;case 1:return e[0].values.subarray(0,i*n);default:return e.reduce(((t,e)=>{let{values:i,length:s}=e;return t.array.set(i.subarray(0,s*n),t.offset),t.offset+=s*n,t}),{array:new s(i*n),offset:0}).array}}return[...this]}toString(){return"[".concat([...this].join(","),"]")}getChild(t){var e;return this.getChildAt(null===(e=this.type.children)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.numChildren?new qi(this.data.map((e=>{let{children:i}=e;return i[t]}))):null}get isMemoized(){return!!Et.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(Et.isDictionary(this.type)){const t=new Wi(this.data[0].dictionary),e=this.data.map((e=>{const i=e.clone();return i.dictionary=t,i}));return new qi(e)}return new Wi(this)}unmemoize(){if(Et.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map((e=>{const i=e.clone();return i.dictionary=t,i}));return new qi(e)}return this}}zi=Symbol.toStringTag,qi[zi]=(t=>{t.type=Et.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(h).map((t=>h[t])).filter((t=>"number"===typeof t&&t!==h.NONE));for(const i of e){const e=ti.getVisitFnByTypeId(i),n=Me.getVisitFnByTypeId(i),s=Ei.getVisitFnByTypeId(i),r=Pi.getVisitFnByTypeId(i);Vi[i]={get:e,set:n,indexOf:s,byteLength:r},Hi[i]=Object.create(t,{isValid:{value:gi(yi)},get:{value:gi(ti.getVisitFnByTypeId(i))},set:{value:bi(Me.getVisitFnByTypeId(i))},indexOf:{value:vi(Ei.getVisitFnByTypeId(i))},getByteLength:{value:gi(Pi.getVisitFnByTypeId(i))}})}return"Vector"})(qi.prototype);class Wi extends qi{constructor(t){super(t.data);const e=this.get,i=this.set,n=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(t){const i=s[t];if(void 0!==i)return i;const n=e.call(this,t);return s[t]=n,n}}),Object.defineProperty(this,"set",{value(t,e){i.call(this,t,e),s[t]=e}}),Object.defineProperty(this,"slice",{value:(t,e)=>new Wi(n.call(this,t,e))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new qi(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Yi{constructor(t,e,i,n,s){let r,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6?arguments[6]:void 0;this.type=t,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(n||0,-1)),s instanceof Yi?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Qt(t),s&&((r=s[0])&&(this.valueOffsets=r),(r=s[1])&&(this.values=r),(r=s[2])&&(this.nullBitmap=r),(r=s[3])&&(this.typeIds=r))),this.nullable=0!==this._nullCount&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:i,nullBitmap:n,typeIds:s}=this;return e&&(t+=e.byteLength),i&&(t+=i.byteLength),n&&(t+=n.byteLength),s&&(t+=s.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-Ii(t,this.offset,this.offset+this.length)),e}getValid(t){if(this.nullable&&this.nullCount>0){const e=this.offset+t;return 0!==(this.nullBitmap[e>>3]&1<<e%8)}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:t}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:t,_nullCount:0})}const{nullBitmap:i,offset:n}=this,s=n+t>>3,r=(n+t)%8,a=i[s]>>r&1;return e?0===a&&(i[s]|=1<<r,this._nullCount=this.nullCount+1):1===a&&(i[s]&=~(1<<r),this._nullCount=this.nullCount-1),e}clone(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.type,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.offset,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._nullCount,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.children;return new Yi(t,e,i,n,s,r,this.dictionary)}slice(t,e){const{stride:i,typeId:n,children:s}=this,r=+(0===this._nullCount)-1,a=16===n?i:1,o=this._sliceBuffers(t,e,i,n);return this.clone(this.type,this.offset+t,e,r,o,0===s.length||this.valueOffsets?s:this._sliceChildren(s,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===h.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:i}=this,n=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);n[e>>3]=(1<<e-(-8&e))-1,i>0&&n.set(Ti(this.offset,e,this.nullBitmap),0);const s=this.buffers;return s[c.VALIDITY]=n,this.clone(this.type,0,t,i+(t-e),s)}_sliceBuffers(t,e,i,n){let s;const{buffers:r}=this;return(s=r[c.TYPE])&&(r[c.TYPE]=s.subarray(t,t+e)),(s=r[c.OFFSET])&&(r[c.OFFSET]=s.subarray(t,t+e+1))||(s=r[c.DATA])&&(r[c.DATA]=6===n?s:s.subarray(i*t,i*(t+e))),r}_sliceChildren(t,e,i){return t.map((t=>t.slice(e,i)))}}Yi.prototype.children=Object.freeze([]);class $i extends te{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{type:e,offset:i=0,length:n=0}=t;return new Yi(e,i,n,0)}visitBool(t){const{type:e,offset:i=0}=t,n=J(t.nullBitmap),s=G(e.ArrayType,t.data),{length:r=s.length>>3,nullCount:a=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,r,a,[void 0,s,n])}visitInt(t){const{type:e,offset:i=0}=t,n=J(t.nullBitmap),s=G(e.ArrayType,t.data),{length:r=s.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,r,a,[void 0,s,n])}visitFloat(t){const{type:e,offset:i=0}=t,n=J(t.nullBitmap),s=G(e.ArrayType,t.data),{length:r=s.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,r,a,[void 0,s,n])}visitUtf8(t){const{type:e,offset:i=0}=t,n=J(t.data),s=J(t.nullBitmap),r=Z(t.valueOffsets),{length:a=r.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,a,o,[r,n,s])}visitBinary(t){const{type:e,offset:i=0}=t,n=J(t.data),s=J(t.nullBitmap),r=Z(t.valueOffsets),{length:a=r.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,a,o,[r,n,s])}visitFixedSizeBinary(t){const{type:e,offset:i=0}=t,n=J(t.nullBitmap),s=G(e.ArrayType,t.data),{length:r=s.length/Qt(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,r,a,[void 0,s,n])}visitDate(t){const{type:e,offset:i=0}=t,n=J(t.nullBitmap),s=G(e.ArrayType,t.data),{length:r=s.length/Qt(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,r,a,[void 0,s,n])}visitTimestamp(t){const{type:e,offset:i=0}=t,n=J(t.nullBitmap),s=G(e.ArrayType,t.data),{length:r=s.length/Qt(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,r,a,[void 0,s,n])}visitTime(t){const{type:e,offset:i=0}=t,n=J(t.nullBitmap),s=G(e.ArrayType,t.data),{length:r=s.length/Qt(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,r,a,[void 0,s,n])}visitDecimal(t){const{type:e,offset:i=0}=t,n=J(t.nullBitmap),s=G(e.ArrayType,t.data),{length:r=s.length/Qt(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,r,a,[void 0,s,n])}visitList(t){const{type:e,offset:i=0,child:n}=t,s=J(t.nullBitmap),r=Z(t.valueOffsets),{length:a=r.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,a,o,[r,void 0,s],[n])}visitStruct(t){const{type:e,offset:i=0,children:n=[]}=t,s=J(t.nullBitmap),{length:r=n.reduce(((t,e)=>{let{length:i}=e;return Math.max(t,i)}),0),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,r,a,[void 0,void 0,s],n)}visitUnion(t){const{type:e,offset:i=0,children:n=[]}=t,s=J(t.nullBitmap),r=G(e.ArrayType,t.typeIds),{length:a=r.length,nullCount:o=(t.nullBitmap?-1:0)}=t;if(Et.isSparseUnion(e))return new Yi(e,i,a,o,[void 0,void 0,s,r],n);const l=Z(t.valueOffsets);return new Yi(e,i,a,o,[l,void 0,s,r],n)}visitDictionary(t){const{type:e,offset:i=0}=t,n=J(t.nullBitmap),s=G(e.indices.ArrayType,t.data),{dictionary:r=new qi([(new $i).visit({type:e.dictionary})])}=t,{length:a=s.length,nullCount:o=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,a,o,[void 0,s,n],[],r)}visitInterval(t){const{type:e,offset:i=0}=t,n=J(t.nullBitmap),s=G(e.ArrayType,t.data),{length:r=s.length/Qt(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,r,a,[void 0,s,n])}visitFixedSizeList(t){const{type:e,offset:i=0,child:n=(new $i).visit({type:e.valueType})}=t,s=J(t.nullBitmap),{length:r=n.length/Qt(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,r,a,[void 0,void 0,s],[n])}visitMap(t){const{type:e,offset:i=0,child:n=(new $i).visit({type:e.childType})}=t,s=J(t.nullBitmap),r=Z(t.valueOffsets),{length:a=r.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new Yi(e,i,a,o,[r,void 0,s],[n])}}function Gi(t){return(new $i).visit(t)}class Zi{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;this.fields=t||[],this.metadata=e||new Map,i||(i=Xi(t)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((t=>t.name))}toString(){return"Schema<{ ".concat(this.fields.map(((t,e)=>"".concat(e,": ").concat(t))).join(", ")," }>")}select(t){const e=new Set(t),i=this.fields.filter((t=>e.has(t.name)));return new Zi(i,this.metadata)}selectAt(t){const e=t.map((t=>this.fields[t])).filter(Boolean);return new Zi(e,this.metadata)}assign(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const n=e[0]instanceof Zi?e[0]:Array.isArray(e[0])?new Zi(e[0]):new Zi(e),s=[...this.fields],r=Ki(Ki(new Map,this.metadata),n.metadata),a=n.fields.filter((t=>{const e=s.findIndex((e=>e.name===t.name));return!~e||(s[e]=t.clone({metadata:Ki(Ki(new Map,s[e].metadata),t.metadata)}))&&!1})),o=Xi(a,new Map);return new Zi([...s,...a],r,new Map([...this.dictionaries,...o]))}}Zi.prototype.fields=null,Zi.prototype.metadata=null,Zi.prototype.dictionaries=null;class Ji{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;this.name=t,this.type=e,this.nullable=i,this.metadata=n||new Map}static new(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];let[n,s,r,a]=e;return e[0]&&"object"===typeof e[0]&&(({name:n}=e[0]),void 0===s&&(s=e[0].type),void 0===r&&(r=e[0].nullable),void 0===a&&(a=e[0].metadata)),new Ji("".concat(n),s,r,a)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return"".concat(this.name,": ").concat(this.type)}clone(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];let[n,s,r,a]=e;return e[0]&&"object"===typeof e[0]?({name:n=this.name,type:s=this.type,nullable:r=this.nullable,metadata:a=this.metadata}=e[0]):[n=this.name,s=this.type,r=this.nullable,a=this.metadata]=e,Ji.new(n,s,r,a)}}function Ki(t,e){return new Map([...t||new Map,...e||new Map])}function Xi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;for(let i=-1,n=t.length;++i<n;){const n=t[i].type;if(Et.isDictionary(n))if(e.has(n.id)){if(e.get(n.id)!==n.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(n.id,n.dictionary);n.children&&n.children.length>0&&Xi(n.children,e)}return e}Ji.prototype.type=null,Ji.prototype.name=null,Ji.prototype.nullable=null,Ji.prototype.metadata=null;class Qi extends te{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,i)=>this.compareFields(t,e[i])))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function tn(t,e){return e instanceof t.constructor}function en(t,e){return t===e||tn(t,e)}function nn(t,e){return t===e||tn(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function sn(t,e){return t===e||tn(t,e)&&t.precision===e.precision}function rn(t,e){return t===e||tn(t,e)&&t.unit===e.unit}function an(t,e){return t===e||tn(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function on(t,e){return t===e||tn(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function ln(t,e){return t===e||tn(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,i)=>t===e.typeIds[i]))&&cn.compareManyFields(t.children,e.children)}function hn(t,e){return t===e||tn(t,e)&&t.unit===e.unit}Qi.prototype.visitNull=en,Qi.prototype.visitBool=en,Qi.prototype.visitInt=nn,Qi.prototype.visitInt8=nn,Qi.prototype.visitInt16=nn,Qi.prototype.visitInt32=nn,Qi.prototype.visitInt64=nn,Qi.prototype.visitUint8=nn,Qi.prototype.visitUint16=nn,Qi.prototype.visitUint32=nn,Qi.prototype.visitUint64=nn,Qi.prototype.visitFloat=sn,Qi.prototype.visitFloat16=sn,Qi.prototype.visitFloat32=sn,Qi.prototype.visitFloat64=sn,Qi.prototype.visitUtf8=en,Qi.prototype.visitBinary=en,Qi.prototype.visitFixedSizeBinary=function(t,e){return t===e||tn(t,e)&&t.byteWidth===e.byteWidth},Qi.prototype.visitDate=rn,Qi.prototype.visitDateDay=rn,Qi.prototype.visitDateMillisecond=rn,Qi.prototype.visitTimestamp=an,Qi.prototype.visitTimestampSecond=an,Qi.prototype.visitTimestampMillisecond=an,Qi.prototype.visitTimestampMicrosecond=an,Qi.prototype.visitTimestampNanosecond=an,Qi.prototype.visitTime=on,Qi.prototype.visitTimeSecond=on,Qi.prototype.visitTimeMillisecond=on,Qi.prototype.visitTimeMicrosecond=on,Qi.prototype.visitTimeNanosecond=on,Qi.prototype.visitDecimal=en,Qi.prototype.visitList=function(t,e){return t===e||tn(t,e)&&t.children.length===e.children.length&&cn.compareManyFields(t.children,e.children)},Qi.prototype.visitStruct=function(t,e){return t===e||tn(t,e)&&t.children.length===e.children.length&&cn.compareManyFields(t.children,e.children)},Qi.prototype.visitUnion=ln,Qi.prototype.visitDenseUnion=ln,Qi.prototype.visitSparseUnion=ln,Qi.prototype.visitDictionary=function(t,e){return t===e||tn(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&cn.visit(t.indices,e.indices)&&cn.visit(t.dictionary,e.dictionary)},Qi.prototype.visitInterval=hn,Qi.prototype.visitIntervalDayTime=hn,Qi.prototype.visitIntervalYearMonth=hn,Qi.prototype.visitFixedSizeList=function(t,e){return t===e||tn(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&cn.compareManyFields(t.children,e.children)},Qi.prototype.visitMap=function(t,e){return t===e||tn(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&cn.compareManyFields(t.children,e.children)};const cn=new Qi;function dn(t,e){return cn.compareSchemas(t,e)}var un,pn;class fn{constructor(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];switch(e.length){case 2:if([this.schema]=e,!(this.schema instanceof Zi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Gi({nullCount:0,type:new Wt(this.schema.fields),children:this.schema.fields.map((t=>Gi({type:t.type,nullCount:0})))})]=e,!(this.data instanceof Yi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=mn(this.schema,this.data.children);break;case 1:{const[t]=e,{fields:i,children:n,length:s}=Object.keys(t).reduce(((e,i,n)=>(e.children[n]=t[i],e.length=Math.max(e.length,t[i].length),e.fields[n]=Ji.new({name:i,type:t[i].type,nullable:!0}),e)),{length:0,fields:new Array,children:new Array}),r=new Zi(i),a=Gi({type:new Wt(i),length:s,children:n,nullCount:0});[this.schema,this.data]=mn(r,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=_n(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return ti.visit(this.data,t)}set(t,e){return Me.visit(this.data,t,e)}indexOf(t,e){return Ei.visit(this.data,t,e)}getByteLength(t){return Pi.visit(this.data,t)}[Symbol.iterator](){return Ci.visit(new qi([this.data]))}toArray(){return[...this]}concat(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new vn(this.schema,[this,...e])}slice(t,e){const[i]=new qi([this.data]).slice(t,e).data;return new fn(this.schema,i)}getChild(t){var e;return this.getChildAt(null===(e=this.schema.fields)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new qi([this.data.children[t]]):null}setChild(t,e){var i;return this.setChildAt(null===(i=this.schema.fields)||void 0===i?void 0:i.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let i=this.schema,n=this.data;if(t>-1&&t<this.numCols){e||(e=new qi([Gi({type:new Ot,length:this.numRows})]));const s=i.fields.slice(),r=n.children.slice(),a=s[t].clone({type:e.type});[s[t],r[t]]=[a,e.data[0]],i=new Zi(s,new Map(this.schema.metadata)),n=Gi({type:new Wt(s),children:r})}return new fn(i,n)}select(t){const e=this.schema.select(t),i=new Wt(e.fields),n=[];for(const s of t){const t=this.schema.fields.findIndex((t=>t.name===s));~t&&(n[t]=this.data.children[t])}return new fn(e,Gi({type:i,length:this.numRows,children:n}))}selectAt(t){const e=this.schema.selectAt(t),i=t.map((t=>this.data.children[t])).filter(Boolean),n=Gi({type:new Wt(e.fields),length:this.numRows,children:i});return new fn(e,n)}}function mn(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.reduce(((t,e)=>Math.max(t,e.length)),0);var n;const s=[...t.fields],r=[...e],a=(i+63&-64)>>3;for(const[o,l]of t.fields.entries()){const t=e[o];t&&t.length===i||(s[o]=l.clone({nullable:!0}),r[o]=null!==(n=null===t||void 0===t?void 0:t._changeLengthAndBackfillNullBitmap(i))&&void 0!==n?n:Gi({type:l.type,length:i,nullCount:i,nullBitmap:new Uint8Array(a)}))}return[t.assign(s),Gi({type:new Wt(s),length:i,children:r})]}function _n(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;for(let n=-1,s=t.length;++n<s;){const s=t[n].type,r=e[n];if(Et.isDictionary(s))if(i.has(s.id)){if(i.get(s.id)!==r.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else r.dictionary&&i.set(s.id,r.dictionary);s.children&&s.children.length>0&&_n(s.children,r.children,i)}return i}un=Symbol.toStringTag,fn[un]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(fn.prototype);class yn extends fn{constructor(t){const e=t.fields.map((t=>Gi({type:t.type})));super(t,Gi({type:new Wt(t.fields),nullCount:0,children:e}))}}function gn(t,e){return function(t,e){const i=[...t.fields],n=[],s={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let r=0,a=0,o=-1;const l=e.length;let h,c=[];for(;s.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<l;)c[o]=h=e[o].shift(),a=Math.min(a,h?h.length:a);Number.isFinite(a)&&(c=bn(i,a,c,e,s),a>0&&(n[r++]=Gi({type:new Wt(i),length:a,nullCount:0,children:c.slice()})))}return[t=t.assign(i),n.map((e=>new fn(t,e)))]}(t,e.map((t=>t.data.concat())))}function bn(t,e,i,n,s){var r;const a=(e+63&-64)>>3;for(let o=-1,l=n.length;++o<l;){const l=i[o],h=null===l||void 0===l?void 0:l.length;if(h>=e)h===e?i[o]=l:(i[o]=l.slice(0,e),s.numBatches=Math.max(s.numBatches,n[o].unshift(l.slice(e,h-e))));else{const n=t[o];t[o]=n.clone({nullable:!0}),i[o]=null!==(r=null===l||void 0===l?void 0:l._changeLengthAndBackfillNullBitmap(e))&&void 0!==r?r:Gi({type:n.type,length:e,nullCount:e,nullBitmap:new Uint8Array(a)})}}return i}class vn{constructor(){for(var t,e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];if(0===n.length)return this.batches=[],this.schema=new Zi([]),this._offsets=[0],this;let r,a;n[0]instanceof Zi&&(r=n.shift()),n[n.length-1]instanceof Uint32Array&&(a=n.pop());const o=t=>{if(t){if(t instanceof fn)return[t];if(t instanceof vn)return t.batches;if(t instanceof Yi){if(t.type instanceof Wt)return[new fn(new Zi(t.type.children),t)]}else{if(Array.isArray(t))return t.flatMap((t=>o(t)));if("function"===typeof t[Symbol.iterator])return[...t].flatMap((t=>o(t)));if("object"===typeof t){const e=Object.keys(t),i=e.map((e=>new qi([t[e]]))),n=new Zi(e.map(((t,e)=>new Ji(String(t),i[e].type)))),[,s]=gn(n,i);return 0===s.length?[new fn(t)]:s}}}return[]},l=n.flatMap((t=>o(t)));if(r=null!==(e=null!==r&&void 0!==r?r:null===(t=l[0])||void 0===t?void 0:t.schema)&&void 0!==e?e:new Zi([]),!(r instanceof Zi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const h of l){if(!(h instanceof fn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!dn(r,h.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=l,this._offsets=null!==a&&void 0!==a?a:fi(this.data)}get data(){return this.batches.map((t=>{let{data:e}=t;return e}))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((t,e)=>t+e.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=pi(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Ci.visit(new qi(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return"[\n  ".concat(this.toArray().join(",\n  "),"\n]")}concat(){const t=this.schema;for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];const s=this.data.concat(i.flatMap((t=>{let{data:e}=t;return e})));return new vn(t,s.map((e=>new fn(t,e))))}slice(t,e){const i=this.schema;[t,e]=oi({length:this.numRows},t,e);const n=mi(this.data,this._offsets,t,e);return new vn(i,n.map((t=>new fn(i,t))))}getChild(t){return this.getChildAt(this.schema.fields.findIndex((e=>e.name===t)))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map((e=>e.children[t]));if(0===e.length){const{type:i}=this.schema.fields[t],n=Gi({type:i,length:0,nullCount:0});e.push(n._changeLengthAndBackfillNullBitmap(this.numRows))}return new qi(e)}return null}setChild(t,e){var i;return this.setChildAt(null===(i=this.schema.fields)||void 0===i?void 0:i.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let i=this.schema,n=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new qi([Gi({type:new Ot,length:this.numRows})]));const s=i.fields.slice(),r=s[t].clone({type:e.type}),a=this.schema.fields.map(((t,e)=>this.getChildAt(e)));[s[t],a[t]]=[r,e],[i,n]=gn(i,a)}return new vn(i,n)}select(t){const e=this.schema.fields.reduce(((t,e,i)=>t.set(e.name,i)),new Map);return this.selectAt(t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(t){const e=this.schema.selectAt(t),i=this.batches.map((e=>e.selectAt(t)));return new vn(e,i)}assign(t){const e=this.schema.fields,[i,n]=t.schema.fields.reduce(((t,i,n)=>{const[s,r]=t,a=e.findIndex((t=>t.name===i.name));return~a?r[a]=n:s.push(n),t}),[[],[]]),s=this.schema.assign(t.schema),r=[...e.map(((t,e)=>[e,n[e]])).map((e=>{let[i,n]=e;return void 0===n?this.getChildAt(i):t.getChildAt(n)})),...i.map((e=>t.getChildAt(e)))].filter(Boolean);return new vn(...gn(s,r))}}pn=Symbol.toStringTag,vn[pn]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=gi(yi),t.get=gi(ti.getVisitFn(h.Struct)),t.set=bi(Me.getVisitFn(h.Struct)),t.indexOf=vi(Ei.getVisitFn(h.Struct)),t.getByteLength=gi(Pi.getVisitFn(h.Struct)),"Table"))(vn.prototype);class wn{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,i,n){return t.prep(8,24),t.writeInt64(n),t.pad(4),t.writeInt32(i),t.writeInt64(e),t.offset()}}const xn=new Int32Array(2),Tn=new Float32Array(xn.buffer),Sn=new Float64Array(xn.buffer),kn=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];class In{constructor(t,e){this.low=0|t,this.high=0|e}static create(t,e){return 0==t&&0==e?In.ZERO:new In(t,e)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(t){return this.low==t.low&&this.high==t.high}}var Mn,An,Dn,Ln,En;In.ZERO=new In(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(Mn||(Mn={}));class On{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new On(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new In(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new In(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return xn[0]=this.readInt32(t),Tn[0]}readFloat64(t){return xn[kn?0:1]=this.readInt32(t),xn[kn?1:0]=this.readInt32(t+4),Sn[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){Tn[0]=e,this.writeInt32(t,xn[0])}writeFloat64(t,e){Sn[0]=e,this.writeInt32(t,xn[kn?0:1]),this.writeInt32(t+4,xn[kn?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const i=t-this.readInt32(t);return e<this.readInt16(i)?this.readInt16(i+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const i=this.readInt32(t);let n="",s=0;if(t+=4,e===Mn.UTF8_BYTES)return this.bytes_.subarray(t,t+i);for(;s<i;){let e;const i=this.readUint8(t+s++);if(i<192)e=i;else{const n=this.readUint8(t+s++);if(i<224)e=(31&i)<<6|63&n;else{const r=this.readUint8(t+s++);if(i<240)e=(15&i)<<12|(63&n)<<6|63&r;else{e=(7&i)<<18|(63&n)<<12|(63&r)<<6|63&this.readUint8(t+s++)}}}e<65536?n+=String.fromCharCode(e):(e-=65536,n+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return n}__union_with_string(t,e){return"string"===typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createLong(t,e){return In.create(t,e)}createScalarList(t,e){const i=[];for(let n=0;n<e;++n)null!==t(n)&&i.push(t(n));return i}createObjList(t,e){const i=[];for(let n=0;n<e;++n){const e=t(n);null!==e&&i.push(e.unpack())}return i}}class Nn{constructor(t){let e;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,e=t||1024,this.bb=On.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,e){t>this.minalign&&(this.minalign=t);const i=1+~(this.bb.capacity()-this.space+e)&t-1;for(;this.space<i+t+e;){const t=this.bb.capacity();this.bb=Nn.growByteBuffer(this.bb),this.space+=this.bb.capacity()-t}this.pad(i)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,i){(this.force_defaults||e!=i)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,i){(this.force_defaults||e!=i)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,i){(this.force_defaults||e!=i)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,i){!this.force_defaults&&e.equals(i)||(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,i){(this.force_defaults||e!=i)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,i){(this.force_defaults||e!=i)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,i){(this.force_defaults||e!=i)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,i){e!=i&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){null!==this.vtable&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=e<<1,n=On.allocate(i);return n.setPosition(i-e),n.bytes().set(t.bytes(),i-e),n}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&0==this.vtable[e];e--);const i=e+1;for(;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);const n=2*(i+2);this.addInt16(n);let s=0;const r=this.space;t:for(e=0;e<this.vtables.length;e++){const t=this.bb.capacity()-this.vtables[e];if(n==this.bb.readInt16(t)){for(let e=2;e<n;e+=2)if(this.bb.readInt16(r+e)!=this.bb.readInt16(t+e))continue t;s=this.vtables[e];break}}return s?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,s-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,i){const n=i?4:0;if(e){const t=e;if(this.prep(this.minalign,8+n),4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=3;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,4+n),this.addOffset(t),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const i=this.bb.capacity()-t,n=i-this.bb.readInt32(i);if(!(0!=this.bb.readInt16(n+e)))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,i){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(i,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let i=0;for(;i<t.length;){let n;const s=t.charCodeAt(i++);if(s<55296||s>=56320)n=s;else{n=(s<<10)+t.charCodeAt(i++)+-56613888}n<128?e.push(n):(n<2048?e.push(n>>6&31|192):(n<65536?e.push(n>>12&15|224):e.push(n>>18&7|240,n>>12&63|128),e.push(n>>6&63|128)),e.push(63&n|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let i=0,n=this.space,s=this.bb.bytes();i<e.length;i++)s[n++]=e[i];return this.endVector()}createLong(t,e){return In.create(t,e)}createObjectOffset(t){return null===t?0:"string"===typeof t?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let i=0;i<t.length;++i){const n=t[i];if(null===n)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(n))}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}}class Bn{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new Bn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+4),(e||new Bn).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,i){return Bn.startKeyValue(t),Bn.addKey(t,e),Bn.addValue(t,i),Bn.endKeyValue(t)}}!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(An||(An={})),function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(Dn||(Dn={})),function(t){t[t.DenseArray=0]="DenseArray"}(Ln||(Ln={}));class Cn{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new Cn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+4),(e||new Cn).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,i){return Cn.startInt(t),Cn.addBitWidth(t,e),Cn.addIsSigned(t,i),Cn.endInt(t)}}class Fn{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new Fn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+4),(e||new Fn).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Cn).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Ln.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,Ln.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}(En||(En={}));class Rn{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new Rn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+4),(e||new Rn).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):En.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new Fn).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(t,e){const i=this.bb.__offset(this.bb_pos,14);return i?(e||new Rn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*t),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const i=this.bb.__offset(this.bb_pos,16);return i?(e||new Bn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,En.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}}class Un{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new Un).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+4),(e||new Un).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Dn.Little}fields(t,e){const i=this.bb.__offset(this.bb_pos,6);return i?(e||new Rn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*t),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const i=this.bb.__offset(this.bb_pos,8);return i?(e||new Bn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,Dn.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let i=e.length-1;i>=0;i--)t.addInt64(e[i]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(t,e,i,n,s){return Un.startSchema(t),Un.addEndianness(t,e),Un.addFields(t,i),Un.addCustomMetadata(t,n),Un.addFeatures(t,s),Un.endSchema(t)}}class jn{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new jn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+4),(e||new jn).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):An.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Un).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const i=this.bb.__offset(this.bb_pos,8);return i?(e||new wn).__init(this.bb.__vector(this.bb_pos+i)+24*t,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const i=this.bb.__offset(this.bb_pos,10);return i?(e||new wn).__init(this.bb.__vector(this.bb_pos+i)+24*t,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const i=this.bb.__offset(this.bb_pos,12);return i?(e||new Bn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,An.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}var Pn=In,zn=Nn,Vn=On;class Hn{constructor(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.V4,n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.schema=e,this.version=i,n&&(this._recordBatches=n),s&&(this._dictionaryBatches=s)}static decode(t){t=new Vn(J(t));const e=jn.getRootAsFooter(t),i=Zi.decode(e.schema());return new qn(i,e)}static encode(e){const i=new zn,n=Zi.encode(i,e.schema);jn.startRecordBatchesVector(i,e.numRecordBatches);for(const t of[...e.recordBatches()].slice().reverse())Wn.encode(i,t);const s=i.endVector();jn.startDictionariesVector(i,e.numDictionaries);for(const t of[...e.dictionaryBatches()].slice().reverse())Wn.encode(i,t);const r=i.endVector();return jn.startFooter(i),jn.addSchema(i,n),jn.addVersion(i,t.V4),jn.addRecordBatches(i,s),jn.addDictionaries(i,r),jn.finishFooterBuffer(i,jn.endFooter(i)),i.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,i=this.numRecordBatches;++e<i;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,i=this.numDictionaries;++e<i;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class qn extends Hn{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return Wn.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return Wn.decode(e)}return null}}class Wn{constructor(t,e,i){this.metaDataLength=t,this.offset="number"===typeof i?i:i.low,this.bodyLength="number"===typeof e?e:e.low}static decode(t){return new Wn(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:i}=e,n=new Pn(e.offset,0),s=new Pn(e.bodyLength,0);return wn.createBlock(t,n,i,s)}}const Yn={fromIterable:t=>$n(function*(t){let e,i,n,s,r=!1,a=[],o=0;function l(){return"peek"===n?$(a,s)[0]:([i,a,o]=$(a,s),i)}({cmd:n,size:s}=yield null);const h=(c=t,X(Uint8Array,c))[Symbol.iterator]();var c;try{do{if(({done:e,value:i}=Number.isNaN(s-o)?h.next():h.next(s-o)),!e&&i.byteLength>0&&(a.push(i),o+=i.byteLength),e||s<=o)do{({cmd:n,size:s}=yield l())}while(s<o)}while(!e)}catch(d){(r=!0)&&"function"===typeof h.throw&&h.throw(d)}finally{!1===r&&"function"===typeof h.return&&h.return(null)}return null}(t)),fromAsyncIterable:t=>$n(function(t){return U(this,arguments,(function*(){let e,i,n,s,r=!1,a=[],o=0;function l(){return"peek"===n?$(a,s)[0]:([i,a,o]=$(a,s),i)}({cmd:n,size:s}=yield yield R(null));const h=(c=t,Q(Uint8Array,c))[Symbol.asyncIterator]();var c;try{do{if(({done:e,value:i}=Number.isNaN(s-o)?yield R(h.next()):yield R(h.next(s-o))),!e&&i.byteLength>0&&(a.push(i),o+=i.byteLength),e||s<=o)do{({cmd:n,size:s}=yield yield R(l()))}while(s<o)}while(!e)}catch(d){(r=!0)&&"function"===typeof h.throw&&(yield R(h.throw(d)))}finally{!1===r&&"function"===typeof h.return&&(yield R(h.return(new Uint8Array(0))))}return yield R(null)}))}(t)),fromDOMStream:t=>$n(function(t){return U(this,arguments,(function*(){let e,i,n,s=!1,r=!1,a=[],o=0;function l(){return"peek"===i?$(a,n)[0]:([e,a,o]=$(a,n),e)}({cmd:i,size:n}=yield yield R(null));const h=new Gn(t);try{do{if(({done:s,value:e}=Number.isNaN(n-o)?yield R(h.read()):yield R(h.read(n-o))),!s&&e.byteLength>0&&(a.push(J(e)),o+=e.byteLength),s||n<=o)do{({cmd:i,size:n}=yield yield R(l()))}while(n<o)}while(!s)}catch(c){(r=!0)&&(yield R(h.cancel(c)))}finally{!1===r?yield R(h.cancel()):t.locked&&h.releaseLock()}return yield R(null)}))}(t)),fromNodeStream:t=>$n(function(t){return U(this,arguments,(function*(){const e=[];let i,n,s,r="error",a=!1,o=null,l=0,h=[];function c(){return"peek"===i?$(h,n)[0]:([s,h,l]=$(h,n),s)}if(({cmd:i,size:n}=yield yield R(null)),t.isTTY)return yield yield R(new Uint8Array(0)),yield R(null);try{e[0]=Zn(t,"end"),e[1]=Zn(t,"error");do{if(e[2]=Zn(t,"readable"),[r,o]=yield R(Promise.race(e.map((t=>t[2])))),"error"===r)break;if((a="end"===r)||(Number.isFinite(n-l)?(s=J(t.read(n-l)),s.byteLength<n-l&&(s=J(t.read()))):s=J(t.read()),s.byteLength>0&&(h.push(s),l+=s.byteLength)),a||n<=l)do{({cmd:i,size:n}=yield yield R(c()))}while(n<l)}while(!a)}finally{yield R(d(e,"error"===r?o:null))}return yield R(null);function d(e,i){return s=h=null,new Promise(((n,s)=>{for(const[i,a]of e)t.off(i,a);try{const e=t.destroy;e&&e.call(t,i),i=void 0}catch(r){i=r||i}finally{null!=i?s(i):n()}}))}}))}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},$n=t=>(t.next(),t);class Gn{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return C(this,void 0,void 0,(function*(){const{reader:e,source:i}=this;e&&(yield e.cancel(t).catch((()=>{}))),i&&i.locked&&this.releaseLock()}))}read(t){return C(this,void 0,void 0,(function*(){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=J(e)),e}))}}const Zn=(t,e)=>{const i=t=>n([e,t]);let n;return[e,i,new Promise((s=>(n=s)&&t.once(e,i)))]};const Jn=Object.freeze({done:!0,value:void 0});class Kn{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class Xn{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Qn extends Xn{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}cancel(t){return C(this,void 0,void 0,(function*(){yield this.return(t)}))}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Jn);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Yn.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Yn.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return C(this,void 0,void 0,(function*(){return yield this.abort(t),Jn}))}return(t){return C(this,void 0,void 0,(function*(){return yield this.close(),Jn}))}read(t){return C(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return C(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(Jn)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class ts extends Qn{write(t){if((t=J(t)).byteLength>0)return super.write(t)}toString(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?V(this.toUint8Array(!0)):this.toUint8Array(!1).then(V)}toUint8Array(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?$(this._values)[0]:(()=>C(this,void 0,void 0,(function*(){var t,e;const i=[];let n=0;try{for(var s,r=P(this);!(s=yield r.next()).done;){const t=s.value;i.push(t),n+=t.byteLength}}catch(a){t={error:a}}finally{try{s&&!s.done&&(e=r.return)&&(yield e.call(r))}finally{if(t)throw t.error}}return $(i,n)[0]})))()}}class es{constructor(t){t&&(this.source=new ns(Yn.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class is{constructor(t){t instanceof is?this.source=t.source:t instanceof ts?this.source=new ss(Yn.fromAsyncIterable(t)):O(t)?this.source=new ss(Yn.fromNodeStream(t)):E(t)?this.source=new ss(Yn.fromDOMStream(t)):D(t)?this.source=new ss(Yn.fromDOMStream(t.body)):T(t)?this.source=new ss(Yn.fromIterable(t)):(x(t)||S(t))&&(this.source=new ss(Yn.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class ns{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Jn)}return(t){return Object.create(this.source.return&&this.source.return(t)||Jn)}}class ss{constructor(t){this.source=t,this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}cancel(t){return C(this,void 0,void 0,(function*(){yield this.return(t)}))}get closed(){return this._closedPromise}read(t){return C(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return C(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return C(this,void 0,void 0,(function*(){return yield this.source.next({cmd:e,size:t})}))}throw(t){return C(this,void 0,void 0,(function*(){const e=this.source.throw&&(yield this.source.throw(t))||Jn;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}return(t){return C(this,void 0,void 0,(function*(){const e=this.source.return&&(yield this.source.return(t))||Jn;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}}class rs extends es{constructor(t,e){super(),this.position=0,this.buffer=J(t),this.size="undefined"===typeof e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:i}=this.readAt(t,4);return new DataView(e,i).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:i,position:n}=this;return e&&n<i?("number"!==typeof t&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(i,n+Math.min(i-n,t)),e.subarray(n,this.position)):null}readAt(t,e){const i=this.buffer,n=Math.min(this.size,t+e);return i?i.subarray(t,n):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class as extends is{constructor(t,e){super(),this.position=0,this._handle=t,"number"===typeof e?this.size=e:this._pending=(()=>C(this,void 0,void 0,(function*(){this.size=(yield t.stat()).size,delete this._pending})))()}readInt32(t){return C(this,void 0,void 0,(function*(){const{buffer:e,byteOffset:i}=yield this.readAt(t,4);return new DataView(e,i).getInt32(0,!0)}))}seek(t){return C(this,void 0,void 0,(function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size}))}read(t){return C(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:e,size:i,position:n}=this;if(e&&n<i){"number"!==typeof t&&(t=Number.POSITIVE_INFINITY);let s=n,r=0,a=0;const o=Math.min(i,s+Math.min(i-s,t)),l=new Uint8Array(Math.max(0,(this.position=o)-s));for(;(s+=a)<o&&(r+=a)<l.byteLength;)({bytesRead:a}=yield e.read(l,r,l.byteLength-r,s));return l}return null}))}readAt(t,e){return C(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:i,size:n}=this;if(i&&t+e<n){const s=Math.min(n,t+e),r=new Uint8Array(s-t);return(yield i.read(r,0,e,t)).buffer}return new Uint8Array(e)}))}close(){return C(this,void 0,void 0,(function*(){const t=this._handle;this._handle=null,t&&(yield t.close())}))}throw(t){return C(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}return(t){return C(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}}function os(t){return t<0&&(t=4294967295+t+1),"0x".concat(t.toString(16))}const ls=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class hs{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),i=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let n=e[3]*i[3];this.buffer[0]=65535&n;let s=n>>>16;return n=e[2]*i[3],s+=n,n=e[3]*i[2]>>>0,s+=n,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<n?65536:0,this.buffer[1]+=s>>>16,this.buffer[1]+=e[1]*i[3]+e[2]*i[2]+e[3]*i[1],this.buffer[1]+=e[0]*i[3]+e[1]*i[2]+e[2]*i[1]+e[3]*i[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return"".concat(os(this.buffer[1])," ").concat(os(this.buffer[0]))}}class cs extends hs{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return cs.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return cs.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const i=t.length,n=new cs(e);for(let s=0;s<i;){const e=8<i-s?8:i-s,r=new cs(new Uint32Array([Number.parseInt(t.slice(s,s+e),10),0])),a=new cs(new Uint32Array([ls[e],0]));n.times(a),n.plus(r),s+=e}return n}static convertArray(t){const e=new Uint32Array(2*t.length);for(let i=-1,n=t.length;++i<n;)cs.from(t[i],new Uint32Array(e.buffer,e.byteOffset+2*i*4,2));return e}static multiply(t,e){return new cs(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new cs(new Uint32Array(t.buffer)).plus(e)}}class ds extends hs{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]|0,i=t.buffer[1]|0;return e<i||e===i&&this.buffer[0]<t.buffer[0]}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return ds.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return ds.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const i=t.startsWith("-"),n=t.length,s=new ds(e);for(let r=i?1:0;r<n;){const e=8<n-r?8:n-r,i=new ds(new Uint32Array([Number.parseInt(t.slice(r,r+e),10),0])),a=new ds(new Uint32Array([ls[e],0]));s.times(a),s.plus(i),r+=e}return i?s.negate():s}static convertArray(t){const e=new Uint32Array(2*t.length);for(let i=-1,n=t.length;++i<n;)ds.from(t[i],new Uint32Array(e.buffer,e.byteOffset+2*i*4,2));return e}static multiply(t,e){return new ds(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new ds(new Uint32Array(t.buffer)).plus(e)}}class us{constructor(t){this.buffer=t}high(){return new ds(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ds(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new cs(new Uint32Array([this.buffer[3],0])),i=new cs(new Uint32Array([this.buffer[2],0])),n=new cs(new Uint32Array([this.buffer[1],0])),s=new cs(new Uint32Array([this.buffer[0],0])),r=new cs(new Uint32Array([t.buffer[3],0])),a=new cs(new Uint32Array([t.buffer[2],0])),o=new cs(new Uint32Array([t.buffer[1],0])),l=new cs(new Uint32Array([t.buffer[0],0]));let h=cs.multiply(s,l);this.buffer[0]=h.low();const c=new cs(new Uint32Array([h.high(),0]));h=cs.multiply(n,l),c.plus(h),h=cs.multiply(s,o),c.plus(h),this.buffer[1]=c.low(),this.buffer[3]=c.lessThan(h)?1:0,this.buffer[2]=c.high();return new cs(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(cs.multiply(i,l)).plus(cs.multiply(n,o)).plus(cs.multiply(s,a)),this.buffer[3]+=cs.multiply(e,l).plus(cs.multiply(i,o)).plus(cs.multiply(n,a)).plus(cs.multiply(s,r)).low(),this}plus(t){const e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return"".concat(os(this.buffer[3])," ").concat(os(this.buffer[2])," ").concat(os(this.buffer[1])," ").concat(os(this.buffer[0]))}static multiply(t,e){return new us(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new us(new Uint32Array(t.buffer)).plus(e)}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return us.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return us.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);const i=t.startsWith("-"),n=t.length,s=new us(e);for(let r=i?1:0;r<n;){const e=8<n-r?8:n-r,i=new us(new Uint32Array([Number.parseInt(t.slice(r,r+e),10),0,0,0])),a=new us(new Uint32Array([ls[e],0,0,0]));s.times(a),s.plus(i),r+=e}return i?s.negate():s}static convertArray(t){const e=new Uint32Array(4*t.length);for(let i=-1,n=t.length;++i<n;)us.from(t[i],new Uint32Array(e.buffer,e.byteOffset+16*i,4));return e}}class ps extends te{constructor(t,e,i,n){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=i,this.dictionaries=n}visit(t){return super.visit(t instanceof Ji?t.type:t)}visitNull(t){let{length:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e})}visitBool(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitInt(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFloat(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitUtf8(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDate(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTimestamp(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTime(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDecimal(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitList(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===e.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFixedSizeList(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),child:this.visit(t.children[0])})}visitMap(t){let{length:e,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Gi({type:t,length:e,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return e>0&&this.readData(t,i)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t){let{length:e,offset:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return this.bytes.subarray(i,i+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class fs extends ps{constructor(t,e,i,n){super(new Uint8Array(0),e,i,n),this.sources=t}readNullBitmap(t,e){let{offset:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return e<=0?new Uint8Array(0):Si(this.sources[i])}readOffsets(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return G(Uint8Array,G(Int32Array,this.sources[e]))}readTypeIds(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return G(Uint8Array,G(t.ArrayType,this.sources[e]))}readData(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();const{sources:i}=this;return Et.isTimestamp(t)||(Et.isInt(t)||Et.isTime(t))&&64===t.bitWidth||Et.isDate(t)&&t.unit===r.MILLISECOND?G(Uint8Array,ds.convertArray(i[e])):Et.isDecimal(t)?G(Uint8Array,us.convertArray(i[e])):Et.isBinary(t)||Et.isFixedSizeBinary(t)?function(t){const e=t.join(""),i=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)i[n>>1]=Number.parseInt(e.slice(n,n+2),16);return i}(i[e]):Et.isBool(t)?Si(i[e]):Et.isUtf8(t)?q(i[e].join("")):G(Uint8Array,G(t.ArrayType,i[e].map((t=>+t))))}}var ms,_s,ys,gs,bs,vs,ws,xs;!function(t){t[t.BUFFER=0]="BUFFER"}(ms||(ms={})),function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"}(_s||(_s={}));class Ts{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new Ts).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+4),(e||new Ts).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):_s.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):ms.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,_s.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,ms.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,i){return Ts.startBodyCompression(t),Ts.addCodec(t,e),Ts.addMethod(t,i),Ts.endBodyCompression(t)}}class Ss{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,i){return t.prep(8,16),t.writeInt64(i),t.writeInt64(e),t.offset()}}class ks{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,i){return t.prep(8,16),t.writeInt64(i),t.writeInt64(e),t.offset()}}class Is{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new Is).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,e){return t.setPosition(t.position()+4),(e||new Is).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const i=this.bb.__offset(this.bb_pos,6);return i?(e||new ks).__init(this.bb.__vector(this.bb_pos+i)+16*t,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const i=this.bb.__offset(this.bb_pos,8);return i?(e||new Ss).__init(this.bb.__vector(this.bb_pos+i)+16*t,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new Ts).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}}class Ms{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new Ms).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,e){return t.setPosition(t.position()+4),(e||new Ms).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Is).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}}!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(ys||(ys={}));class As{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new As).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+4),(e||new As).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ys.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,ys.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return As.startFloatingPoint(t),As.addPrecision(t,e),As.endFloatingPoint(t)}}class Ds{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new Ds).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+4),(e||new Ds).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,i,n){return Ds.startDecimal(t),Ds.addPrecision(t,e),Ds.addScale(t,i),Ds.addBitWidth(t,n),Ds.endDecimal(t)}}!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(gs||(gs={}));class Ls{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new Ls).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,e){return t.setPosition(t.position()+4),(e||new Ls).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):gs.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,gs.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return Ls.startDate(t),Ls.addUnit(t,e),Ls.endDate(t)}}!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(bs||(bs={}));class Es{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new Es).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+4),(e||new Es).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):bs.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,bs.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,i){return Es.startTime(t),Es.addUnit(t,e),Es.addBitWidth(t,i),Es.endTime(t)}}class Os{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new Os).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+4),(e||new Os).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):bs.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,bs.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,i){return Os.startTimestamp(t),Os.addUnit(t,e),Os.addTimezone(t,i),Os.endTimestamp(t)}}!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(vs||(vs={}));class Ns{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new Ns).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+4),(e||new Ns).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vs.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,vs.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return Ns.startInterval(t),Ns.addUnit(t,e),Ns.endInterval(t)}}!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(ws||(ws={}));class Bs{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new Bs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+4),(e||new Bs).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ws.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,ws.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addInt32(e[i]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,i){return Bs.startUnion(t),Bs.addMode(t,e),Bs.addTypeIds(t,i),Bs.endUnion(t)}}class Cs{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new Cs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+4),(e||new Cs).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return Cs.startFixedSizeBinary(t),Cs.addByteWidth(t,e),Cs.endFixedSizeBinary(t)}}class Fs{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new Fs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+4),(e||new Fs).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return Fs.startFixedSizeList(t),Fs.addListSize(t,e),Fs.endFixedSizeList(t)}}class Rs{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,e){return(e||new Rs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,e){return t.setPosition(t.position()+4),(e||new Rs).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,e){return Rs.startMap(t),Rs.addKeysSorted(t,e),Rs.endMap(t)}}!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(xs||(xs={}));class Us{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new Us).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,e){return t.setPosition(t.position()+4),(e||new Us).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):An.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):xs.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const i=this.bb.__offset(this.bb_pos,12);return i?(e||new Bn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,An.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,xs.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(t,e,i,n,s,r){return Us.startMessage(t),Us.addVersion(t,e),Us.addHeaderType(t,i),Us.addHeader(t,n),Us.addBodyLength(t,s),Us.addCustomMetadata(t,r),Us.endMessage(t)}}class js{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new js).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+4),(e||new js).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return js.startNull(t),js.endNull(t)}}class Ps{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new Ps).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+4),(e||new Ps).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Ps.startBinary(t),Ps.endBinary(t)}}class zs{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new zs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+4),(e||new zs).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return zs.startBool(t),zs.endBool(t)}}class Vs{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new Vs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+4),(e||new Vs).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Vs.startUtf8(t),Vs.endUtf8(t)}}class Hs{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new Hs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+4),(e||new Hs).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Hs.startList(t),Hs.endList(t)}}class qs{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new qs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+4),(e||new qs).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return qs.startStruct_(t),qs.endStruct_(t)}}var Ws=In;const Ys=new class extends te{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return js.startNull(e),js.endNull(e)}visitInt(t,e){return Cn.startInt(e),Cn.addBitWidth(e,t.bitWidth),Cn.addIsSigned(e,t.isSigned),Cn.endInt(e)}visitFloat(t,e){return As.startFloatingPoint(e),As.addPrecision(e,t.precision),As.endFloatingPoint(e)}visitBinary(t,e){return Ps.startBinary(e),Ps.endBinary(e)}visitBool(t,e){return zs.startBool(e),zs.endBool(e)}visitUtf8(t,e){return Vs.startUtf8(e),Vs.endUtf8(e)}visitDecimal(t,e){return Ds.startDecimal(e),Ds.addScale(e,t.scale),Ds.addPrecision(e,t.precision),Ds.addBitWidth(e,t.bitWidth),Ds.endDecimal(e)}visitDate(t,e){return Ls.startDate(e),Ls.addUnit(e,t.unit),Ls.endDate(e)}visitTime(t,e){return Es.startTime(e),Es.addUnit(e,t.unit),Es.addBitWidth(e,t.bitWidth),Es.endTime(e)}visitTimestamp(t,e){const i=t.timezone&&e.createString(t.timezone)||void 0;return Os.startTimestamp(e),Os.addUnit(e,t.unit),void 0!==i&&Os.addTimezone(e,i),Os.endTimestamp(e)}visitInterval(t,e){return Ns.startInterval(e),Ns.addUnit(e,t.unit),Ns.endInterval(e)}visitList(t,e){return Hs.startList(e),Hs.endList(e)}visitStruct(t,e){return qs.startStruct_(e),qs.endStruct_(e)}visitUnion(t,e){Bs.startTypeIdsVector(e,t.typeIds.length);const i=Bs.createTypeIdsVector(e,t.typeIds);return Bs.startUnion(e),Bs.addMode(e,t.mode),Bs.addTypeIds(e,i),Bs.endUnion(e)}visitDictionary(t,e){const i=this.visit(t.indices,e);return Fn.startDictionaryEncoding(e),Fn.addId(e,new Ws(t.id,0)),Fn.addIsOrdered(e,t.isOrdered),void 0!==i&&Fn.addIndexType(e,i),Fn.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return Cs.startFixedSizeBinary(e),Cs.addByteWidth(e,t.byteWidth),Cs.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return Fs.startFixedSizeList(e),Fs.addListSize(e,t.listSize),Fs.endFixedSizeList(e)}visitMap(t,e){return Rs.startMap(e),Rs.addKeysSorted(e,t.keysSorted),Rs.endMap(e)}};function $s(t){return new sr(t.count,Zs(t.columns),Js(t.columns))}function Gs(t,e){return(t.children||[]).filter(Boolean).map((t=>Ji.fromJSON(t,e)))}function Zs(t){return(t||[]).reduce(((t,e)=>{return[...t,new or(e.count,(i=e.VALIDITY,(i||[]).reduce(((t,e)=>t+ +(0===e)),0))),...Zs(e.children)];var i}),[])}function Js(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let i=-1,n=(t||[]).length;++i<n;){const n=t[i];n.VALIDITY&&e.push(new ar(e.length,n.VALIDITY.length)),n.TYPE&&e.push(new ar(e.length,n.TYPE.length)),n.OFFSET&&e.push(new ar(e.length,n.OFFSET.length)),n.DATA&&e.push(new ar(e.length,n.DATA.length)),e=Js(n.children,e)}return e}function Ks(t){return new Map(Object.entries(t||{}))}function Xs(t){return new Nt(t.isSigned,t.bitWidth)}function Qs(t,i){const n=t.type.name;switch(n){case"NONE":case"null":return new Ot;case"binary":return new Ft;case"utf8":return new Rt;case"bool":return new Ut;case"list":return new qt((i||[])[0]);case"struct":case"struct_":return new Wt(i||[])}switch(n){case"int":{const e=t.type;return new Nt(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new Ct(s[e.precision])}case"decimal":{const e=t.type;return new jt(e.scale,e.precision,e.bitWidth)}case"date":{const e=t.type;return new Pt(r[e.unit])}case"time":{const e=t.type;return new zt(a[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new Vt(a[e.unit],e.timezone)}case"interval":{const e=t.type;return new Ht(o[e.unit])}case"union":{const n=t.type;return new Yt(e[n.mode],n.typeIds||[],i||[])}case"fixedsizebinary":{const e=t.type;return new $t(e.byteWidth)}case"fixedsizelist":{const e=t.type;return new Gt(e.listSize,(i||[])[0])}case"map":{const e=t.type;return new Zt((i||[])[0],e.keysSorted)}}throw new Error('Unrecognized type: "'.concat(n,'"'))}var tr=In,er=Nn,ir=On;class nr{constructor(t,e,i,n){this._version=e,this._headerType=i,this.body=new Uint8Array(0),n&&(this._createHeader=()=>n),this._bodyLength="number"===typeof t?t:t.low}static fromJSON(e,i){const n=new nr(0,t.V4,i);return n._createHeader=function(t,e){return()=>{switch(e){case l.Schema:return Zi.fromJSON(t);case l.RecordBatch:return sr.fromJSON(t);case l.DictionaryBatch:return rr.fromJSON(t)}throw new Error("Unrecognized Message type: { name: ".concat(l[e],", type: ").concat(e," }"))}}(e,i),n}static decode(t){t=new ir(J(t));const e=Us.getRootAsMessage(t),i=e.bodyLength(),n=e.version(),s=e.headerType(),r=new nr(i,n,s);return r._createHeader=function(t,e){return()=>{switch(e){case l.Schema:return Zi.decode(t.header(new Un));case l.RecordBatch:return sr.decode(t.header(new Is),t.version());case l.DictionaryBatch:return rr.decode(t.header(new Ms),t.version())}throw new Error("Unrecognized Message type: { name: ".concat(l[e],", type: ").concat(e," }"))}}(e,s),r}static encode(e){const i=new er;let n=-1;return e.isSchema()?n=Zi.encode(i,e.header()):e.isRecordBatch()?n=sr.encode(i,e.header()):e.isDictionaryBatch()&&(n=rr.encode(i,e.header())),Us.startMessage(i),Us.addVersion(i,t.V4),Us.addHeader(i,n),Us.addHeaderType(i,e.headerType),Us.addBodyLength(i,new tr(e.bodyLength,0)),Us.finishMessageBuffer(i,Us.endMessage(i)),i.asUint8Array()}static from(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e instanceof Zi)return new nr(0,t.V4,l.Schema,e);if(e instanceof sr)return new nr(i,t.V4,l.RecordBatch,e);if(e instanceof rr)return new nr(i,t.V4,l.DictionaryBatch,e);throw new Error("Unrecognized Message header: ".concat(e))}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===l.Schema}isRecordBatch(){return this.headerType===l.RecordBatch}isDictionaryBatch(){return this.headerType===l.DictionaryBatch}}class sr{constructor(t,e,i){this._nodes=e,this._buffers=i,this._length="number"===typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class rr{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._data=t,this._isDelta=i,this._id="number"===typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class ar{constructor(t,e){this.offset="number"===typeof t?t:t.low,this.length="number"===typeof e?e:e.low}}class or{constructor(t,e){this.length="number"===typeof t?t:t.low,this.nullCount="number"===typeof e?e:e.low}}function lr(t,e){const i=[];for(let n,s=-1,r=-1,a=t.childrenLength();++s<a;)(n=t.children(s))&&(i[++r]=Ji.decode(n,e));return i}function hr(t){const e=new Map;if(t)for(let i,n,s=-1,r=Math.trunc(t.customMetadataLength());++s<r;)(i=t.customMetadata(s))&&null!=(n=i.key())&&e.set(n,i.value());return e}function cr(t){return new Nt(t.isSigned(),t.bitWidth())}function dr(t,e){const i=t.typeType();switch(i){case En.NONE:case En.Null:return new Ot;case En.Binary:return new Ft;case En.Utf8:return new Rt;case En.Bool:return new Ut;case En.List:return new qt((e||[])[0]);case En.Struct_:return new Wt(e||[])}switch(i){case En.Int:{const e=t.type(new Cn);return new Nt(e.isSigned(),e.bitWidth())}case En.FloatingPoint:{const e=t.type(new As);return new Ct(e.precision())}case En.Decimal:{const e=t.type(new Ds);return new jt(e.scale(),e.precision(),e.bitWidth())}case En.Date:{const e=t.type(new Ls);return new Pt(e.unit())}case En.Time:{const e=t.type(new Es);return new zt(e.unit(),e.bitWidth())}case En.Timestamp:{const e=t.type(new Os);return new Vt(e.unit(),e.timezone())}case En.Interval:{const e=t.type(new Ns);return new Ht(e.unit())}case En.Union:{const i=t.type(new Bs);return new Yt(i.mode(),i.typeIdsArray()||[],e||[])}case En.FixedSizeBinary:{const e=t.type(new Cs);return new $t(e.byteWidth())}case En.FixedSizeList:{const i=t.type(new Fs);return new Gt(i.listSize(),(e||[])[0])}case En.Map:{const i=t.type(new Rs);return new Zt((e||[])[0],i.keysSorted())}}throw new Error('Unrecognized type: "'.concat(En[i],'" (').concat(i,")"))}Ji.encode=function(t,e){let i=-1,n=-1,s=-1;const r=e.type;let a=e.typeId;Et.isDictionary(r)?(a=r.dictionary.typeId,s=Ys.visit(r,t),n=Ys.visit(r.dictionary,t)):n=Ys.visit(r,t);const o=(r.children||[]).map((e=>Ji.encode(t,e))),l=Rn.createChildrenVector(t,o),h=e.metadata&&e.metadata.size>0?Rn.createCustomMetadataVector(t,[...e.metadata].map((e=>{let[i,n]=e;const s=t.createString("".concat(i)),r=t.createString("".concat(n));return Bn.startKeyValue(t),Bn.addKey(t,s),Bn.addValue(t,r),Bn.endKeyValue(t)}))):-1;e.name&&(i=t.createString(e.name));Rn.startField(t),Rn.addType(t,n),Rn.addTypeType(t,a),Rn.addChildren(t,l),Rn.addNullable(t,!!e.nullable),-1!==i&&Rn.addName(t,i);-1!==s&&Rn.addDictionary(t,s);-1!==h&&Rn.addCustomMetadata(t,h);return Rn.endField(t)},Ji.decode=function(t,e){let i,n,s,r,a,o;e&&(o=t.dictionary())?e.has(i=o.id().low)?(r=(r=o.indexType())?cr(r):new Bt,a=new Xt(e.get(i),r,i,o.isOrdered()),n=new Ji(t.name(),a,t.nullable(),hr(t))):(r=(r=o.indexType())?cr(r):new Bt,e.set(i,s=dr(t,lr(t,e))),a=new Xt(s,r,i,o.isOrdered()),n=new Ji(t.name(),a,t.nullable(),hr(t))):(s=dr(t,lr(t,e)),n=new Ji(t.name(),s,t.nullable(),hr(t)));return n||null},Ji.fromJSON=function(t,e){let i,n,s,r,a,o;return e&&(r=t.dictionary)?e.has(i=r.id)?(n=(n=r.indexType)?Xs(n):new Bt,o=new Xt(e.get(i),n,i,r.isOrdered),s=new Ji(t.name,o,t.nullable,Ks(t.customMetadata))):(n=(n=r.indexType)?Xs(n):new Bt,e.set(i,a=Qs(t,Gs(t,e))),o=new Xt(a,n,i,r.isOrdered),s=new Ji(t.name,o,t.nullable,Ks(t.customMetadata))):(a=Qs(t,Gs(t,e)),s=new Ji(t.name,a,t.nullable,Ks(t.customMetadata))),s||null},Zi.encode=function(t,e){const i=e.fields.map((e=>Ji.encode(t,e)));Un.startFieldsVector(t,i.length);const n=Un.createFieldsVector(t,i),s=e.metadata&&e.metadata.size>0?Un.createCustomMetadataVector(t,[...e.metadata].map((e=>{let[i,n]=e;const s=t.createString("".concat(i)),r=t.createString("".concat(n));return Bn.startKeyValue(t),Bn.addKey(t,s),Bn.addValue(t,r),Bn.endKeyValue(t)}))):-1;Un.startSchema(t),Un.addFields(t,n),Un.addEndianness(t,ur?Dn.Little:Dn.Big),-1!==s&&Un.addCustomMetadata(t,s);return Un.endSchema(t)},Zi.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;const i=function(t,e){const i=[];for(let n,s=-1,r=-1,a=t.fieldsLength();++s<a;)(n=t.fields(s))&&(i[++r]=Ji.decode(n,e));return i}(t,e);return new Zi(i,hr(t),e)},Zi.fromJSON=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;return new Zi(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>Ji.fromJSON(t,e)))}(t,e),Ks(t.customMetadata),e)},sr.encode=function(t,e){const i=e.nodes||[],n=e.buffers||[];Is.startNodesVector(t,i.length);for(const a of i.slice().reverse())or.encode(t,a);const s=t.endVector();Is.startBuffersVector(t,n.length);for(const a of n.slice().reverse())ar.encode(t,a);const r=t.endVector();return Is.startRecordBatch(t),Is.addLength(t,new tr(e.length,0)),Is.addNodes(t,s),Is.addBuffers(t,r),Is.endRecordBatch(t)},sr.decode=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.V4;if(null!==e.compression())throw new Error("Record batch compression not implemented");return new sr(e.length(),function(t){const e=[];for(let i,n=-1,s=-1,r=t.nodesLength();++n<r;)(i=t.nodes(n))&&(e[++s]=or.decode(i));return e}(e),function(e,i){const n=[];for(let s,r=-1,a=-1,o=e.buffersLength();++r<o;)(s=e.buffers(r))&&(i<t.V4&&(s.bb_pos+=8*(r+1)),n[++a]=ar.decode(s));return n}(e,i))},sr.fromJSON=$s,rr.encode=function(t,e){const i=sr.encode(t,e.data);return Ms.startDictionaryBatch(t),Ms.addId(t,new tr(e.id,0)),Ms.addIsDelta(t,e.isDelta),Ms.addData(t,i),Ms.endDictionaryBatch(t)},rr.decode=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.V4;return new rr(sr.decode(e.data(),i),e.id(),e.isDelta())},rr.fromJSON=function(t){return new rr($s(t.data),t.id,t.isDelta)},or.encode=function(t,e){return ks.createFieldNode(t,new tr(e.length,0),new tr(e.nullCount,0))},or.decode=function(t){return new or(t.length(),t.nullCount())},ar.encode=function(t,e){return Ss.createBuffer(t,new tr(e.offset,0),new tr(e.length,0))},ar.decode=function(t){return new ar(t.offset(),t.length())};const ur=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]})(),pr=t=>"Expected ".concat(l[t]," Message in stream, but was null or length 0."),fr=t=>"Header pointer of flatbuffer-encoded ".concat(l[t]," Message is null or length 0."),mr=(t,e)=>"Expected to read ".concat(t," metadata bytes, but only read ").concat(e,"."),_r=(t,e)=>"Expected to read ".concat(t," bytes for message body, but only read ").concat(e,".");class yr{constructor(t){this.source=t instanceof es?t:new es(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Jn:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(pr(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=J(this.source.read(t));if(e.byteLength<t)throw new Error(_r(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=l.Schema,i=this.readMessage(e),n=null===i||void 0===i?void 0:i.header();if(t&&!n)throw new Error(fr(e));return n}readMetadataLength(){const t=this.source.read(vr),e=t&&new On(t),i=(null===e||void 0===e?void 0:e.readInt32(0))||0;return{done:0===i,value:i}}readMetadata(t){const e=this.source.read(t);if(!e)return Jn;if(e.byteLength<t)throw new Error(mr(t,e.byteLength));return{done:!1,value:nr.decode(e)}}}class gr{constructor(t,e){this.source=t instanceof is?t:A(t)?new as(t,e):new is(t)}[Symbol.asyncIterator](){return this}next(){return C(this,void 0,void 0,(function*(){let t;return(t=yield this.readMetadataLength()).done||-1===t.value&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Jn:t}))}throw(t){return C(this,void 0,void 0,(function*(){return yield this.source.throw(t)}))}return(t){return C(this,void 0,void 0,(function*(){return yield this.source.return(t)}))}readMessage(t){return C(this,void 0,void 0,(function*(){let e;if((e=yield this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(pr(t));return e.value}))}readMessageBody(t){return C(this,void 0,void 0,(function*(){if(t<=0)return new Uint8Array(0);const e=J(yield this.source.read(t));if(e.byteLength<t)throw new Error(_r(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}))}readSchema(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return C(this,void 0,void 0,(function*(){const e=l.Schema,i=yield this.readMessage(e),n=null===i||void 0===i?void 0:i.header();if(t&&!n)throw new Error(fr(e));return n}))}readMetadataLength(){return C(this,void 0,void 0,(function*(){const t=yield this.source.read(vr),e=t&&new On(t),i=(null===e||void 0===e?void 0:e.readInt32(0))||0;return{done:0===i,value:i}}))}readMetadata(t){return C(this,void 0,void 0,(function*(){const e=yield this.source.read(t);if(!e)return Jn;if(e.byteLength<t)throw new Error(mr(t,e.byteLength));return{done:!1,value:nr.decode(e)}}))}}class br extends yr{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof Kn?t:new Kn(t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;return{done:!1,value:nr.fromJSON(t.schema,l.Schema)}}if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];this._body=e.data.columns;return{done:!1,value:nr.fromJSON(e,l.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];this._body=e.columns;return{done:!1,value:nr.fromJSON(e,l.RecordBatch)}}return this._body=[],Jn}readMessageBody(t){return function t(e){return(e||[]).reduce(((e,i)=>[...e,...i.VALIDITY&&[i.VALIDITY]||[],...i.TYPE&&[i.TYPE]||[],...i.OFFSET&&[i.OFFSET]||[],...i.DATA&&[i.DATA]||[],...t(i.children)]),[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(pr(t));return e.value}readSchema(){const t=l.Schema,e=this.readMessage(t),i=null===e||void 0===e?void 0:e.header();if(!e||!i)throw new Error(fr(t));return i}}const vr=4,wr="ARROW1",xr=new Uint8Array(6);for(let i=0;i<6;i+=1)xr[i]=wr.codePointAt(i);function Tr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=-1,n=xr.length;++i<n;)if(xr[i]!==t[e+i])return!1;return!0}const Sr=xr.length,kr=Sr+vr,Ir=2*Sr+vr;class Mr extends Xn{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return x(e)?e.then((()=>this)):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Yn.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Yn.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Mr?t:I(t)?function(t){return new Ar(new Rr(t))}(t):A(t)?function(t){return C(this,void 0,void 0,(function*(){const{size:e}=yield t.stat(),i=new as(t,e);return e>=Ir&&Tr(yield i.readAt(0,Sr+7&-8))?new Er(new Fr(i)):new Dr(new Br(i))}))}(t):x(t)?(()=>C(this,void 0,void 0,(function*(){return yield Mr.from(yield t)})))():D(t)||E(t)||O(t)||S(t)?function(t){return C(this,void 0,void 0,(function*(){const e=yield t.peek(Sr+7&-8);return e&&e.byteLength>=4?Tr(e)?new Lr(new Cr(yield t.read())):new Dr(new Br(t)):new Dr(new Br(function(){return U(this,arguments,(function*(){}))}()))}))}(new is(t)):function(t){const e=t.peek(Sr+7&-8);return e&&e.byteLength>=4?Tr(e)?new Lr(new Cr(t.read())):new Ar(new Nr(t)):new Ar(new Nr(function*(){}()))}(new es(t))}static readAll(t){return t instanceof Mr?t.isSync()?jr(t):Pr(t):I(t)||ArrayBuffer.isView(t)||T(t)||M(t)?jr(t):Pr(t)}}class Ar extends Mr{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return U(this,arguments,(function*(){yield R(yield*j(P(this[Symbol.iterator]())))}))}}class Dr extends Mr{constructor(t){super(t),this._impl=t}readAll(){var t,e;return C(this,void 0,void 0,(function*(){const i=new Array;try{for(var n,s=P(this);!(n=yield s.next()).done;){const t=n.value;i.push(t)}}catch(r){t={error:r}}finally{try{n&&!n.done&&(e=s.return)&&(yield e.call(s))}finally{if(t)throw t.error}}return i}))}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Lr extends Ar{constructor(t){super(t),this._impl=t}}class Er extends Dr{constructor(t){super(t),this._impl=t}}class Or{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){const i=this._loadVectors(t,e,this.schema.fields),n=Gi({type:new Wt(this.schema.fields),length:t.length,children:i});return new fn(this.schema,n)}_loadDictionaryBatch(t,e){const{id:i,isDelta:n}=t,{dictionaries:s,schema:r}=this,a=s.get(i);if(n||!a){const s=r.dictionaries.get(i),o=this._loadVectors(t.data,e,[s]);return(a&&n?a.concat(new qi(o)):new qi(o)).memoize()}return a.memoize()}_loadVectors(t,e,i){return new ps(e,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}class Nr extends Or{constructor(t,e){super(e),this._reader=I(t)?new br(this._handle=t):new yr(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Ur(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Jn}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Jn}next(){if(this.closed)return Jn;let t;const{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),n=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,n)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),n=e.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,n);this.dictionaries.set(i.id,s)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new yn(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Br extends Or{constructor(t,e){super(e),this._reader=new gr(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return C(this,void 0,void 0,(function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}))}open(t){return C(this,void 0,void 0,(function*(){return this.closed||(this.autoDestroy=Ur(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this}))}throw(t){return C(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Jn}))}return(t){return C(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Jn}))}next(){return C(this,void 0,void 0,(function*(){if(this.closed)return Jn;let t;const{_reader:e}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),n=yield e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,n)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),n=yield e.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,n);this.dictionaries.set(i.id,s)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new yn(this.schema)}):yield this.return()}))}_readNextMessageAndValidate(t){return C(this,void 0,void 0,(function*(){return yield this._reader.readMessage(t)}))}}class Cr extends Nr{constructor(t,e){super(t instanceof rs?t:new rs(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var e;if(this.closed)return null;this._footer||this.open();const i=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(i&&this._handle.seek(i.offset)){const t=this._reader.readMessage(l.RecordBatch);if(null===t||void 0===t?void 0:t.isRecordBatch()){const e=t.header(),i=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,i)}}return null}_readDictionaryBatch(t){var e;const i=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(i&&this._handle.seek(i.offset)){const t=this._reader.readMessage(l.DictionaryBatch);if(null===t||void 0===t?void 0:t.isDictionaryBatch()){const e=t.header(),i=this._reader.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(e,i);this.dictionaries.set(e.id,n)}}}_readFooter(){const{_handle:t}=this,e=t.size-kr,i=t.readInt32(e),n=t.readAt(e-i,i);return Hn.decode(n)}_readNextMessageAndValidate(t){var e;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(t)}return null}}class Fr extends Br{constructor(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];const s="number"!==typeof i[0]?i.shift():void 0,r=i[0]instanceof Map?i.shift():void 0;super(t instanceof as?t:new as(t,s),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const e=Object.create(null,{open:{get:()=>super.open}});return C(this,void 0,void 0,(function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield e.open.call(this,t)}))}readRecordBatch(t){var e;return C(this,void 0,void 0,(function*(){if(this.closed)return null;this._footer||(yield this.open());const i=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(i&&(yield this._handle.seek(i.offset))){const t=yield this._reader.readMessage(l.RecordBatch);if(null===t||void 0===t?void 0:t.isRecordBatch()){const e=t.header(),i=yield this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,i)}}return null}))}_readDictionaryBatch(t){var e;return C(this,void 0,void 0,(function*(){const i=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(i&&(yield this._handle.seek(i.offset))){const t=yield this._reader.readMessage(l.DictionaryBatch);if(null===t||void 0===t?void 0:t.isDictionaryBatch()){const e=t.header(),i=yield this._reader.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(e,i);this.dictionaries.set(e.id,n)}}}))}_readFooter(){return C(this,void 0,void 0,(function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const e=t.size-kr,i=yield t.readInt32(e),n=yield t.readAt(e-i,i);return Hn.decode(n)}))}_readNextMessageAndValidate(t){return C(this,void 0,void 0,(function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&(yield this._handle.seek(e.offset)))return yield this._reader.readMessage(t)}return null}))}}class Rr extends Nr{constructor(t,e){super(t,e)}_loadVectors(t,e,i){return new fs(e,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}function Ur(t,e){return e&&"boolean"===typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*jr(t){const e=Mr.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}function Pr(t){return U(this,arguments,(function*(){const e=yield R(Mr.from(t));try{if(!(yield R(e.open({autoDestroy:!1}))).closed)do{yield yield R(e)}while(!(yield R(e.reset().open())).closed)}finally{yield R(e.cancel())}}))}class zr extends te{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(){const t=e=>e.flatMap((e=>Array.isArray(e)?t(e):e instanceof fn?e.data.children:e.data)),e=new zr;for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e.visitMany(t(n)),e}visit(t){if(t instanceof qi)return this.visitMany(t.data),this;const{type:e}=t;if(!Et.isDictionary(e)){const{length:i,nullCount:n}=t;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Et.isNull(e)||Vr.call(this,n<=0?new Uint8Array(0):Ti(t.offset,i,t.nullBitmap)),this.nodes.push(new or(i,n))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Vr(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new ar(this._byteLength,e)),this._byteLength+=e,this}function Hr(t){return Vr.call(this,t.values.subarray(0,t.length*t.stride))}function qr(t){const{length:e,values:i,valueOffsets:n}=t,s=n[0],r=n[e],a=Math.min(r-s,i.byteLength-s);return Vr.call(this,tt(-n[0],e,n)),Vr.call(this,i.subarray(s,s+a)),this}function Wr(t){const{length:e,valueOffsets:i}=t;return i&&Vr.call(this,tt(i[0],e,i)),this.visit(t.children[0])}function Yr(t){return this.visitMany(t.type.children.map(((e,i)=>t.children[i])).filter(Boolean))[0]}zr.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?Vr.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Vr.call(this,Ti(t.offset,t.length,e)):Vr.call(this,Si(t.values))},zr.prototype.visitInt=Hr,zr.prototype.visitFloat=Hr,zr.prototype.visitUtf8=qr,zr.prototype.visitBinary=qr,zr.prototype.visitFixedSizeBinary=Hr,zr.prototype.visitDate=Hr,zr.prototype.visitTimestamp=Hr,zr.prototype.visitTime=Hr,zr.prototype.visitDecimal=Hr,zr.prototype.visitList=Wr,zr.prototype.visitStruct=Yr,zr.prototype.visitUnion=function(t){const{type:i,length:n,typeIds:s,valueOffsets:r}=t;if(Vr.call(this,s),i.mode===e.Sparse)return Yr.call(this,t);if(i.mode===e.Dense){if(t.offset<=0)return Vr.call(this,r),Yr.call(this,t);{const e=s.reduce(((t,e)=>Math.max(t,e)),s[0]),a=new Int32Array(e+1),o=new Int32Array(e+1).fill(-1),l=new Int32Array(n),h=tt(-r[0],n,r);for(let t,i,r=-1;++r<n;)-1===(i=o[t=s[r]])&&(i=o[t]=h[t]),l[r]=h[r]-i,++a[t];Vr.call(this,l);for(let s,r=-1,c=i.children.length;++r<c;)if(s=t.children[r]){const t=i.typeIds[r],e=Math.min(n,a[t]);this.visit(s.slice(o[t],e))}}}return this},zr.prototype.visitInterval=Hr,zr.prototype.visitFixedSizeList=Wr,zr.prototype.visitMap=Wr;class $r extends Xn{constructor(t){super(),this._position=0,this._started=!1,this._sink=new ts,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,w(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!==typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"===typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toString(t)}toUint8Array(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toUint8Array(t)}writeAll(t){return x(t)?t.then((t=>this.writeAll(t))):S(t)?Kr(this,t):Jr(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._sink,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var i;return t===this._sink||t instanceof ts?this._sink=t:(this._sink=new ts,t&&(w(i=t)&&v(i.abort)&&v(i.getWriter)&&!L(i))?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>w(t)&&v(t.end)&&v(t.write)&&b(t.writable)&&!L(t))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&dn(e,this._schema)||(null==e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof vn&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof fn&&!(e=t.schema))return this.finish()&&void 0;if(e&&!dn(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof fn?t instanceof yn||this._writeRecordBatch(t):t instanceof vn?this.writeAll(t.batches):T(t)&&this.writeAll(t)}_writeMessage(t){const e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-1,i=nr.encode(t),n=i.byteLength,s=this._writeLegacyIpcFormat?4:8,r=n+s+e&~e,a=r-n-s;return t.headerType===l.RecordBatch?this._recordBatchBlocks.push(new Wn(r,t.bodyLength,this._position)):t.headerType===l.DictionaryBatch&&this._dictionaryBlocks.push(new Wn(r,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(r-s)),n>0&&this._write(i),this._writePadding(a)}_write(t){if(this._started){const e=J(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(nr.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(xr)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:i,bufferRegions:n,buffers:s}=zr.assemble(t),r=new sr(t.numRows,i,n),a=nr.from(r,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:n,nodes:s,bufferRegions:r,buffers:a}=zr.assemble(new qi([t])),o=new sr(t.length,s,r),l=new rr(o,e,i),h=nr.from(l,n);return this._writeMessage(h)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,i,n;for(let s=-1,r=t.length;++s<r;)(e=t[s])&&(i=e.byteLength)>0&&(this._write(e),(n=(i+7&-8)-i)>0&&this._writePadding(n));return this}_writeDictionaries(t){for(let[e,i]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(i=null===i||void 0===i?void 0:i.slice(t)).length>0)for(const n of i.data)this._writeDictionaryBatch(n,e,t>0),t+=n.length}return this}}class Gr extends $r{static writeAll(t,e){const i=new Gr(e);return x(t)?t.then((t=>i.writeAll(t))):S(t)?Kr(i,t):Jr(i,t)}}class Zr extends $r{static writeAll(t){const e=new Zr;return x(t)?t.then((t=>e.writeAll(t))):S(t)?Kr(e,t):Jr(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(e){const i=Hn.encode(new Hn(e,t.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(i)._write(Int32Array.of(i.byteLength))._writeMagic()}}function Jr(t,e){let i=e;e instanceof vn&&(i=e.batches,t.reset(void 0,e.schema));for(const n of i)t.write(n);return t.finish()}function Kr(t,e){var i,n,s,r;return C(this,void 0,void 0,(function*(){try{for(i=P(e);!(n=yield i.next()).done;){const e=n.value;t.write(e)}}catch(a){s={error:a}}finally{try{n&&!n.done&&(r=i.return)&&(yield r.call(i))}finally{if(s)throw s.error}}return t.finish()}))}function Xr(t){const e=Mr.from(t);return x(e)?e.then((t=>Xr(t))):e.isAsync()?e.readAll().then((t=>new vn(t))):new vn(e.readAll())}function Qr(t){return("stream"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stream")?Gr:Zr).writeAll(t).toUint8Array(!0)}var ta,ea=function(){function t(t,e,i,n){var s=this;this.getCell=function(t,e){var i=t<s.headerRows&&e<s.headerColumns,n=t>=s.headerRows&&e<s.headerColumns,r=t<s.headerRows&&e>=s.headerColumns;if(i){var a=["blank"];return e>0&&a.push("level"+t),{type:"blank",classNames:a.join(" "),content:""}}if(r)return{type:"columns",classNames:(a=["col_heading","level"+t,"col"+(l=e-s.headerColumns)]).join(" "),content:s.getContent(s.columnsTable,l,t)};if(n){a=["row_heading","level"+e,"row"+(o=t-s.headerRows)];return{type:"index",id:"T_".concat(s.uuid,"level").concat(e,"_row").concat(o),classNames:a.join(" "),content:s.getContent(s.indexTable,o,e)}}a=["data","row"+(o=t-s.headerRows),"col"+(l=e-s.headerColumns)];var o,l,h=s.styler?s.getContent(s.styler.displayValuesTable,o,l):s.getContent(s.dataTable,o,l);return{type:"data",id:"T_".concat(s.uuid,"row").concat(o,"_col").concat(l),classNames:a.join(" "),content:h}},this.getContent=function(t,e,i){var n=t.getChildAt(i);return null===n?"":s.getColumnTypeId(t,i)===h.Timestamp?s.nanosToDate(n.get(e)):n.get(e)},this.dataTable=Xr(t),this.indexTable=Xr(e),this.columnsTable=Xr(i),this.styler=n?{caption:n.caption,displayValuesTable:Xr(n.displayValues),styles:n.styles,uuid:n.uuid}:void 0}return Object.defineProperty(t.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{data:Qr(this.dataTable),index:Qr(this.indexTable),columns:Qr(this.columnsTable)}},t.prototype.getColumnTypeId=function(t,e){return t.schema.fields[e].type.typeId},t.prototype.nanosToDate=function(t){return new Date(t/1e6)},t}(),ia=function(){return ia=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},ia.apply(this,arguments)};!function(t){t.COMPONENT_READY="streamlit:componentReady",t.SET_COMPONENT_VALUE="streamlit:setComponentValue",t.SET_FRAME_HEIGHT="streamlit:setFrameHeight"}(ta||(ta={}));var na=function(){function t(){}return t.API_VERSION=1,t.RENDER_EVENT="streamlit:render",t.events=new EventTarget,t.registeredMessageListener=!1,t.setComponentReady=function(){t.registeredMessageListener||(window.addEventListener("message",t.onMessageEvent),t.registeredMessageListener=!0),t.sendBackMsg(ta.COMPONENT_READY,{apiVersion:t.API_VERSION})},t.setFrameHeight=function(e){void 0===e&&(e=document.body.scrollHeight),e!==t.lastFrameHeight&&(t.lastFrameHeight=e,t.sendBackMsg(ta.SET_FRAME_HEIGHT,{height:e}))},t.setComponentValue=function(e){var i;e instanceof ea?(i="dataframe",e=e.serialize()):!function(t){var e=!1;try{e=t instanceof BigInt64Array||t instanceof BigUint64Array}catch(i){}return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array||e}(e)?e instanceof ArrayBuffer?(i="bytes",e=new Uint8Array(e)):i="json":(i="bytes",e=new Uint8Array(e.buffer)),t.sendBackMsg(ta.SET_COMPONENT_VALUE,{value:e,dataType:i})},t.onMessageEvent=function(e){if(e.data.type===t.RENDER_EVENT)t.onRenderMessage(e.data)},t.onRenderMessage=function(e){var i=e.args;null==i&&(console.error("Got null args in onRenderMessage. This should never happen"),i={});var n=e.dfs&&e.dfs.length>0?t.argsDataframeToObject(e.dfs):{};i=ia(ia({},i),n);var s=Boolean(e.disabled),r=e.theme;r&&sa(r);var a={disabled:s,args:i,theme:r},o=new CustomEvent(t.RENDER_EVENT,{detail:a});t.events.dispatchEvent(o)},t.argsDataframeToObject=function(e){var i=e.map((function(e){var i=e.key,n=e.value;return[i,t.toArrowTable(n)]}));return Object.fromEntries(i)},t.toArrowTable=function(t){var e,i=(e=t.data).data,n=e.index,s=e.columns,r=e.styler;return new ea(i,n,s,r)},t.sendBackMsg=function(t,e){window.parent.postMessage(ia({isStreamlitMessage:!0,type:t},e),"*")},t}(),sa=function(t){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML="\n    :root {\n      --primary-color: ".concat(t.primaryColor,";\n      --background-color: ").concat(t.backgroundColor,";\n      --secondary-background-color: ").concat(t.secondaryBackgroundColor,";\n      --text-color: ").concat(t.textColor,";\n      --font: ").concat(t.font,";\n    }\n\n    body {\n      background-color: var(--background-color);\n      color: var(--text-color);\n    }\n  ")};var ra=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ra(e,t),e.prototype.componentDidMount=function(){na.setFrameHeight()},e.prototype.componentDidUpdate=function(){na.setFrameHeight()}}(d.PureComponent);i.p;const aa=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",oa=document?document.documentElement:null,la=!!aa&&-1!==aa.indexOf("phantom"),ha=window&&"ActiveXObject"in window,ca=(Boolean(ha&&aa.match(/MSIE 9/i)),ha&&document&&document.addEventListener,-1!==aa.indexOf("webkit")),da=(aa.indexOf("android"),-1!==aa.search("android [23]")),ua=!!window&&"undefined"!==typeof window.orientation,pa=!(!navigator||!window)&&(navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent),fa=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:pa,ma=!!window&&window.opera,_a=(aa.indexOf("gecko"),-1!==aa.indexOf("gecko")&&!ca&&!ma&&!ha),ya=(aa.indexOf("chrome"),-1!==aa.indexOf("edge/")),ga=!!oa&&(ha&&"transition"in oa.style),ba=!!window&&("WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!da),va=!!oa&&"MozPerspective"in oa.style,wa=!!oa&&"OTransition"in oa.style;window&&window.L_DISABLE_3D,ua&&window.opera;let xa=!!window&&("devicePixelRatio"in window&&window.devicePixelRatio>1);if(!xa&&window&&"matchMedia"in window){let t=window.matchMedia("(min-resolution:144dpi)");xa=t&&t.matches}const Ta=window&&!window.L_NO_TOUCH&&!la&&(fa||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function Sa(t){return"string"===typeof t?document.getElementById(t):t}function ka(t,e,i){var n=document.createElement(t);return n.className=e,i&&i.appendChild(n),n}function Ia(t,e){var i=ka("button",t,e);return i.type="button",i}function Ma(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e}function Aa(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}Aa(["transition","webkitTransition","OTransition","MozTransition","msTransition"]),Aa(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);class Da extends Error{constructor(t,e){super(),this.name="TLError",this.message=t||"error",this.message_key=this.message,this.detail=e||""}}const La={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Ea(t){La[t.toLowerCase()]&&(t=La[t.toLowerCase()]);t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,n){return e+e+i+i+n+n}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function Oa(t,e){var i;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}function Na(t){for(var e=Array.prototype.slice.call(arguments,1),i=0,n=e.length;i<n;i++)Oa(t,e[i]||{});return t}const Ba=[];function Ca(t){Ba.forEach((e=>{try{e(t)}catch(i){console&&console.log&&console.log("Error handling trace",i)}}))}function Fa(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}const Ra=function(){var t=0,e="_tl_id";return function(i){return i[e]=i[e]||++t,i[e]}}();function Ua(t){return t&&"function"==typeof t.replace?t.replace(/^\s+|\s+$/g,""):""}function ja(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];for(let r of i)for(var s of Object.getOwnPropertyNames(r.prototype))t.prototype[s]=r.prototype[s]}function Pa(t){t=(t=Ua(t)).toLowerCase();for(var e="\xe3\xe0\xe1\xe4\xe2\u1ebd\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf5\xf2\xf3\xf6\xf4\xf9\xfa\xfc\xfb\xf1\xe7\xb7/_,:;",i=0;i<31;i++)t=t.replace(new RegExp(e.charAt(i),"g"),"aaaaaeeeeeiiiiooooouuuunc------".charAt(i));return t=(t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")).replace(/^([0-9])/,"_$1")}function za(t,e){var i=function(){var t;return"abcdefghijklmnopqurstuvwxyz".substr((t=32,Math.floor(Math.random()*t)),1)},n=function(t){for(var e="",n=0;n<t;n++)e+=i();return e};return e?e+"-"+n(t):"tl-"+n(t)}function Va(t){return t==parseFloat(t)?!(t%2):void 0}function Ha(t,e,i,n){for(var s=n||0,r=0;r<e.length;r++)e[r].data[i]==t&&(s=r);return s}function qa(t){return t?t=(t=t.replace(/<a\b[^>]*>/i,"")).replace(/<\/a>/i,""):t}function Wa(t){return(t=t.replace(/(<[^>]*>)+/g,"")).replace('"',"'")}function Ya(t,e,i){var n=function(t,e,i){i||(i="");return e&&e.length>30&&(e=e.substring(0,30)+"\u2026"),i+"<a class='tl-makelink' href='"+t+"' onclick='void(0)'>"+e+"</a>"};return t.replace(/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,(function(t,e,i,s){if(i>0){var r=s[i-1];if('"'==r||"'"==r||"="==r)return t}return n(t,e)})).replace(/(^|[^\/>])(www\.[\S]+(\b|$))/gim,(function(t,e,i,s,r){return n("http://"+i,i,e)})).replace(/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim,(function(t,e,i,s){return n("mailto:"+e,e)}))}function $a(t){return t.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const Ga=t=>{var e={w:0,h:0};return t.w>t.h&&t.h>0?(e.h=t.h,e.w=t.h):(e.w=t.w,e.h=t.w),e},Za=t=>null!==t.w&&""!==t.w?Math.round(t.w/16*9):null!==t.h&&""!==t.h?Math.round(t.h/9*16):0;let Ja=function(t){var e="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",i=e.length;return{encode:function(t){if("number"!==typeof t||t!==parseInt(t))throw'"encode" only accepts integers.';for(var n="";t;){var s=t%i;t=Math.floor(t/i),n=e[s].toString()+n}return n},decode:function(t){if("string"!==typeof t)throw'"decode" only accepts strings.';for(var n=0;t;){var s=e.indexOf(t[0]);if(s<0)throw'"decode" can\'t find "'+t[0]+'" in the alphabet: "'+e+'"';var r=t.length-1;n+=s*Math.pow(i,r),t=t.substring(1)}return n}}}();function Ka(t){if("string"==typeof t){let n=t.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(n){var e=parseInt(n[1])||0,i=parseInt(n[2])||0;return(parseInt(n[3])||0)+60*i+60*e*60}}else if("number"==typeof t)return t;return 0}function Xa(t){return(new DOMParser).parseFromString(t,"text/html").body.textContent||""}const Qa=[.42,0,1,1];function to(t){}function eo(t){return new to(Qa).get(t)}function io(t){return 1==t?1:1-Math.pow(2,-10*t)}function no(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}let so=function(){};so.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments)},i=function(){};i.prototype=this.prototype;var n=new i;for(var s in n.constructor=e,e.prototype=n,e.superclass=this.prototype,this)this.hasOwnProperty(s)&&"prototype"!==s&&"superclass"!==s&&(e[s]=this[s]);return t.statics&&(Na(e,t.statics),delete t.statics),t.includes&&(Na.apply(null,[n].concat(t.includes)),delete t.includes),t.options&&n.options&&(t.options=Na({},n.options,t.options)),Na(n,t),e.extend=so.extend,e.include=function(t){Na(this.prototype,t)},e};class ro{on(t,e,i){if(!e)throw new Da("No callback function provided");var n=this._tl_events=this._tl_events||{};return n[t]=n[t]||[],n[t].push({action:e,context:i||this}),this}addEventListener(t,e,i){return this.on(t,e,i)}hasEventListeners(t){var e="_tl_events";return e in this&&t in this[e]&&this[e][t].length>0}removeEventListener(t,e,i){if(!this.hasEventListeners(t))return this;for(var n=0,s=this._tl_events,r=s[t].length;n<r;n++)if(s[t][n].action===e&&(!i||s[t][n].context===i))return s[t].splice(n,1),this;return this}off(t,e,i){return this.removeEventListener(t,e,i)}fire(t,e){if(!this.hasEventListeners(t))return this;for(var i=Oa({type:t,target:this},e),n=this._tl_events[t].slice(),s=0,r=n.length;s<r;s++)n[s].action?n[s].action.call(n[s].context||this,i):Ca("no action defined for ".concat(t," listener"));return this}}function ao(t,e){return oo(t,e)}const oo=function(){var t=document,e=window,i=e.performance,n=i&&(i.now||i.webkitNow||i.msNow||i.mozNow),s=n?function(){return n.call(i)}:function(){return+new Date},r=t.documentElement,a=!1,o=1e3,l=/^rgb\(|#/,h=/^([+\-])=([\d\.]+)/,c=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,d=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,u=/scale\(((?:[+\-]=)?([\d\.]+))\)/,p=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,f=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,m={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},_=function(){var e,i=t.createElement("a").style,n=["webkitTransform","MozTransform","OTransform","msTransform","Transform"];for(e=0;e<n.length;e++)if(n[e]in i)return n[e]}(),y="undefined"!==typeof t.createElement("a").style.opacity,g=t.defaultView&&t.defaultView.getComputedStyle?function(e,i){i=I(i="transform"==i?_:i);var n=null,s=t.defaultView.getComputedStyle(e,"");return s&&(n=s[i]),e.style[i]||n}:r.currentStyle?function(t,e){if("opacity"==(e=I(e))){var i=100;try{i=t.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(s){try{i=t.filters("alpha").opacity}catch(r){}}return i/100}var n=t.currentStyle?t.currentStyle[e]:null;return t.style[e]||n}:function(t,e){return t.style[I(e)]},b=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(t){e.setTimeout((function(){t(+new Date)}),17)},v=[];function w(t){var e,i=v.length;for(n&&t>1e12&&(t=s()),a&&(t=s()),e=i;e--;)v[e](t);v.length&&b(w)}function x(t){var e,i=function(t,e,i){if(Array.prototype.indexOf)return t.indexOf(e);for(i=0;i<t.length;++i)if(t[i]===e)return i}(v,t);i>=0&&(e=v.slice(i+1),v.length=i,v=v.concat(e))}function T(t,e){var i,n={};return(i=t.match(d))&&(n.rotate=O(i[1],e?e.rotate:null)),(i=t.match(u))&&(n.scale=O(i[1],e?e.scale:null)),(i=t.match(p))&&(n.skewx=O(i[1],e?e.skewx:null),n.skewy=O(i[3],e?e.skewy:null)),(i=t.match(f))&&(n.translatex=O(i[1],e?e.translatex:null),n.translatey=O(i[3],e?e.translatey:null)),n}function S(t){var e="";return"rotate"in t&&(e+="rotate("+t.rotate+"deg) "),"scale"in t&&(e+="scale("+t.scale+") "),"translatex"in t&&(e+="translate("+t.translatex+"px,"+t.translatey+"px) "),"skewx"in t&&(e+="skew("+t.skewx+"deg,"+t.skewy+"deg)"),e}function k(t){var e,i,n,s=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(s?(e=s[1],i=s[2],n=s[3],"#"+(1<<24|e<<16|i<<8|n).toString(16).slice(1)):t).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function I(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function M(t){return"function"==typeof t}function A(t){return Math.sin(t*Math.PI/2)}function D(t,e,i,n,r,a){n=M(n)?n:N.easings[n]||A;var l,h=t||o,c=this,d=a-r,u=s(),p=0,f=0;return l=function t(s){var o=s-u;if(o>h||p)return a=isFinite(a)?a:1,p?f&&e(a):e(a),x(t),i&&i.apply(c);isFinite(a)?e(d*n(o/h)+r):e(n(o/h))},1===v.push(l)&&b(w),{stop:function(t){p=1,f=t,t||(i=null)}}}function L(t,e){var i,n,s=t.length,r=[];for(i=0;i<s;++i)r[i]=[t[i][0],t[i][1]];for(n=1;n<s;++n)for(i=0;i<s-n;++i)r[i][0]=(1-e)*r[i][0]+e*r[parseInt(i+1,10)][0],r[i][1]=(1-e)*r[i][1]+e*r[parseInt(i+1,10)][1];return[r[0][0],r[0][1]]}function E(t,e,i,n,s,r,a){if("transform"==s){for(var l in a={},i[r][s])a[l]=l in n[r][s]?Math.round(((n[r][s][l]-i[r][s][l])*t+i[r][s][l])*o)/o:i[r][s][l];return a}return"string"==typeof i[r][s]?function(t,e,i){var n,s,r,a,o=[];for(n=0;n<6;n++)r=Math.min(15,parseInt(e.charAt(n),16)),a=Math.min(15,parseInt(i.charAt(n),16)),s=(s=Math.floor((a-r)*t+r))>15?15:s<0?0:s,o[n]=s.toString(16);return"#"+o.join("")}(t,i[r][s],n[r][s]):(a=Math.round(((n[r][s]-i[r][s])*t+i[r][s])*o)/o,s in m||(a+=e[r][s]||"px"),a)}function O(t,e,i,n,s){return(i=h.exec(t))?(s=parseFloat(i[2]))&&e+("+"==i[1]?1:-1)*s:parseFloat(t)}function N(t,e){var i,n,s,r=t?r=isFinite(t.length)?t:[t]:[],a=e.complete,o=e.duration,h=e.easing,d=e.bezier,u=[],p=[],f=[],m=[];for(d&&(n=e.left,s=e.top,delete e.right,delete e.bottom,delete e.left,delete e.top),i=r.length;i--;){if(u[i]={},p[i]={},f[i]={},d){var b=g(r[i],"left"),v=g(r[i],"top"),w=[O(M(n)?n(r[i]):n||0,parseFloat(b)),O(M(s)?s(r[i]):s||0,parseFloat(v))];m[i]=M(d)?d(r[i],w):d,m[i].push(w),m[i].unshift([parseInt(b,10),parseInt(v,10)])}for(var x in e){switch(x){case"complete":case"duration":case"easing":case"bezier":continue}var A,N=g(r[i],x),B=M(e[x])?e[x](r[i]):e[x];"string"!=typeof B||!l.test(B)||l.test(N)?(u[i][x]="transform"==x?T(N):"string"==typeof B&&l.test(B)?k(N).slice(1):parseFloat(N),p[i][x]="transform"==x?T(B,u[i][x]):"string"==typeof B&&"#"==B.charAt(0)?k(B).slice(1):O(B,parseFloat(N)),"string"==typeof B&&(A=B.match(c))&&(f[i][x]=A[1])):delete e[x]}}return D.apply(r,[o,function(t,n,s){for(i=r.length;i--;)for(var a in d&&(s=L(m[i],t),r[i].style.left=s[0]+"px",r[i].style.top=s[1]+"px"),e)n=E(t,f,u,p,a,i),"transform"==a?r[i].style[_]=S(n):"opacity"!=a||y?r[i].style[I(a)]=n:r[i].style.filter="alpha(opacity="+100*n+")"},a,h])}return b((function(t){a=t>1e12!=s()>1e12})),N.tween=D,N.getStyle=g,N.bezier=L,N.transform=_,N.parseTransform=T,N.formatTransform=S,N.easings={},N}();class lo{show(t){t||(this._el.container.style.display="block")}hide(t){this._el.container.style.display="none"}addTo(t){t.appendChild(this._el.container),this.onAdd()}removeFrom(t){t.removeChild(this._el.container),this.onRemove()}animatePosition(t,e){var i={duration:this.options.duration,easing:this.options.ease};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]+"px");this.animator&&this.animator.stop(),this.animator=ao(e,i)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(t,e){for(var i in t)t.hasOwnProperty(i)&&(e?e.style[i]=t[i]+"px":this._el.container.style[i]=t[i]+"px")}getPosition(){return Ma(this._el.container)}}class ho{constructor(t,e,i){this._el={drag:t,move:t},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:no},this.animator=null,this.dragevent=this.mousedrag,Ta&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},Oa(this.options,e)}enable(t){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){uo.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),uo.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(t){this.options.constraint=t}_onDragStart(t){Ta?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=Ma(this._el.drag),this.data.time.start=(new Date).getTime(),this.fire("dragstart",this.data),uo.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),uo.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(t){this.data.sliding=!1,uo.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),uo.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(t){t.preventDefault(),this.data.sliding=!0,Ta?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),this.data.pos.end=Ma(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var t={x:0,y:0,time:0},e={x:0,y:0,time:0},i=!1;t.time=10*((new Date).getTime()-this.data.time.start),e.time=10*((new Date).getTime()-this.data.time.start),e.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),e.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(e.x/e.time),t.y=Math.round(e.y/e.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+t.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+t.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,e.time<3e3&&(i=!0),Math.abs(e.x)>1e4&&(this.data.direction="left",e.x>0&&(this.data.direction="right")),Math.abs(e.y)>1e4&&(this.data.direction="up",e.y>0&&(this.data.direction="down")),this._animateMomentum(),i&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},e={duration:this.options.duration,easing:io};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),e.top=Math.floor(t.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(t.x>this.options.constraint.left?t.x=this.options.constraint.left:t.x<this.options.constraint.right&&(t.x=this.options.constraint.right)),e.left=Math.floor(t.x)+"px"),this.animator=ao(this._el.move,e),this.fire("momentum",this.data)}}ja(ro);var co,uo={addListener:function(t,e,i,n){var s=Ra(i),r="_tl_"+e+s;if(!t[r]){var a=function(e){return i.call(n||t,e||uo._getEvent())};if(Ta&&"dblclick"===e&&this.addDoubleTapListener)this.addDoubleTapListener(t,a,s);else if("addEventListener"in t)if("mousewheel"===e)t.addEventListener("DOMMouseScroll",a,!1),t.addEventListener(e,a,!1);else if("mouseenter"===e||"mouseleave"===e){var o=a,l="mouseenter"===e?"mouseover":"mouseout";a=function(e){if(uo._checkMouse(t,e))return o(e)},t.addEventListener(l,a,!1)}else t.addEventListener(e,a,!1);else"attachEvent"in t&&t.attachEvent("on"+e,a);t[r]=a}},removeListener:function(t,e,i){var n=Ra(i),s="_tl_"+e+n,r=t[s];r&&(Ta&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,n):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",r,!1),t.removeEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1):t.removeEventListener(e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[s]=null)},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t},_getEvent:function(){var t=window.event;if(!t)for(var e=arguments.callee.caller;e&&(!(t=e.arguments[0])||window.Event!==t.constructor);)e=e.caller;return t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){uo.addListener(t,ho.START,uo.stopPropagation),uo.addListener(t,"click",uo.stopPropagation),uo.addListener(t,"dblclick",uo.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){uo.preventDefault(t),uo.stopPropagation(t)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},po=function(){var t,e,i,n,s,r,a=[],o=a.slice,l=a.filter,h=window.document,c={},d={},u={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,f=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,_=/^(?:body|html)$/i,y=/([A-Z])/g,g=["val","css","html","text","data","width","height","offset"],b=h.createElement("table"),v=h.createElement("tr"),w={tr:h.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:v,th:v,"*":h.createElement("div")},x=/complete|loaded|interactive/,T=/^[\w-]*$/,S={},k=S.toString,I={},M=h.createElement("div"),A={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},D=Array.isArray||function(t){return t instanceof Array};function L(t){return null==t?String(t):S[k.call(t)]||"object"}function E(t){return"function"==L(t)}function O(t){return null!=t&&t==t.window}function N(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function B(t){return"object"==L(t)}function C(t){return B(t)&&!O(t)&&Object.getPrototypeOf(t)==Object.prototype}function F(t){return"number"==typeof t.length}function R(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function U(t){return t in d?d[t]:d[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function j(t,e){return"number"!=typeof e||u[R(t)]?e:e+"px"}function P(t){return"children"in t?o.call(t.children):i.map(t.childNodes,(function(t){if(1==t.nodeType)return t}))}function z(i,n,s){for(e in n)s&&(C(n[e])||D(n[e]))?(C(n[e])&&!C(i[e])&&(i[e]={}),D(n[e])&&!D(i[e])&&(i[e]=[]),z(i[e],n[e],s)):n[e]!==t&&(i[e]=n[e])}function V(t,e){return null==e?i(t):i(t).filter(e)}function H(t,e,i,n){return E(e)?e.call(t,i,n):e}function q(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function W(e,i){var n=e.className,s=n&&n.baseVal!==t;if(i===t)return s?n.baseVal:n;s?n.baseVal=i:e.className=i}function Y(t){var e;try{return t?"true"==t||"false"!=t&&("null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?i.parseJSON(t):t:e):t}catch(n){return t}}function $(t,e){for(var i in e(t),t.childNodes)$(t.childNodes[i],e)}return I.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,s=t.parentNode,r=!s;return r&&(s=M).appendChild(t),n=~I.qsa(s,e).indexOf(t),r&&M.removeChild(t),n},s=function(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))},r=function(t){return l.call(t,(function(e,i){return t.indexOf(e)==i}))},I.fragment=function(e,n,s){var r,a,l;return f.test(e)&&(r=i(h.createElement(RegExp.$1))),r||(e.replace&&(e=e.replace(m,"<$1></$2>")),n===t&&(n=p.test(e)&&RegExp.$1),n in w||(n="*"),(l=w[n]).innerHTML=""+e,r=i.each(o.call(l.childNodes),(function(){l.removeChild(this)}))),C(s)&&(a=i(r),i.each(s,(function(t,e){g.indexOf(t)>-1?a[t](e):a.attr(t,e)}))),r},I.Z=function(t,e){return(t=t||[]).__proto__=i.fn,t.selector=e||"",t},I.isZ=function(t){return t instanceof I.Z},I.init=function(e,n){var s,r;if(!e)return I.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&p.test(e))s=I.fragment(e,RegExp.$1,n),e=null;else{if(n!==t)return i(n).find(e);s=I.qsa(h,e)}else{if(E(e))return i(h).ready(e);if(I.isZ(e))return e;if(D(e))r=e,s=l.call(r,(function(t){return null!=t}));else if(B(e))s=[e],e=null;else if(p.test(e))s=I.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==t)return i(n).find(e);s=I.qsa(h,e)}}return I.Z(s,e)},(i=function(t,e){return I.init(t,e)}).extend=function(t){var e,i=o.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach((function(i){z(t,i,e)})),t},I.qsa=function(t,e){var i,n="#"==e[0],s=!n&&"."==e[0],r=n||s?e.slice(1):e,a=T.test(r);return N(t)&&a&&n?(i=t.getElementById(r))?[i]:[]:1!==t.nodeType&&9!==t.nodeType?[]:o.call(a&&!n?s?t.getElementsByClassName(r):t.getElementsByTagName(e):t.querySelectorAll(e))},i.contains=function(t,e){return t!==e&&t.contains(e)},i.type=L,i.isFunction=E,i.isWindow=O,i.isArray=D,i.isPlainObject=C,i.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},i.inArray=function(t,e,i){return a.indexOf.call(e,t,i)},i.camelCase=s,i.trim=function(t){return null==t?"":String.prototype.trim.call(t)},i.uuid=0,i.support={},i.expr={},i.map=function(t,e){var n,s,r,a,o=[];if(F(t))for(s=0;s<t.length;s++)null!=(n=e(t[s],s))&&o.push(n);else for(r in t)null!=(n=e(t[r],r))&&o.push(n);return(a=o).length>0?i.fn.concat.apply([],a):a},i.each=function(t,e){var i,n;if(F(t)){for(i=0;i<t.length;i++)if(!1===e.call(t[i],i,t[i]))return t}else for(n in t)if(!1===e.call(t[n],n,t[n]))return t;return t},i.grep=function(t,e){return l.call(t,e)},window.JSON&&(i.parseJSON=JSON.parse),i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(t,e){S["[object "+e+"]"]=e.toLowerCase()})),i.fn={forEach:a.forEach,reduce:a.reduce,push:a.push,sort:a.sort,indexOf:a.indexOf,concat:a.concat,map:function(t){return i(i.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return i(o.apply(this,arguments))},ready:function(t){return x.test(h.readyState)&&h.body?t(i):h.addEventListener("DOMContentLoaded",(function(){t(i)}),!1),this},get:function(e){return e===t?o.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(t){return a.every.call(this,(function(e,i){return!1!==t.call(e,i,e)})),this},filter:function(t){return E(t)?this.not(this.not(t)):i(l.call(this,(function(e){return I.matches(e,t)})))},add:function(t,e){return i(r(this.concat(i(t,e))))},is:function(t){return this.length>0&&I.matches(this[0],t)},not:function(e){var n=[];if(E(e)&&e.call!==t)this.each((function(t){e.call(this,t)||n.push(this)}));else{var s="string"==typeof e?this.filter(e):F(e)&&E(e.item)?o.call(e):i(e);this.forEach((function(t){s.indexOf(t)<0&&n.push(t)}))}return i(n)},has:function(t){return this.filter((function(){return B(t)?i.contains(this,t):i(this).find(t).size()}))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!B(t)?t:i(t)},last:function(){var t=this[this.length-1];return t&&!B(t)?t:i(t)},find:function(t){var e=this;return"object"==typeof t?i(t).filter((function(){var t=this;return a.some.call(e,(function(e){return i.contains(e,t)}))})):1==this.length?i(I.qsa(this[0],t)):this.map((function(){return I.qsa(this,t)}))},closest:function(t,e){var n=this[0],s=!1;for("object"==typeof t&&(s=i(t));n&&!(s?s.indexOf(n)>=0:I.matches(n,t));)n=n!==e&&!N(n)&&n.parentNode;return i(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=i.map(n,(function(t){if((t=t.parentNode)&&!N(t)&&e.indexOf(t)<0)return e.push(t),t}));return V(e,t)},parent:function(t){return V(r(this.pluck("parentNode")),t)},children:function(t){return V(this.map((function(){return P(this)})),t)},contents:function(){return this.map((function(){return o.call(this.childNodes)}))},siblings:function(t){return V(this.map((function(t,e){return l.call(P(e.parentNode),(function(t){return t!==e}))})),t)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(t){return i.map(this,(function(e){return e[t]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=function(t){var e,i;return c[t]||(e=h.createElement(t),h.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),c[t]=i),c[t]}(this.nodeName))}))},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=E(t);if(this[0]&&!e)var n=i(t).get(0),s=n.parentNode||this.length>1;return this.each((function(r){i(this).wrapAll(e?t.call(this,r):s?n.cloneNode(!0):n)}))},wrapAll:function(t){if(this[0]){var e;for(i(this[0]).before(t=i(t));(e=t.children()).length;)t=e.first();i(t).append(this)}return this},wrapInner:function(t){var e=E(t);return this.each((function(n){var s=i(this),r=s.contents(),a=e?t.call(this,n):t;r.length?r.wrapAll(a):s.append(a)}))},unwrap:function(){return this.parent().each((function(){i(this).replaceWith(i(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return this.each((function(){var n=i(this);(e===t?"none"==n.css("display"):e)?n.show():n.hide()}))},prev:function(t){return i(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return i(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each((function(e){var n=this.innerHTML;i(this).empty().append(H(this,t,e,n))}))},text:function(e){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each((function(){this.textContent=e===t?"":""+e}))},attr:function(i,n){var s;return"string"==typeof i&&n===t?0==this.length||1!==this[0].nodeType?t:"value"==i&&"INPUT"==this[0].nodeName?this.val():!(s=this[0].getAttribute(i))&&i in this[0]?this[0][i]:s:this.each((function(t){if(1===this.nodeType)if(B(i))for(e in i)q(this,e,i[e]);else q(this,i,H(this,n,t,this.getAttribute(i)))}))},removeAttr:function(t){return this.each((function(){1===this.nodeType&&q(this,t)}))},prop:function(e,i){return e=A[e]||e,i===t?this[0]&&this[0][e]:this.each((function(t){this[e]=H(this,i,t,this[e])}))},data:function(e,i){var n=this.attr("data-"+e.replace(y,"-$1").toLowerCase(),i);return null!==n?Y(n):t},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?i(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value):this.each((function(e){this.value=H(this,t,e,this.value)}))},offset:function(t){if(t)return this.each((function(e){var n=i(this),s=H(this,t,e,n.offset()),r=n.offsetParent().offset(),a={top:s.top-r.top,left:s.left-r.left};"static"==n.css("position")&&(a.position="relative"),n.css(a)}));if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,n){if(arguments.length<2){var r=this[0],a=getComputedStyle(r,"");if(!r)return;if("string"==typeof t)return r.style[s(t)]||a.getPropertyValue(t);if(D(t)){var o={};return i.each(D(t)?t:[t],(function(t,e){o[e]=r.style[s(e)]||a.getPropertyValue(e)})),o}}var l="";if("string"==L(t))n||0===n?l=R(t)+":"+j(t,n):this.each((function(){this.style.removeProperty(R(t))}));else for(e in t)t[e]||0===t[e]?l+=R(e)+":"+j(e,t[e])+";":this.each((function(){this.style.removeProperty(R(e))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(t){return t?this.indexOf(i(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&a.some.call(this,(function(t){return this.test(W(t))}),U(t))},addClass:function(t){return t?this.each((function(e){n=[];var s=W(this);H(this,t,e,s).split(/\s+/g).forEach((function(t){i(this).hasClass(t)||n.push(t)}),this),n.length&&W(this,s+(s?" ":"")+n.join(" "))})):this},removeClass:function(e){return this.each((function(i){if(e===t)return W(this,"");n=W(this),H(this,e,i,n).split(/\s+/g).forEach((function(t){n=n.replace(U(t)," ")})),W(this,n.trim())}))},toggleClass:function(e,n){return e?this.each((function(s){var r=i(this);H(this,e,s,W(this)).split(/\s+/g).forEach((function(e){(n===t?!r.hasClass(e):n)?r.addClass(e):r.removeClass(e)}))})):this},scrollTop:function(e){if(this.length){var i="scrollTop"in this[0];return e===t?i?this[0].scrollTop:this[0].pageYOffset:this.each(i?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var i="scrollLeft"in this[0];return e===t?i?this[0].scrollLeft:this[0].pageXOffset:this.each(i?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),s=_.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(i(t).css("margin-top"))||0,n.left-=parseFloat(i(t).css("margin-left"))||0,s.top+=parseFloat(i(e[0]).css("border-top-width"))||0,s.left+=parseFloat(i(e[0]).css("border-left-width"))||0,{top:n.top-s.top,left:n.left-s.left}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent||h.body;t&&!_.test(t.nodeName)&&"static"==i(t).css("position");)t=t.offsetParent;return t}))}},i.fn.detach=i.fn.remove,["width","height"].forEach((function(e){var n=e.replace(/./,(function(t){return t[0].toUpperCase()}));i.fn[e]=function(s){var r,a=this[0];return s===t?O(a)?a["inner"+n]:N(a)?a.documentElement["scroll"+n]:(r=this.offset())&&r[e]:this.each((function(t){(a=i(this)).css(e,H(this,s,t,a[e]()))}))}})),["after","prepend","before","append"].forEach((function(t,e){var n=e%2;i.fn[t]=function(){var t,s,r=i.map(arguments,(function(e){return"object"==(t=L(e))||"array"==t||null==e?e:I.fragment(e)})),a=this.length>1;return r.length<1?this:this.each((function(t,o){s=n?o:o.parentNode,o=0==e?o.nextSibling:1==e?o.firstChild:2==e?o:null,r.forEach((function(t){if(a)t=t.cloneNode(!0);else if(!s)return i(t).remove();$(s.insertBefore(t,o),(function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)}))}))}))},i.fn[n?t+"To":"insert"+(e?"Before":"After")]=function(e){return i(e)[t](this),this}})),I.Z.prototype=i.fn,I.uniq=r,I.deserializeValue=Y,i.zepto=I,i}();window.Zepto=po,void 0===window.$&&(window.$=po),function(t){t.zepto.qsa;var e,i=1,n=Array.prototype.slice,s=t.isFunction,r=function(t){return"string"==typeof t},a={},o={},l="onfocusin"in window,h={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function d(t){return t._zid||(t._zid=i++)}function u(t,e,i,n){if((e=p(e)).ns)var s=(r=e.ns,new RegExp("(?:^| )"+r.replace(" "," .* ?")+"(?: |$)"));var r;return(a[d(t)]||[]).filter((function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||s.test(t.ns))&&(!i||d(t.fn)===d(i))&&(!n||t.sel==n)}))}function p(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function f(t,e){return t.del&&!l&&t.e in h||!!e}function m(t){return c[t]||l&&h[t]||t}function _(i,n,s,r,o,l,h){var u=d(i),_=a[u]||(a[u]=[]);n.split(/\s/).forEach((function(n){if("ready"==n)return t(document).ready(s);var a=p(n);a.fn=s,a.sel=o,a.e in c&&(s=function(e){var i=e.relatedTarget;if(!i||i!==this&&!t.contains(this,i))return a.fn.apply(this,arguments)}),a.del=l;var d=l||s;a.proxy=function(t){if(!(t=x(t)).isImmediatePropagationStopped()){t.data=r;var n=d.apply(i,t._args==e?[t]:[t].concat(t._args));return!1===n&&(t.preventDefault(),t.stopPropagation()),n}},a.i=_.length,_.push(a),"addEventListener"in i&&i.addEventListener(m(a.e),a.proxy,f(a,h))}))}function y(t,e,i,n,s){var r=d(t);(e||"").split(/\s/).forEach((function(e){u(t,e,i,n).forEach((function(e){delete a[r][e.i],"removeEventListener"in t&&t.removeEventListener(m(e.e),e.proxy,f(e,s))}))}))}o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",t.event={add:_,remove:y},t.proxy=function(e,i){if(s(e)){var n=function(){return e.apply(i,arguments)};return n._zid=d(e),n}if(r(i))return t.proxy(e[i],e);throw new TypeError("expected function")},t.fn.bind=function(t,e,i){return this.on(t,e,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var g=function(){return!0},b=function(){return!1},v=/^([A-Z]|returnValue$|layer[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function x(i,n){return!n&&i.isDefaultPrevented||(n||(n=i),t.each(w,(function(t,e){var s=n[t];i[t]=function(){return this[e]=g,s&&s.apply(n,arguments)},i[e]=b})),(n.defaultPrevented!==e?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(i.isDefaultPrevented=g)),i}function T(t){var i,n={originalEvent:t};for(i in t)v.test(i)||t[i]===e||(n[i]=t[i]);return x(n,t)}t.fn.delegate=function(t,e,i){return this.on(e,t,i)},t.fn.undelegate=function(t,e,i){return this.off(e,t,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(i,a,o,l,h){var c,d,u=this;return i&&!r(i)?(t.each(i,(function(t,e){u.on(t,a,o,e,h)})),u):(r(a)||s(l)||!1===l||(l=o,o=a,a=e),(s(o)||!1===o)&&(l=o,o=e),!1===l&&(l=b),u.each((function(e,s){h&&(c=function(t){return y(s,t.type,l),l.apply(this,arguments)}),a&&(d=function(e){var i,r=t(e.target).closest(a,s).get(0);if(r&&r!==s)return i=t.extend(T(e),{currentTarget:r,liveFired:s}),(c||l).apply(r,[i].concat(n.call(arguments,1)))}),_(s,i,l,o,a,d||c)})))},t.fn.off=function(i,n,a){var o=this;return i&&!r(i)?(t.each(i,(function(t,e){o.off(t,n,e)})),o):(r(n)||s(a)||!1===a||(a=n,n=e),!1===a&&(a=b),o.each((function(){y(this,i,a,n)})))},t.fn.trigger=function(e,i){return(e=r(e)||t.isPlainObject(e)?t.Event(e):x(e))._args=i,this.each((function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)}))},t.fn.triggerHandler=function(e,i){var n,s;return this.each((function(a,o){(n=T(r(e)?t.Event(e):e))._args=i,n.target=o,t.each(u(o,e.type||e),(function(t,e){if(s=e.proxy(n),n.isImmediatePropagationStopped())return!1}))})),s},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}})),["focus","blur"].forEach((function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each((function(){try{this[e]()}catch(t){}})),this}})),t.Event=function(t,e){r(t)||(t=(e=t).type);var i=document.createEvent(o[t]||"Events"),n=!0;if(e)for(var s in e)"bubbles"==s?n=!!e[s]:i[s]=e[s];return i.initEvent(t,n,!0),x(i)}}(po),function(t){var e,i,n=0,s=window.document,r=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,a=/^(?:text|application)\/javascript/i,o=/^(?:text|application)\/xml/i,l="application/json",h="text/html",c=/^\s*$/;function d(e,i,n,r){if(e.global)return function(e,i,n){var s=t.Event(i);return t(e).trigger(s,n),!s.isDefaultPrevented()}(i||s,n,r)}function u(t,e){var i=e.context;if(!1===e.beforeSend.call(i,t,e)||!1===d(e,i,"ajaxBeforeSend",[t,e]))return!1;d(e,i,"ajaxSend",[t,e])}function p(t,e,i,n){var s=i.context,r="success";i.success.call(s,t,r,e),n&&n.resolveWith(s,[t,r,e]),d(i,s,"ajaxSuccess",[e,i,t]),m(r,e,i)}function f(t,e,i,n,s){var r=n.context;n.error.call(r,i,e,t),s&&s.rejectWith(r,[i,e,t]),d(n,r,"ajaxError",[i,n,t||e]),m(e,i,n)}function m(e,i,n){var s=n.context;n.complete.call(s,i,e),d(n,s,"ajaxComplete",[i,n]),function(e){e.global&&! --t.active&&d(e,null,"ajaxStop")}(n)}function _(){}function y(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function g(e,i,n,s){var r=!t.isFunction(i);return{url:e,data:r?i:void 0,success:r?t.isFunction(n)?n:void 0:i,dataType:r&&s||n}}t.active=0,t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var r,a,o=e.jsonpCallback,l=(t.isFunction(o)?o():o)||"jsonp"+ ++n,h=s.createElement("script"),c=window[l],d=function(e){t(h).triggerHandler("error",e||"abort")},m={abort:d};return i&&i.promise(m),t(h).on("load error",(function(n,s){clearTimeout(a),t(h).off().remove(),"error"!=n.type&&r?p(r[0],m,e,i):f(null,s||"error",m,e,i),window[l]=c,r&&t.isFunction(c)&&c(r[0]),c=r=void 0})),!1===u(m,e)?(d("abort"),m):(window[l]=function(){r=arguments},h.src=e.url.replace(/\?(.+)=\?/,"?$1="+l),s.head.appendChild(h),e.timeout>0&&(a=setTimeout((function(){d("timeout")}),e.timeout)),m)},t.ajaxSettings={type:"GET",beforeSend:_,success:_,error:_,complete:_,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:h,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(n){var s=t.extend({},n||{}),r=t.Deferred&&t.Deferred();for(e in t.ajaxSettings)void 0===s[e]&&(s[e]=t.ajaxSettings[e]);!function(e){e.global&&0===t.active++&&d(e,null,"ajaxStart")}(s),s.crossDomain||(s.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(s.url)&&RegExp.$2!=window.location.host),s.url||(s.url=window.location.toString()),function(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=y(e.url,e.data),e.data=void 0)}(s),!1===s.cache&&(s.url=y(s.url,"_="+Date.now()));var m=s.dataType,g=/\?.+=\?/.test(s.url);if("jsonp"==m||g)return g||(s.url=y(s.url,s.jsonp?s.jsonp+"=?":!1===s.jsonp?"":"callback=?")),t.ajaxJSONP(s,r);var b,v=s.accepts[m],w={},x=function(t,e){w[t.toLowerCase()]=[t,e]},T=/^([\w-]+:)\/\//.test(s.url)?RegExp.$1:window.location.protocol,S=s.xhr(),k=S.setRequestHeader;if(r&&r.promise(S),s.crossDomain||x("X-Requested-With","XMLHttpRequest"),x("Accept",v||"*/*"),(v=s.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),S.overrideMimeType&&S.overrideMimeType(v)),(s.contentType||!1!==s.contentType&&s.data&&"GET"!=s.type.toUpperCase())&&x("Content-Type",s.contentType||"application/x-www-form-urlencoded"),s.headers)for(i in s.headers)x(i,s.headers[i]);if(S.setRequestHeader=x,S.onreadystatechange=function(){if(4==S.readyState){S.onreadystatechange=_,clearTimeout(b);var e,i=!1;if(S.status>=200&&S.status<300||304==S.status||0==S.status&&"file:"==T){m=m||function(t){return t&&(t=t.split(";",2)[0]),t&&(t==h?"html":t==l?"json":a.test(t)?"script":o.test(t)&&"xml")||"text"}(s.mimeType||S.getResponseHeader("content-type")),e=S.responseText;try{"script"==m?(0,eval)(e):"xml"==m?e=S.responseXML:"json"==m&&(e=c.test(e)?null:t.parseJSON(e))}catch(n){i=n}i?f(i,"parsererror",S,s,r):p(e,S,s,r)}else f(S.statusText||null,S.status?"error":"abort",S,s,r)}},!1===u(S,s))return S.abort(),f(null,"abort",S,s,r),S;if(s.xhrFields)for(i in s.xhrFields)S[i]=s.xhrFields[i];var I=!("async"in s)||s.async;for(i in S.open(s.type,s.url,I,s.username,s.password),w)k.apply(S,w[i]);return s.timeout>0&&(b=setTimeout((function(){S.onreadystatechange=_,S.abort(),f(null,"timeout",S,s,r)}),s.timeout)),S.send(s.data?s.data:null),S},t.get=function(e,i,n,s){return t.ajax(g.apply(null,arguments))},t.post=function(e,i,n,s){var r=g.apply(null,arguments);return r.type="POST",t.ajax(r)},t.getJSON=function(e,i,n){var s=g.apply(null,arguments);return s.dataType="json",t.ajax(s)},t.fetchJSON=function(t){var e=new XMLHttpRequest;return new Promise((function(i,n){e.onreadystatechange=function(){try{if(4!==e.readyState)return;if(e.status>=200&&e.status<300){var s=JSON.parse(e.responseText);i(s)}else n({status:e.status,statusText:e.statusText})}catch(r){n({status:400,statusText:"Error fetching JSON from ".concat(t,": ").concat(r)})}},e.open("GET",t,!0),e.send()}))},t.fn.load=function(e,i,n){if(!this.length)return this;var s,a=this,o=e.split(/\s/),l=g(e,i,n),h=l.success;return o.length>1&&(l.url=o[0],s=o[1]),l.success=function(e){a.html(s?t("<div>").html(e.replace(r,"")).find(s):e),h&&h.apply(a,arguments)},t.ajax(l),this};var b=encodeURIComponent;function v(e,i,n,s){var r,a=t.isArray(i),o=t.isPlainObject(i);t.each(i,(function(i,l){r=t.type(l),s&&(i=n?s:s+"["+(o||"object"==r||"array"==r?i:"")+"]"),!s&&a?e.add(l.name,l.value):"array"==r||!n&&"object"==r?v(e,l,n,i):e.add(i,l)}))}t.param=function(t,e){var i=[];return i.add=function(t,e){this.push(b(t)+"="+b(e))},v(i,t,e),i.join("&").replace(/%20/g,"+")}}(po),(co=po).fn.serializeArray=function(){var t,e=[];return co([].slice.call(this.get(0).elements)).each((function(){var i=(t=co(this)).attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&e.push({name:t.attr("name"),value:t.val()})})),e},co.fn.serialize=function(){var t=[];return this.serializeArray().forEach((function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))})),t.join("&")},co.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var e=co.Event("submit");this.eq(0).trigger(e),e.isDefaultPrevented()||this.get(0).submit()}return this},function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,i){return e=e||[],t.extend(e,t.fn),e.selector=i||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(i){var e=getComputedStyle;window.getComputedStyle=function(t,n){try{return e(t,n)}catch(i){return null}}}}(po);const fo=po.getJSON,mo=po.ajax,_o=po.fetchJSON,yo=[["millisecond",1,function(t){}],["second",1e3,function(t){t.setMilliseconds(0)}],["minute",6e4,function(t){t.setSeconds(0)}],["hour",36e5,function(t){t.setMinutes(0)}],["day",864e5,function(t){t.setHours(0)}],["month",2592e6,function(t){t.setDate(1)}],["year",31536e6,function(t){t.setMonth(0)}],["decade",31536e7,function(t){var e=t.getFullYear();t.setFullYear(e-e%10)}],["century",31536e8,function(t){var e=t.getFullYear();t.setFullYear(e-e%100)}],["millennium",31536e9,function(t){var e=t.getFullYear();t.setFullYear(e-e%1e3)}]],go=["millisecond","second","minute","hour","day","month","year"],bo=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,vo=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;const wo={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},xo=so.extend({initialize:function(t,e,i){"number"==typeof t?this.data={format:"yyyy mmmm",date_obj:new Date(t)}:Date==t.constructor?this.data={format:"yyyy mmmm",date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,i)},setDateFormat:function(t){this.data.format=t},getDisplayDate:function(t,e){if(this.data.display_date)return this.data.display_date;t||(t=No.fallback),t.constructor!=No&&(Ca("First argument to getDisplayDate must be type Language"),t=No.fallback);var i=e||this.data.format;return t.formatDate(this.data.date_obj,i)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Da("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(t.data.date_obj):this.data.date_obj<t.data.date_obj},isAfter:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Da("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(t.data.date_obj):this.data.date_obj>t.data.date_obj},floor:function(t){for(var e=new Date(this.data.date_obj.getTime()),i=0;i<yo.length;i++)if(yo[i][2](e),yo[i][0]==t)return new xo(e);throw new Da("invalid_scale_err",t)},_getDateData:function(){var t={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};for(var e in Oa(t,this.data),go){if(!Ua(t[go[e]]).match(/^-?\d*$/))throw new Da("invalid_date_err",go[e]+" = '"+t[go[e]]+"'");var i=parseInt(t[go[e]]);isNaN(i)&&(i=4==e||5==e?1:0),t[go[e]]=i}return t.month>0&&t.month<=12&&(t.month=t.month-1),t},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond),this.data.date_obj.getFullYear()!=t.year&&this.data.date_obj.setFullYear(t.year)},findBestFormat:function(t){for(var e=go,i=0;i<e.length;i++)if(this.data[e[i]])return t?t in wo||(t="short"):t="base",wo[t][e[i]];return""},_setFormat:function(t,e){t?this.data.format=t:this.data.format||(this.data.format=this.findBestFormat()),e?this.data.format_short=e:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function To(t){if(t.match(bo)){var e=t.match(bo).slice(1),i={year:e[0].replace("+","")};return e[1]&&(i.month=e[1].replace("-","")),e[2]&&(i.day=e[2].replace("-","")),i}if(t.match(vo))return cls.parseISODate(t);if(t.match(/^\-?\d+$/))return{year:t};var n={};if(t.match(/\d+\/\d+\/\d+/)){var s=t.match(/\d+\/\d+\/\d+/)[0];t=Ua(t.replace(s,""));var r=s.split("/");n.month=r[0],n.day=r[1],n.year=r[2]}if(t.match(/\d+\/\d+/)){s=t.match(/\d+\/\d+/)[0];t=Ua(t.replace(s,""));r=s.split("/");n.month=r[0],n.year=r[1]}if(t.match(":")){var a=t.split(":");if(n.hour=a[0],n.minute=a[1],a[2]){let t=a[2].split(".");n.second=t[0],n.millisecond=t[1]}}return n}const So=so.extend({initialize:function(t){if(this.year=parseInt(t),isNaN(this.year))throw new Da("invalid_year_err",t)},isBefore:function(t){return this.year<t.year},isAfter:function(t){return this.year>t.year},getTime:function(){return this.year}}),ko=1e6,Io=10*ko,Mo=10*Io,Ao=10*Mo;function Do(t){return function(e){var i=e.getTime();return new So(Math.floor(i/t)*t)}}const Lo=[["year",1,new Do(1)],["decade",10,new Do(10)],["century",100,new Do(100)],["millennium",1e3,new Do(1e3)],["age",ko,new Do(ko)],["epoch",Io,new Do(Io)],["era",Mo,new Do(Mo)],["eon",Ao,new Do(Ao)]],Eo=xo.extend({initialize:function(t,e,i){So==t.constructor?this.data={date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,i)},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new So(t.year)},floor:function(t){for(var e=0;e<Lo.length;e++)if(Lo[e][0]==t){var i=Lo[e][2](this.data.date_obj);return new Eo(i)}throw new Da("invalid_scale_err",t)},getFullYear:function(){return this.data.date_obj.getTime()}}),Oo=new RegExp(/\$\{(.+?)\}/g);class No{constructor(t,e){for(let s in Fo.en)this[s]=Fo.en[s];if(t&&"string"==typeof t&&"en"!=t){var i=t;if(!(i in Fo)){console.log("Expected language ".concat(i," to be cached. Did you call the constructor directly?"));var n=Bo(i,e);_o(n).then((t=>{Fo[i]=t})).catch((t=>{console.log("Error loading language [".concat(n,"] ").concat(t.statusText," [").concat(t.status,"]"))}))}Oa(this,Fo[i])}}mergeData(t){for(k in Fo.en)t[k]&&("object"==typeof this[k]?Oa(t[k],this[k]):this[k]=t[k])}formatBigYear(t,e){var i=t.year,n=this.bigdateformats[e]||this.bigdateformats.fallback;if(n){for(var s=0;s<n.length;s++){var r=n[s];if(Math.abs(i/r[0])>1)return Co(Math.abs(i/r[0]),r[1])}return i.toString()}return Ca("Language file dateformats missing cosmological. Falling back."),Co(i,e)}_(t,e){let i=this.messages[t]||No.fallback.messages[t]||t;if(i.match(Oo)){if(!e)throw new Da("template_message_without_context");for(let t of i.matchAll(Oo)){if(!(t[1]in e))throw new Da("template_message_without_context");i=i.replace(t[0],e[t[1]])}}return i}formatDate(t,e){return t.constructor==Date?this.formatJSDate(t,e):t.constructor==So?this.formatBigYear(t,e):t.data&&t.data.date_obj?this.formatDate(t.data.date_obj,e):(Ca("Unfamiliar date presented for formatting"),t.toString())}formatJSDate(t,e){var i=this,n=function(t,e){var n=i.period_labels[t];if(n)t=e<12?n[0]:n[1];return"<span class='tl-timeaxis-timesuffix'>"+t+"</span>"};e||(e="full");var s=this.dateformats[e]||No.fallback.dateformats[e];s||(s=e);var r="get",a=t[r+"Date"](),o=t[r+"Day"](),l=t[r+"Month"](),h=t[r+"FullYear"](),c=t[r+"Hours"](),d=t[r+"Minutes"](),u=t[r+"Seconds"](),p=t[r+"Milliseconds"](),f=t.getTimezoneOffset(),m={d:a,dd:Fa(a),ddd:this.date.day_abbr[o],dddd:this.date.day[o],m:l+1,mm:Fa(l+1),mmm:this.date.month_abbr[l],mmmm:this.date.month[l],yy:String(h).slice(2),yyyy:h<0&&this.has_negative_year_modifier()?Math.abs(h):h,h:c%12||12,hh:Fa(c%12||12),H:c,HH:Fa(c),M:d,MM:Fa(d),s:u,ss:Fa(u),l:Fa(p,3),L:Fa(p>99?Math.round(p/10):p),t:n("t",c),tt:n("tt",c),T:n("T",c),TT:n("TT",c),Z:(String(t).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),o:(f>0?"-":"+")+Fa(100*Math.floor(Math.abs(f)/60)+Math.abs(f)%60,4),S:["th","st","nd","rd"][a%10>3?0:(a%100-a%10!=10)*a%10]},_=s.replace(No.DATE_FORMAT_TOKENS,(function(t){return t in m?m[t]:t.slice(1,t.length-1)}));return this._applyEra(_,h)}has_negative_year_modifier(){return Boolean(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(t,e){var i=e<0?this.era_labels.negative_year:this.era_labels.positive_year,n="";return i.prefix&&(n+="<span>"+i.prefix+"</span> "),n+=t,i.suffix&&(n+=" <span>"+i.suffix+"</span>"),n}}function Bo(t,e){if(/\.json$/.test(t))var i=t;else{var n="/locale/"+t+".json";/\/$/.test(e)&&(n=n.substr(1));i=e+n}return i}function Co(t,e){if(e.match(/%(\.(\d+))?f/)){var i=e.match(/%(\.(\d+))?f/),n=i[0];return i[2]&&(t=t.toFixed(i[2])),e.replace(n,t)}return e}No.fallback={messages:{}},No.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var Fo={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option value\u2014must be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let Ro=new No;No.fallback=Ro;class Uo{setLanguage(t){this.language=t}getLanguage(){if(this.language){if("object"==typeof this.language)return this.language;Ca("I18NMixins.getLanguage: this.language should be object, but is ".concat(typeof this.language))}return Ro}_(t,e){return this.getLanguage()._(t,e)}}class jo{constructor(t,e,i){i&&this.setLanguage(i),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=t,Oa(this.options,e),this._el.container=ka("div",this.options.message_class),t&&(t.appendChild(this._el.container),this._el.parent=t),this.animator={},this._initLayout(),this._initEvents()}updateMessage(t){this._el.message.innerHTML=t||this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(t,e){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=ka("div","tl-message-container",this._el.container),this._el.loading_icon=ka("div",this.options.message_icon_class,this._el.message_container),this._el.message=ka("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){uo.addListener(this._el.container,"click",this._onMouseClick,this),uo.addListener(this,"removed",this._onRemove,this)}}function Po(t,e){e=e||"start_date";t.sort((function(t,i){return t[e].isBefore(i[e])?-1:t[e].isAfter(i[e])?1:0}))}function zo(t){var e={hour:null,minute:null,second:null,millisecond:null},i=null,n=t.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);n&&(i=Ua(n[0]),t=Ua(t.substring(0,t.lastIndexOf(i))));var s=[],r=t.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(r?s=r.slice(1):1==(s=t.split(":")).length&&(s=t.split(".")),s.length>4)throw new Da("invalid_separator_error");let a=s[0];if(e.hour=parseInt(a),i&&"p"==i.toLowerCase()[0]&&12!=e.hour?e.hour+=12:i&&"a"==i.toLowerCase()[0]&&12==e.hour&&(e.hour=0),isNaN(e.hour)||e.hour<0||e.hour>23)throw new Da("invalid_hour_err",a);if(s.length>1){let t=s[1];if(e.minute=parseInt(t),isNaN(e.minute))throw new Da("invalid_minute_err",t)}if(s.length>2){var o=s[2].split(/[\.,]/);if((s=o.concat(s.slice(3))).length>2)throw new Da("invalid_second_fractional_err");if(e.second=parseInt(s[0]),isNaN(e.second))throw new Da("invalid_second_err",s[0]);if(2==s.length){var l=parseInt(s[1]);if(isNaN(l))throw new Da("invalid_fractional_err",s[1]);e.millisecond=100*l}}return e}ja(jo,Uo,ro,lo);const Vo=new RegExp("(^-?\\d+$|^$)");function Ho(t){try{return Object.keys(t).forEach((e=>{let i=t[e];if(i&&i.match&&!i.match(Vo))throw"invalid value ".concat(i," for ").concat(e)})),!0}catch(e){return!1}}const qo={human:xo,cosmological:Eo};var Wo=i(213),Yo=i.n(Wo);const $o={text:["headline","text"],media:["caption","credit"]},Go={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};function Zo(t,e,i){Object.keys(i).forEach((n=>{var s="slide"==n?t:t[n];s&&i[n].forEach((t=>{"undefined"!=typeof s[t]&&(s[t]=e(s[t]))}))}))}function Jo(t){return Yo().sanitize(t,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}Yo().addHook("afterSanitizeAttributes",(function(t){if("A"==t.nodeName&&"href"in t){"target"in t.attributes||t.setAttribute("target","_blank");let e=t.attributes.rel;e?-1==e.value.indexOf("noopener")&&t.setAttribute("rel","noopener ".concat(e.value)):t.setAttribute("rel","noopener")}}));class Ko{constructor(t){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},"object"===typeof t&&t.events){if(this.scale=t.scale,this.events=[],this._ensureValidScale(t.events),t.title){var e=this._assignID(t.title);this._tidyFields(t.title),this.title=t.title,this.event_dict[e]=this.title}for(var i=0;i<t.events.length;i++)try{this.addEvent(t.events[i],!0)}catch(n){this.logError(n)}t.eras&&t.eras.forEach(((t,e)=>{try{this.addEra(t)}catch(n){this.logError("Era "+e+": "+n)}})),Po(this.events),Po(this.eras)}}logError(t){Ca("logError: ".concat(t)),this.messages.errors.push(t)}getErrors(t){return t?this.messages.errors.join(t):this.messages.errors}validate(){"undefined"!=typeof this.events&&"undefined"!=typeof this.events.length&&0!=this.events.length||this.logError("Timeline configuration has no events.");for(var t=0;t<this.eras.length;t++){var e;if("undefined"==typeof this.eras[t].start_date||"undefined"==typeof this.eras[t].end_date)e=this.eras[t].headline?this.eras[t].headline:"era "+(t+1),this.logError("All eras must have start and end dates. ["+e+"]")}}isValid(){return 0==this.messages.errors.length}addEvent(t,e){var i=this._assignID(t);return"undefined"==typeof t.start_date?(Ca("Missing start date, skipping event"),console.log(t),null):(this._processDates(t),this._tidyFields(t),this.events.push(t),this.event_dict[i]=t,e||Po(this.events),i)}addEra(t){var e=this._assignID(t);if("undefined"==typeof t.start_date)throw new Da("missing_start_date_err",e);this._processDates(t),this._tidyFields(t),this.eras.push({start_date:t.start_date,end_date:t.end_date,headline:t.text.headline})}_assignID(t){var e=t.unique_id;return Ua(e)||(e=t.text?Pa(t.text.headline):null),t.unique_id=function(t,e){if(e||(e=za(6)),!(e in t))return e;var i=e.match(/^(.+)(-\d+)?$/)[1],n=[];for(let r in t)r.match(/^(.+?)(-\d+)?$/)[1]==i&&n.push(r);e=i+"-"+(n.length+1);for(var s=n.length;-1!=n.indexOf(e);s++)e=i+"-"+s;return e}(this.event_dict,e),t.unique_id}_makeUniqueIdentifiers(t,e){for(var i=[t],n=0;n<e.length;n++)Ua(e[n].unique_id)&&(e[n].unique_id=Pa(e[n].unique_id),-1==i.indexOf(e[n].unique_id)?i.push(e[n].unique_id):e[n].unique_id="");if(i.length!=e.length+1)for(n=0;n<e.length;n++)if(!e[n].unique_id){var s=e[n].text?Pa(e[n].text.headline):null;s||(s=za(6)),-1!=i.indexOf(s)&&(s=s+"-"+n),i.push(s),e[n].unique_id=s}}_ensureValidScale(t){if(!this.scale){this.scale="human";for(var e=0;e<t.length;e++){if("cosmological"==t[e].scale){this.scale="cosmological";break}if(t[e].start_date&&"undefined"!=typeof t[e].start_date.year){var i=new Eo(t[e].start_date).data.date_obj.year;if(i<-271820||i>275759){this.scale="cosmological";break}}}Ca("Determining scale dynamically: ".concat(this.scale))}qo[this.scale]||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(t){var e=qo[this.scale];if(!(t.start_date instanceof e)){var i=t.start_date;if(t.start_date=new e(i),"undefined"!=typeof t.end_date&&!(t.end_date instanceof e)){var n=t.end_date,s=!0;for(let t in i)s=s&&i[t]==n[t];s?(Ca("End date same as start date is redundant; dropping end date"),delete t.end_date):t.end_date=new e(n)}}}getEarliestDate(){var t=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(t)?this.eras[0].start_date:t}getLatestDate(){for(var t=[],e=0;e<this.events.length;e++)this.events[e].end_date?t.push({date:this.events[e].end_date}):t.push({date:this.events[e].start_date});for(e=0;e<this.eras.length;e++)this.eras[e].end_date?t.push({date:this.eras[e].end_date}):t.push({date:this.eras[e].start_date});return Po(t,"date"),t.slice(-1)[0].date}_tidyFields(t){function e(t,e,i){i||(i=""),t.hasOwnProperty(e)||(t[e]=i)}t.group&&(t.group=Ua(t.group)),t.text||(t.text={}),e(t.text,"text"),e(t.text,"headline"),Zo(t,Jo,$o),Zo(t,Xa,Go)}}async function Xo(t){return new Promise(((e,i)=>{if(t.data){var n=Qo(tl(t.data,t),t);n.useMemoryStore=!0,e(n)}else t.url&&window.fetch(t.url,{mode:"cors"}).then((function(t){if(200==t.status)return t.text?t.text():t;"application/json"==t.headers.get("content-type")?t.text().then((t=>{i(JSON.parse(t))})):i({status_code:t.status,message:"Error fetching CSV: [".concat(t.status," ").concat(t.statusText,"]")})})).then((function(i){if(i){var n=function(t,e){let i=Qo(tl(t,e)),n=[];return i.records.forEach((t=>{let e={};i.fields.forEach(((i,n)=>e[i]=t[n])),n.push(e)})),n}(i,t);n.useMemoryStore=!0,e(n)}})).catch((t=>{i({status_code:500,message:"Error fetching CSV: ".concat(t)})}))}))}function Qo(t,e){return!0!==(e=e||{}).noHeaderRow&&t.length>0?{fields:t[0].map(((t,e)=>t&&t.trim?t.trim():"untitled".concat(e))),records:t.slice(1)}:{records:t}}function tl(t,e){(!e||e&&!e.lineterminator)&&(t=function(t,e){if(e&&!e.lineterminator)return t.replace(/(\r\n|\n|\r)/gm,"\n");return t}(t,e));var i=function(t){var e={delimiter:",",doublequote:!0,lineterminator:"\n",quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var i in t)"trim"===i?e.skipinitialspace=t.trim:e[i.toLowerCase()]=t[i];return e}(e);t=function(t,e){return null==t?"":(e=e||"\n",t.charAt(t.length-e.length)!==e?t:t.substring(0,t.length-e.length))}(t,i.lineterminator);var n,s,r="",a=!1,o=!1,l="",h=[],c=[];for(s=function(t){return!0!==o&&(""===t?t=null:!0===i.skipinitialspace&&(t=t.trim())),t},n=0;n<t.length;n+=1)r=t.charAt(n),!1!==a||r!==i.delimiter&&r!==i.lineterminator?r!==i.quotechar?l+=r:a?t.charAt(n+1)===i.quotechar?(l+=i.quotechar,n+=1):a=!1:(a=!0,o=!0):(l=s(l),h.push(l),r===i.lineterminator&&(c.push(h),h=[]),l="",o=!1);return l=s(l),h.push(l),c.push(h),i.skipinitialrows&&(c=c.slice(i.skipinitialrows)),c}function el(t){if(t)return t.replace(/[\s,]+/g,"")}async function il(t,e){let i=[];t=function(t){if((t=t.trim()).match(/^[a-zA-Z0-9-_]+$/))return"https://docs.google.com/spreadsheets/d/".concat(t,"/pub?output=csv");if(t.startsWith("https://docs.google.com/spreadsheets/")){if(t.match(/\/pub\?output=csv$/))return t;let e=new URL(t),i=new URLSearchParams(e.search);i.set("output","csv"),i.get("gid")&&i.set("single","true"),e.search="?".concat(i.toString());let n=e.pathname.substr(0,e.pathname.lastIndexOf("/"));return e.pathname="".concat(n,"/pub"),e.toString()}throw new Da("invalid_url_err",t)}(t);await Xo({url:"".concat(e).concat(t)}).then((t=>{i=t})).catch((t=>{if("response_not_csv"==t.proxy_err_code)throw new Da("Timeline could not read the data for your timeline. Make sure you have published it to the web.");let e="undefined error";throw e=Array.isArray(t.message)?t.message.join("<br>"):String(t.message),new Da(e)}));let n={events:[],errors:[],warnings:[],eras:[]};return i.forEach(((t,e)=>{try{if(!function(t){var e=[];if(Object.keys)e=Object.keys(t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);for(var n=0;n<e.length;n++){var s=e[n];if(null!=t[s]&&"string"!=typeof t[s])return!1;if(0!=Ua(t[s]).length)return!1}return!0}(t)){let e=function(t){let e={};Object.keys(t).forEach((i=>{e[i]=Ua(t[i])}));var i,n={media:{caption:e["Media Caption"]||"",credit:e["Media Credit"]||"",url:e.Media||"",thumbnail:e["Media Thumbnail"]||""},text:{headline:e.Headline||"",text:e.Text||""},display_date:e["Display Date"]||"",group:e.Group||e.Tag||"",background:(i=e.Background,"string"!=typeof i?"":i.match(/^(https?:)?\/\/?/)?{url:i}:{color:i}),type:e.Type||""};if(Object.keys(e).includes("Start Date")||Object.keys(e).includes("End Date"))e["Start Date"]&&(n.start_date=To(e["Start Date"])),e["End Date"]&&(n.end_date=To(e["End Date"]));else{if(e.Year&&(n.start_date={year:el(e.Year),month:el(e.Month)||"",day:el(e.Day)||""}),e["End Year"]&&(n.end_date={year:el(e["End Year"])||"",month:el(e["End Month"])||"",day:el(e["End Day"])||""}),e.Time){if(!n.start_date)throw new Da("invalid_start_time_without_date");Oa(n.start_date,zo(e.Time))}if(e["End Time"]){if(!n.end_date)throw new Da("invalid_end_time_without_date");Oa(n.end_date,zo(e["End Time"]))}if(n.start_date&&!Ho(n.start_date))throw new Da("invalid_date_err");if(n.end_date&&!Ho(n.end_date))throw new Da("invalid_date_err")}return n}(t);!function(t,e){var i="event";"undefined"!=typeof t.type&&(i=t.type,delete t.type);"title"==i?e.title?(e.warnings.push("Multiple title slides detected."),e.events.push(t)):e.title=t:"era"==i?e.eras.push(t):e.events.push(t)}(e,n)}}catch(i){if(i.constructor==Da)n.errors.push(i);else{i.message&&(i=i.message);let s=t.Headline||e;n.errors.push(i+"[".concat(s,"]"))}}})),n}async function nl(t,e){let i=null,n={};if("function"==typeof e?i=e:"object"==typeof e&&(n=e,i=e.callback,"function"==typeof n.callback&&(i=n.callback)),!i)throw new Da("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,r,a=function(t){let e={key:null,worksheet:0};var i=/\bkey=([-_A-Za-z0-9]+)&?/i,n=/docs.google.com\/spreadsheets(.*?)\/d\//;if(t.match(i))e.key=t.match(i)[1];else if(t.match(n)){var s=t.search(n)+t.match(n)[0].length,r=t.substr(s);e.key=r.split("/")[0],t.match(/\?gid=(\d+)/)&&(e.worksheet=t.match(/\?gid=(\d+)/)[1])}else t.match(/^\b[-_A-Za-z0-9]+$/)&&(e.key=t);return e.key?e:null}(t);if(a){try{r=await async function(t,e){if(!e.sheets_proxy)throw new Da("Proxy option must be set to read data from Google");var i=await il(t,e.sheets_proxy);if(i)return i}(t,n)}catch(l){return s=new Ko,"NetworkError"==l.name?s.logError(new Da("network_err")):"TLError"==l.name?s.logError(l):s.logError(new Da("unknown_read_err",l.name)),void i(s)}if(s=new Ko(r),r.errors)for(var o=0;o<r.errors.length;o++)s.logError(r.errors[o]);i(s)}else mo({url:t,dataType:"json",success:function(t){try{s=new Ko(t)}catch(l){(s=new Ko).logError(l)}i(s)},error:function(t,e,n){if(s=new Ko,"parsererror"==e)n=new Da("invalid_url_err");else n=new Da("unknown_read_err",e);s.logError(n),i(s)}})}class sl{constructor(t){if(!t)throw new Da("axis_helper_no_options_err");this.scale=t.scale,this.minor=t.minor,this.major=t.major}getPixelsPerTick(t){return t*this.minor.factor}getMajorTicks(t){return this._getTicks(t,this.major)}getMinorTicks(t){return this._getTicks(t,this.minor)}_getTicks(t,e){for(var i=t._scaled_padding*e.factor,n=t._earliest-i,s=t._latest+i,r=[],a=n;a<s;a+=e.factor)r.push(t.getDateFromTime(a).floor(e.name));return{name:e.name,ticks:r}}}var rl={},al=function(t,e){rl[t]=[];for(var i=0;i<e.length-1;i++){var n=e[i],s=e[i+1];rl[t].push(new sl({scale:n[3],minor:{name:n[0],factor:n[1]},major:{name:s[0],factor:s[1]}}))}};al("human",yo),al("cosmological",Lo);const ol={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class ll{constructor(t,e){var i=t.events;this._scale=t.scale,e=Oa({display_width:500,screen_multiplier:3,max_rows:null},e),this._display_width=e.display_width,this._screen_multiplier=e.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=t.getEarliestDate().getTime(),this._latest=t.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(t)),this._average=this._span_in_millis/i.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=function(t,e){"number"!=typeof e&&(e=100);var i=t.getScale(),n=rl[i];if(!n)throw new Da("axis_helper_scale_err",i);for(var s=null,r=0;r<n.length;r++){var a=n[r],o=a.getPixelsPerTick(t._pixels_per_milli);if(o>e)return null==s||Math.abs(e-o)<Math.abs(e-o)?a:s;s=a}return n[n.length-1]}(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(i,e.max_rows)}_computeDefaultSpan(t){if("human"==t.scale){for(var e={},i=0;i<t.events.length;i++){var n=t.events[i].start_date.findBestFormat();e[n]=e[n]?e[n]+1:1}for(i=yo.length-1;i>=0;i--)if(e.hasOwnProperty(yo[i][0])){var s=yo[yo.length-1];return yo[i+1]&&(s=yo[i+1]),s[1]}return 31536e6}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(t){return(t-this._earliest)*this._pixels_per_milli}getPositionInfo(t){return this._positions[t]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(t){if("human"==this._scale)return new xo(t);if("cosmological"==this._scale)return new Eo(new So(t));throw new Da("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(t){for(var e=[],i=!1,n=0;n<t.length;n++)t[n].group&&(e.indexOf(t[n].group)<0?e.push(t[n].group):i=!0);return e.length&&i&&e.push(""),e}_computeRowInfo(t,e){for(var i=[],n=0,s=0;s<t.length;s++){var r=t[s],a=[];delete r.row;for(var o=0;o<i.length;o++)if(a.push(i[o].end-r.start),a[o]<=0){r.row=o,i[o]=r;break}if("undefined"==typeof r.row)if(null===e)r.row=i.length,i.push(r);else if(e>0)r.row=i.length,i.push(r),e--;else{var l=Math.min.apply(null,a),h=a.indexOf(l);r.row=h,r.end>i[h].end&&(i[h]=r),n++}}return{n_rows:i.length,n_overlaps:n}}_computePositionInfo(t,e,i){i=i||100;for(var n=[],s=!1,r=0;r<t.length;r++){var a={start:this.getPosition(t[r].start_date.getTime())};if(this._positions.push(a),"undefined"!=typeof t[r].end_date){var o=this.getPosition(t[r].end_date.getTime());a.width=o-a.start,a.width>i?a.end=a.start+a.width:a.end=a.start+i}else a.width=i,a.end=a.start+i;t[r].group?n.indexOf(t[r].group)<0&&n.push(t[r].group):s=!0}if(n.length){s&&n.push("");var l=[];for(r=0;r<n.length;r++)l[r]={label:n[r],idx:r,positions:[],n_rows:1,n_overlaps:0};for(r=0;r<this._positions.length;r++){(a=this._positions[r]).group=n.indexOf(t[r].group||""),a.row=0;for(var h=(u=l[a.group]).positions.length-1;h>=0;h--)u.positions[h].end>a.start&&u.n_overlaps++;u.positions.push(a)}for(var c=n.length;;){var d=Math.max(0,e-c);if(!d)break;if(l.sort((function(t,e){return t.n_overlaps>e.n_overlaps?-1:t.n_overlaps<e.n_overlaps?1:t.idx-e.idx})),!l[0].n_overlaps)break;for(c=0,r=0;r<l.length;r++){var u;if((u=l[r]).n_overlaps&&d){var p=this._computeRowInfo(u.positions,u.n_rows+1);u.n_rows=p.n_rows,u.n_overlaps=p.n_overlaps,d--}c+=u.n_rows}}this._number_of_rows=c,this._group_labels=[],l.sort((function(t,e){return t.idx-e.idx}));r=0;for(var f=0;r<l.length;r++){this._group_labels.push({label:l[r].label,rows:l[r].n_rows});for(h=0;h<l[r].positions.length;h++){(a=l[r].positions[h]).row+=f}f+=l[r].n_rows}}else{var m=this._computeRowInfo(this._positions,e);this._number_of_rows=m.n_rows}}getAxisTickDateFormat(t){return"cosmological"==this._scale?"compact":ol[t]}}class hl{constructor(t){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=ka("div","tl-timegroup"),Oa(this.data,t),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(t,e){}setRowPosition(t,e){this.options.height=e*this.data.rows,this.setPosition({top:t}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(t,e){var i="tl-timegroup";t&&(i+=" tl-timegroup-alternate"),e&&(i+=" tl-timegroup-hidden"),this._el.container.className=i}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=ka("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){uo.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(t,e,i){}}ja(hl,ro,lo);class cl{constructor(t,e,i,n){this.start_date=t,this.end_date=e,this.headline=i,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:eo,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,Oa(this.options,n),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(t){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,e){this._updateDisplay(t,e)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return!!this.end_date&&this.end_date.getTime()}setHeight(t){var e=1;this._el.content_container.style.height=t+"px",this._el.content.className="tl-timeera-content",ca?((e=Math.floor(t/14))<1&&(e=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=e):(e=t/12,this._text.className=e>1?"tl-headline tl-headline-fadeout":"tl-headline",this._text.style.height=12*e+"px")}setWidth(t){this.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(t){this._el.container.className=t}setRowPosition(t,e){this.setPosition({top:t}),e<56&&this._el.content_container.remove("tl-timeera-content-container-small")}setColor(t){this._el.container.className="tl-timeera tl-timeera-color"+t}_initLayout(){this._el.container=ka("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=ka("div","tl-timeera-content-container",this._el.container),this._el.background=ka("div","tl-timeera-background",this._el.content_container),this._el.content=ka("div","tl-timeera-content",this._el.content_container),this._el.text=ka("div","tl-timeera-text",this._el.content),this._text=ka("h2","tl-headline",this._el.text),this.headline&&""!=this.headline&&(this._text.innerHTML=qa(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}}ja(cl,ro,lo);class dl{constructor(t,e,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:eo,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],this._el.container="object"===typeof t?t:Sa(t),Oa(this.options,e),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,e){this._updateDisplay(t,e)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(t,e){var i=t.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(i.major.ticks,this._el.major,t.getAxisTickDateFormat(i.major.name)),this.minor_ticks=this._createTickElements(i.minor.ticks,this._el.minor,t.getAxisTickDateFormat(i.minor.name),i.major.ticks),this.positionTicks(t,e,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(t,e,i,n){e.innerHTML="";var s={};if(s[new Date(-1,13,-30).getTime()]=!0,n)for(var r=0;r<n.length;r++)s[n[r].getTime()]=!0;var a=[];for(r=0;r<t.length;r++){var o=t[r];if(!(o.getTime()in s)){var l=ka("div","tl-timeaxis-tick",e),h=ka("span","tl-timeaxis-tick-text tl-animate-opacity",l);let t=o.getDisplayDate(this.getLanguage(),i);h.innerHTML=t,a.push({tick:l,tick_text:h,display_date:t,date:o})}}return a}positionTicks(t,e,i){i?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,t,e),this._positionTickArray(this.minor_ticks,t,e)}_positionTickArray(t,e,i){if(t[1]&&t[0]){var n=1;e.getPosition(t[1].date.getMillisecond())-e.getPosition(t[0].date.getMillisecond())<i&&(n=Math.round(i/e.getPixelsPerTick()));for(var s=1,r=0;r<t.length;r++){var a=t[r];a.tick.style.left=e.getPosition(a.date.getMillisecond())+"px",a.tick_text.innerHTML=a.display_date,n>1?s>=n?(s=1,a.tick_text.style.opacity=1,a.tick.className="tl-timeaxis-tick"):(s++,a.tick_text.style.opacity=0,a.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(a.tick_text.style.opacity=1,a.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(t){return t.filter((t=>{let{tick:e}=t;return function(t){const e=t.getBoundingClientRect();return e.left>=0&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}(e)}))}_initLayout(){this._el.content_container=ka("div","tl-timeaxis-content-container",this._el.container),this._el.major=ka("div","tl-timeaxis-major",this._el.content_container),this._el.minor=ka("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}}ja(dl,ro,lo,Uo);class ul{constructor(t,e,i){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},function(t,e){t.data=Na({},t.data,e),""===t.data.unique_id&&(t.data.unique_id=za(6))}(this,t),Oa(this.options,e),this._el.container=ka("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),i&&i.appendChild(this._el.container)}show(){}hide(){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(t){this._el.date.innerHTML=t}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=ka("div","tl-text-content-container",this._el.container),this._el.headline_container=ka("div","tl-text-headline-container",this._el.content_container),""!=this.data.headline){var t="tl-headline";this.options.title&&(t="tl-headline tl-headline-title"),this._el.headline=ka("h2",t,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=ka("h3","tl-headline-date",this._el.headline_container),""!=this.data.text){var e="";e+=(i=1==this.options.autolink?Ya(this.data.text):this.data.text).match(/<p>[\s\S]*?<\/p>/)?i:"<p>"+i+"</p>",this._el.content=ka("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=e}var i;this.onLoaded()}}ja(ul,ro);class pl{constructor(t,e,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},Oa(this.options,e),Oa(this.data,t),this.options.background||(this._el.container=ka("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var t=this;if(!this._state.loaded)try{this.load_timer=setTimeout((function(){t.loadingMessage(),t._loadMedia(),t._updateDisplay()}),1200)}catch(e){Ca("Error loading media for ",this._media),Ca(e)}}_updateMessage(t){this.message&&this.message.updateMessage(t)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(t){t=t?this._("error")+": "+t:this._("error"),this._updateMessage(t)}updateMediaDisplay(t){this._state.loaded&&!this.options.background&&(this._el.content_item.style.maxHeight=ua?this.options.height/2+"px":this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",_a&&(this._el.content_item.offsetWidth,this._el.content_item.offsetHeight),this._updateMediaDisplay(t),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(t){_a&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(t,e){return""}show(){}hide(){}addTo(t){t.appendChild(this._el.container),this.onAdd()}removeFrom(t){t.removeChild(this._el.container),this.onRemove()}getImageURL(t,e){return this._getImageURL(t,e)}updateDisplay(t,e,i){this._updateDisplay(t,e,i)}stopMedia(){try{this._stopMedia()}catch(t){Ca("stopMedia() exception: ".concat(t))}}loadErrorDisplay(t){try{this._el.content.removeChild(this._el.content_item)}catch(e){}this._el.content_item=ka("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+t+"</p>",this.onLoaded(!0)}onLoaded(t){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),t||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(t){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(t,e){this._state.show_meta=!0,this.data.credit&&""!=this.data.credit&&(this._el.credit=ka("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=1==this.options.autolink?Ya(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&""!=this.data.caption&&(this._el.caption=ka("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=1==this.options.autolink?Ya(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),this.data.caption&&this.data.credit||this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=ka("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=ka("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new jo(this._el.container,this.options,this.getLanguage()),this._el.content_container=ka("div","tl-media-content-container",this._el.container),this.data.link&&""!=this.data.link?(this._el.link=ka("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&""!=this.data.link_target?this._el.link.target=this.data.link_target:this._el.link.target="_blank","_blank"==this._el.link.target&&this._el.link.setAttribute("rel","noopener"),this._el.content=ka("div","tl-media-content",this._el.link)):this._el.content=ka("div","tl-media-content",this._el.content_container)}_updateDisplay(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e),i&&(this.options.layout=i),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(){return ka(...arguments)}_stopMedia(){}}ja(pl,ro,Uo);class fl extends pl{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=this,e="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(e="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",e,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Wa(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Wa(this.data.caption)),this._el.content_item.addEventListener("load",(function(e){t.onMediaLoaded()})),this._el.content_item.src=this.getImageURL()}getImageURL(t,e){return $a(this.data.url)}_updateMediaDisplay(t){_a&&(this._el.content_item.style.width="auto")}}function ml(t,e,i,n){yl.js(t,e,i,n)}function _l(t,e,i,n){yl.css(t,e,i,n)}let yl=new class{constructor(t){this.doc=t,this.pending={},this.queue={css:[],js:[]},this.styleSheets=t.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(t,e){var i,n=this.doc.createElement(t);for(i in e)e.hasOwnProperty(i)&&n.setAttribute(i,e[i]);return n}finish(t){var e,i,n=this.pending[t];n&&(e=n.callback,(i=n.urls).shift(),this.pollCount=0,i.length||(e&&e.call(n.context,n.obj),this.pending[t]=null,this.queue[t].length&&this.load(t)))}getEnv(){var t=navigator.userAgent,e={async:!0===this.doc.createElement("script").async};return(e.webkit=/AppleWebKit\//.test(t))||(e.ie=/MSIE/.test(t))||(e.opera=/Opera/.test(t))||(e.gecko=/Gecko\//.test(t))||(e.unknown=!0),e}load(t,e,i,n,s){var r,a,o,l,h,c,d=function(){this.finish(t)}.bind(this),u="css"===t,p=[];if(e)if(e="string"===typeof e?[e]:e.concat(),u||this.env.async||this.env.gecko||this.env.opera)this.queue[t].push({urls:e,callback:i,obj:n,context:s});else for(r=0,a=e.length;r<a;++r)this.queue[t].push({urls:[e[r]],callback:r===a-1?i:null,obj:n,context:s});if(!this.pending[t]&&(l=this.pending[t]=this.queue[t].shift())){for(r=0,a=(h=l.urls).length;r<a;++r)c=h[r],u?o=this.env.gecko?this.createNode("style"):this.createNode("link",{href:c,rel:"stylesheet"}):(o=this.createNode("script",{src:c})).async=!1,o.className="lazyload",o.setAttribute("charset","utf-8"),this.env.ie&&!u?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&(o.onreadystatechange=null,d())}:u&&(this.env.gecko||this.env.webkit)?this.env.webkit?(l.urls[r]=o.href,this.pollWebKit()):(o.innerHTML='@import "'+c+'";',this.pollGecko(o)):o.onload=o.onerror=d,p.push(o);for(r=0,a=p.length;r<a;++r)this.head.appendChild(p[r])}}pollGecko(t){var e;try{e=!!t.sheet.cssRules}catch(n){if(this.pollCount+=1,this.pollCount<200){var i=this;setTimeout((function(){i.pollGecko(t)}),50)}else e&&this.finish("css");return}this.finish("css")}pollWebKit(){var t,e=this.pending.css;if(e){for(t=this.styleSheets.length;--t>=0;)if(this.styleSheets[t].href===e.urls[0]){this.finish("css");break}this.pollCount+=1,e&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(t,e,i,n){this.load("css",t,e,i,n)}js(t,e,i,n){this.load("js",t,e,i,n)}}(document);class gl extends pl{_loadMedia(){var t,e=this;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=za(7),t=function(t){var e,i,n,s=[];(e=t.toString()).match("&#038;")?e=e.replace("&#038;","&"):e.match("&#38;")?e=e.replace("&#38;","&"):e.match("&amp;")&&(e=e.replace("&amp;","&")),n=e.slice(e.indexOf("?")+1).split("&");for(var r=0;r<n.length;r++)i=n[r].split("="),s.push(i[0]),s[i[0]]=i[1];return s}(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=t.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:Ca("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=Ka(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=Ka(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=Ka(this.data.url.split("end=")[1])),this.media_id.hd=Boolean("undefined"!=typeof t.hd),ml("https://www.youtube.com/iframe_api",(function(){e.createMedia()}))}_updateMediaDisplay(){this._el.content_item.style.height=Za({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(t){Ca(t)}}createMedia(){var t=this;clearTimeout(this.timer),"undefined"!=typeof YT&&"undefined"!=typeof YT.Player?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){t.onPlayerReady(),t.onLoaded()},onStateChange:t.onStateChange}}):this.timer=setTimeout((function(){t.createMedia()}),1e3)}onPlayerReady(t){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(t){t.data==YT.PlayerState.ENDED&&(t.target.seekTo(0),t.target.pauseVideo())}}class bl extends pl{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var t=Ga({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=t.h+"px"}}makeGoogleMapsEmbedURL(t,e){var i=!1;var n={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},s=/(https:\/\/.+google.+?\/maps)/,r=/@([-\d.]+),([-\d.]+)/,a=/([\w\W]+)/,o=/,((?:[-\d.]+[zmayht],?)*)/,l={view:new RegExp(s.source+"/"+r.source+o.source),place:new RegExp(s.source+"/place/"+a.source+"/"+r.source+o.source),directions:new RegExp(s.source+"/dir/"+a.source+"/"+a.source+"/"+r.source+o.source),search:new RegExp(s.source+"/search/"+a.source+"/"+r.source+o.source)};return function(t){function s(e,s){if("z"==e.slice(-1))s.zoom=e;else if("m"==e.slice(-1))s.zoom=14,s.maptype="satellite";else if("t"==e.slice(-1)){if(i=!0,"place"==r)var a=t.match(l.place)[3]+","+t.match(l.place)[4];else{a=s.center;delete s.center}(s={}).location=a,streetview_params=e.split(",");for(let t in n.streetview){var o=parseInt(t)+1;"pitch"==n.streetview[t]&&"90t"==streetview_params[o]?s[n.streetview[t]]=0:s[n.streetview[t]]=streetview_params[o].slice(0,-1)}}return s}let r="view";return t.match(l.place)?r="place":t.match(l.directions)?r="directions":t.match(l.search)&&(r="search"),function(t,r){var a={},o=r[1],l=r[r.length-1];for(let e in n[t]){var h=parseInt(e)+2;"center"==n[t][e]?a[n[t][e]]=r[h]+","+r[++h]:a[n[t][e]]=r[h]}return(a=s(l,a)).key=e,1==i&&(t="streetview"),o+"/embed/v1/"+t+function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return"?"+e.join("&")}(a)}(r,t.match(l[r]))}(t)}}class vl extends pl{constructor(t,e,i){super(t,e,i),this.blockquote=Yo().sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class wl extends pl{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),t="https://"+this.data.url.split("//")[1].split(".wikipedia")[0]+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",mo({type:"GET",url:t,dataType:"json",success:function(t){e.createMedia(t)},error:function(t,i){var n="";n+=e._("wikipedia_load_err")+"<br/>"+e.media_id+"<br/>"+i,e.loadErrorDisplay(n)}})}createMedia(t){var e="";if(t.query){var i="";(e={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]}).entry=function(t,e){if("undefined"!=typeof t){var i=0;for(var n in t){if(e===i)return t[n];i++}return""}return""}(t.query.pages,0),e.extract=e.entry.extract,e.title=e.entry.title,e.page_image=e.entry.thumbnail,e.extract.match("<p>")?e.text_array=e.extract.split("<p>"):e.text_array.push(e.extract);for(var n=0;n<e.text_array.length;n++)n+1<=e.paragraphs&&n+1<e.text_array.length&&(e.text+="<p>"+e.text_array[n+1]);i+="<span class='tl-icon-wikipedia'></span>",i+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+e.title+"</a></h4>",i+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",e.page_image,i+=e.text,e.extract.match("REDIRECT")||(this._el.content_item.innerHTML=i,this.onLoaded())}}updateMediaDisplay(){}}class xl extends pl{_loadMedia(){var t,e=this.options.width||1e3,i=this.getLanguage().lang.toLowerCase(),n=this;try{this.establishMediaID(),t="https://commons.wikimedia.org/w/api.php?action=query&titles=".concat(this.media_id,"&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=").concat(e,"&format=json&origin=*&wbetlanguage=").concat(i),fo(t,(function(t){let e=function(t){let e={};if(t.query&&t.query.pages){let i=Object.keys(t.query.pages);e.page_id=i[0];let n=t.query.pages[e.page_id];e.url=n.imageinfo[0].thumburl,n.entityterms&&n.entityterms.label&&(e.label=n.entityterms.label[0])}return e}(t);e.url?(n.base_image_url=e.url,n.page_id=e.page_id,!n.data.alt&&e.label&&(n.data.alt=e.label),n.options.background||n.createMedia(),n.onLoaded()):n.loadErrorDisplay(n._("wikipedia_image_load_err"))}))}catch(s){n.loadErrorDisplay(n._(s.message_key))}}establishMediaID(){let t=function(t){if(t.match(/^.+#\/media\/.+/)){let e=t.split("#")[1].split(":");return"File:".concat(e[1])}if(t.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let e=t.split("/");return e[e.length-1]}return null}(this.data.url);if(!t)throw new Da("Invalid Wikipedia Image URL");this.media_id=t}createMedia(){var t=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let e="M".concat(this.page_id),i="https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=".concat(e,"&format=json&origin=*");_o(i).then((i=>{if(i.entities&&i.entities[e]){let n=i.entities[e].labels,s=t.getLanguage().lang.toLowerCase(),r=null;n[s]?r=n[s]:s.length>2&&n[s.substr(0,2)]?r=n[s.substr(0,2)]:n.en&&(r=n.en),r?(console.log("wikibase_id: ".concat(t.media_id," alt ").concat(r.value)),t.data.alt=r.value,t._el.content_item.alt=t.data.alt):console.log("wikibase_id: ".concat(t.media_id," ain't got no alt"))}}))}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",(function(e){t.onMediaLoaded()})),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(t,e){if(t&&this.base_image_url){let e=this.base_image_url.match(/(\/\d+px-)/);if(e)return this.base_image_url.replace(e[1],"/".concat(t,"px-"))}return this.base_image_url}}class Tl extends pl{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,t="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",fo(t,(function(t){ml("https://w.soundcloud.com/player/api.js",(function(){e.createMedia(t)}))}))}createMedia(t){this._el.content_item.innerHTML=t.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class Sl extends pl{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var i=null;this.data.url.match(/#t=([^&]+).*/)&&(i=this.data.url.match(/#t=([^&]+).*/)[1]),t="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",i&&(t=t+="&amp;#t="+i),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",(function(t){e.onMediaLoaded()})),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=Za({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){Ca(t)}}}class kl extends pl{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),-1!=this.data.url.indexOf("dai.ly/")?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],-1!=this.media_id.indexOf("_")&&(this.media_id=this.media_id.split("_")[0]),t="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=Za({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class Il extends pl{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],t="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var t=Ga({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=t.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class Ml extends pl{_loadMedia(){var t,e=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?twitter.com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match("<blockquote class=['\"]twitter-tweet['\"]")){var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(!(i&&i.length>2))return void e.loadErrorDisplay(e._("twitterembed_invalidurl_err"));this.media_id=i[2]}t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",mo({type:"GET",url:t,dataType:"json",success:function(t){e.createMedia(t)},error:function(t,i){var n="";n+=e._("twitter_load_err")+"<br/>"+e.media_id+"<br/>"+i,e.loadErrorDisplay(n)}})}createMedia(t){var e,i,n,s="",r="",a="",o=this;r=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",e=t.author_url.split("twitter.com/")[1],i=(a=t.html.split("</p>&mdash;")[1].split('<a href="')[1]).split('">')[0],n=a.split('">')[1].split("</a>")[0],(r=r.replace(/<a href/gi,'<a target="_blank" rel="noopener" href')).includes("pic.twitter.com")?(ml("https://platform.twitter.com/widgets.js",(function(){twttr.widgets.createTweet(o.media_id,o._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})})),this.onLoaded()):(s+=r,s+="<div class='vcard'>",s+="<a href='"+i+"' class='twitter-date' rel='noopener' target='_blank'>"+n+"</a>",s+="<img src='' class='tl-media-item tl-media-image'></a>",s+="<div class='author'>",s+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",s+="<span class='avatar'></span>",s+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",s+="<span class='nickname'>@"+e+"<span class='thumbnail-inline'></span></span>",s+="</a>",s+="</div>",s+="</div>",this._el.content_item.innerHTML=s,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class Al extends pl{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var i=this.data.url.match(/(status|statuses)\/(\d+)/);i&&i.length>2?(this.media_id=i[2],t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(t,e,i){var n,s=t.getElementsByTagName(e)[0],r=window.twttr||{};return t.getElementById(i)||((n=t.createElement(e)).id=i,n.src="https://platform.twitter.com/widgets.js",s.parentNode.insertBefore(n,s),r._e=[],r.ready=function(t){r._e.push(t)}),r}(document,"script","twitter-wjs"),mo({type:"GET",url:t,dataType:"json",success(t){e.createMedia(t)},error:function(t,i){var n="";n+=e._("twitter_load_err")+"<br/>"+e.media_id+"<br/>"+i,e.loadErrorDisplay(n)}})):e.loadErrorDisplay(e._("twitterembed_invalidurl_err"))}createMedia(t){var e,i,n,s="",r="",a="";r=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",e=t.author_url.split("twitter.com/")[1],i=(a=t.html.split("</p>&mdash;")[1].split('<a href="')[1]).split('">')[0],n=a.split('">')[1].split("</a>")[0],r=r.replace(/<a href/gi,'<a target="_blank" rel="noopener" href');let o=this.media_id;r.includes("pic.twitter.com")?(twttr.ready((function(t){s=document.getElementsByClassName("tl-media-twitter")[0];var e=String(o);twttr.widgets.createTweet(e,s,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then((function(t){this.onLoaded()}))})),this._el.content_item.innerHTML=s,this.onLoaded()):(s+=r,s+="<div class='vcard'>",s+="<a href='"+i+"' class='twitter-date' rel='noopener' target='_blank'>"+n+"</a>",s+="<div class='author'>",s+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",s+="<span class='avatar'></span>",s+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",s+="<span class='nickname'>@"+e+"<span class='thumbnail-inline'></span></span>",s+="</a>",s+="</div>",s+="</div>",this._el.content_item.innerHTML=s,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class Dl extends pl{_loadMedia(){var t,e=this;try{this.establishMediaID(),t="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",fo(t,(function(t){"ok"==t.stat?(e.sizes=t.sizes.size,e.options.background||e.createMedia(),e.onLoaded()):e.loadErrorDisplay(e._("flickr_notfound_err"))}))}catch(i){e.loadErrorDisplay(e._(i.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var t=this.data.url.split("/").slice(-1)[0];this.media_id=Ja.decode(t)}else{var e="flickr.com/photos/",i=this.data.url.indexOf(e);if(-1==i)throw new Da("flickr_invalidurl_err");var n=i+18;this.media_id=this.data.url.substr(n).split("/")[1]}}createMedia(){var t=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Wa(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Wa(this.data.caption)),this._el.content_item.addEventListener("load",(function(e){t.onMediaLoaded()})),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(t,e){for(var i=this.size_label(e),n=this.sizes[this.sizes.length-2].source,s=0;s<this.sizes.length;s++)this.sizes[s].label==i&&(n=this.sizes[s].source);return n}_getMeta(){var t,e=this;t="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",fo(t,(function(t){e.data.credit_alternate="<a href='"+e.data.url+"' target='_blank' rel='noopener'>"+t.photo.owner.realname+"</a>",e.data.caption_alternate=t.photo.title._content+" "+t.photo.description._content,e.updateMeta()}))}size_label(t){return t<=75?t<=0?"Large":"Thumbnail":t<=180?"Small":t<=240?"Small 320":t<=375?"Medium":t<=480?"Medium 640":"Large"}}class Ll extends pl{_loadMedia(){var t=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=za(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||Ca("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),ml(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],(function(){t.createMedia()}))}_transformURL(t){return t.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const El="".concat("704270473831239","|").concat("830b21071290df4f81a35c56abbea096"),Ol="https://graph.facebook.com/v8.0/instagram_oembed?access_token=".concat(El,"&fields=html,thumbnail_url,author_name&url=");function Nl(t){this.oembed_response=t,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Wa(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Wa(this.data.caption)),this._el.content_item.addEventListener("load",function(t){this.onMediaLoaded()}.bind(this)),this._el.content_item.src=t.thumbnail_url,this.onLoaded()}function Bl(t){let e="".concat(t.statusText," [").concat(t.status,"]");400==t.status&&(e=this._("instagram_bad_request")),this.loadErrorDisplay(e)}class Cl extends pl{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let t="".concat(Ol).concat(this.data.url);try{mo({url:t,dataType:"json",success:Nl,error:Bl,context:this})}catch(e){console.log("Instagram: error fetching ".concat(t)),console.log(e)}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;_o("".concat(Ol).concat(this.data.url)).then((t=>t.thumbnail_url)).catch((t=>{Ca("Instagram getImageURL Error: ".concat(t.status," ").concat(t.statusText))}))}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate='Instagram: <a href="https://instagram.com/'.concat(this.oembed_response.author_name,'" target="_blank">@').concat(this.oembed_response.author_name,"</a>")),this.updateMeta()}sizes(t){return t<=150?"t":t<=306?"m":"l"}}class Fl extends pl{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(t){_a&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class Rl extends pl{_loadMedia(){var t;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/))t="https://drive.google.com/file/d/"+this.data.url.match(/open\?id=([^&]+)/)[1]+"/preview";else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){t="https://drive.google.com/file/d/"+this.data.url.match(/file\/d\/([^/]*)\/?/)[1]+"/preview"}else t=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Ul extends pl{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=function(t){if(t.match(/^spotify:/))return t;let e=(t=new URL(t)).pathname.replace(/\/$/,"");return"spotify".concat(e.replace(/\//g,":"))}(this.data.url),this.media_id?(t="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(t){var e=this.options.height,i=0,n=0;e=ua?this.options.height/2:this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",Ca(e),Ca(this.options.width),e>this.options.width?(Ca("height is greater"),i=this.options.width+80+"px",n=this.options.width+"px"):(Ca("width is greater"),Ca(this.options.width),i=e+"px",n=e-80+"px"),this.player.style.width=n,this.player.style.height=i,this._el.credit&&(this._el.credit.style.width=n),this._el.caption&&(this._el.caption.style.width=n)}_stopMedia(){}}class jl extends pl{constructor(t,e,i){super(t,e,i),this.iframe=Yo().sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Pl extends pl{_loadMedia(){try{var t=this;if(this.data.url.match("<blockquote class=['\"]imgur-embed-pub['\"]")){var e=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=e[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);ml(["https://s.imgur.com/min/embed.js"],(function(){t.createMedia()}))}catch(i){this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var t=this,e="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),mo({type:"GET",url:e,dataType:"json",success:function(e){try{t._el.content_item.innerHTML=e.html,setInterval((function(){null==document.querySelector("blockquote.imgur-embed-pub")?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))}),2e3)}catch(i){Ca("Error processing imgur ajax response")}},error:function(e,i,n){"parsererror"==i?t.loadErrorDisplay(t._("imgur_invalidurl_err")):t.loadErrorDisplay(t._("unknown_read_err",i))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=Za({w:this.options.width})+"px"}}class zl extends pl{_loadMedia(){var t=$a(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var e="";e=ha||ya||t.match(/dl.dropboxusercontent.com/)?"<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+t+"&amp;embedded=true'></iframe>":"<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this._el.content_item.innerHTML=e,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Vl extends pl{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=$a(this.data.url),e=this;this._el.content_item=this.domCreate("audio","tl-media-item tl-media-audio tl-media-shadow",this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",(function(t){e.onMediaLoaded()})),this._el.source_item.src=t,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(t){_a&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(t,e){var i="audio/";switch(t.match(e)[1]){case"mp3":i+="mpeg";break;case"wav":i+="wav";break;case"m4a":i+="mp4";break;default:i="audio"}return i}}class Hl extends pl{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=$a(this.data.url),e=this;this._el.content_item=this.domCreate("video","tl-media-item tl-media-video tl-media-shadow",this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",(function(t){e.onMediaLoaded()})),this._el.source_item.src=t,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(t){_a&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(t,e){var i="video/";switch(t.match(e)[1]){case"mp4":i+="mp4";break;case"webm":i+="webm";break;default:i="video"}return i}}class ql extends pl{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],Ca("Wistia: media_id: ".concat(this.media_id)),t="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",(function(t){e.onMediaLoaded()})),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=Za({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){Ca(t)}}}function Wl(t,e){var i=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:gl},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:Sl},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:kl},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:Il},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:Tl},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?twitter.com",cls:Ml},{type:"twitterembed",name:"TwitterEmbed",match_str:"<blockquote class=['\"]twitter-tweet['\"]",cls:Al},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:bl},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:Dl},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:Dl},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:Cl},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:Fl},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:Ll},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:xl},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:xl},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:wl},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:fl},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:Pl},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:Rl},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:zl},{type:"spotify",name:"spotify",match_str:"spotify",cls:Ul},{type:"iframe",name:"iFrame",match_str:"iframe",cls:jl},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:vl},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:Hl},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:ql},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:Vl},{type:"imageblank",name:"Imageblank",match_str:"",cls:fl}];if(e){if(t instanceof Array)return!1;for(var n=0;n<i.length;n++)switch(i[n].type){case"flickr":case"image":case"instagram":if(t.url.match(i[n].match_str))return i[n]}}else for(n=0;n<i.length;n++)if(t.url.match(i[n].match_str))return i[n];return!1}class Yl{constructor(t,e){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:eo,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",Oa(this.options,e),Oa(this.data,t),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(t){this.active=t,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preventScroll:!0};this._el.container.focus(t)}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,e){this._updateDisplay(t,e)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return!!this.data.end_date&&this.data.end_date.getTime()}setHeight(t){var e=1;this._el.content_container.style.height=t+"px",this._el.timespan_content.style.height=t+"px",this._el.content.className=t<=30?"tl-timemarker-content tl-timemarker-content-small":"tl-timemarker-content",t<=56?this._el.content_container.classList.add("tl-timemarker-content-container-small"):this._el.content_container.classList.remove("tl-timemarker-content-container-small"),ca?((e=Math.floor(t/14))<1&&(e=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=e):(e=t/12,this._text.className=e>1?"tl-headline tl-headline-fadeout":"tl-headline",this._text.style.height=12*e+"px")}setWidth(t){this.data.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(t){this._el.container.className=t}setRowPosition(t,e){this.setPosition({top:t}),this._el.timespan.style.height=e+"px"}getFormattedDate(){if(Ua(this.data.display_date).length>0)return this.data.display_date;let t="";return this.data.end_date&&(t=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=(t?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+t),t}_onMarkerClick(t){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(t){/Space|Enter/.test(t.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(t){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=ka("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=ka("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=ka("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=ka("div","tl-timemarker-content-container",this._el.container),this._el.content=ka("div","tl-timemarker-content",this._el.content_container),this._el.line_left=ka("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=ka("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=ka("div","tl-timemarker-media-container",this._el.content);var t={url:this.data.media.thumbnail},e=this.data.media.thumbnail?Wl(t,!0):null;if(e){var i=new e.cls(t);i.on("loaded",function(){this._el.media=ka("img","tl-timemarker-media",this._el.media_container),this._el.media.src=i.getImageURL()}.bind(this)),i.loadMedia()}else{var n=Wl(this.data.media).type;this._el.media=ka("span","tl-icon-"+n,this._el.media_container)}}this._el.text=ka("div","tl-timemarker-text",this._el.content),this._text=ka("h2","tl-headline",this._el.text),this.data.text.headline&&""!=this.data.text.headline?this._text.innerHTML=qa(this.data.text.headline):this.data.text.text&&""!=this.data.text.text?this._text.innerHTML=qa(this.data.text.text):this.data.media&&this.data.media.caption&&""!=this.data.media.caption&&(this._text.innerHTML=qa(this.data.media.caption));const s=this.getFormattedDate();this.ariaLabel="".concat(this._text.innerHTML,", ").concat(s),this.onLoaded()}_initEvents(){uo.addListener(this._el.container,"click",this._onMarkerClick,this),uo.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),uo.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}}ja(Yl,Uo,ro,lo);class $l{constructor(t,e,i){this._el={drag:t,move:t},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},e&&(this._el.move=e),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:no},this.animator=null,this.dragevent=this.mousedrag,Ta&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},Oa(this.options,i)}enable(t){uo.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),uo.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){uo.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),uo.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(t){this.options.constraint=t}_onDragStart(t){this.animator&&this.animator.stop(),Ta?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=(new Date).getTime(),this.fire("dragstart",this.data),uo.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),uo.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(t){this.data.sliding=!1,uo.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),uo.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(t){var e={x:0,y:0};this.data.sliding=!0,Ta?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),e.x=this.data.pagex.start-this.data.pagex.end,e.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(e.x-this.data.pos.start.x),this.data.new_pos.y=-(e.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(e.x)>Math.abs(e.y)&&(t.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(e.y)>Math.abs(e.y)&&(t.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var t={x:0,y:0,time:0},e={x:0,y:0,time:0},i={x:!1,y:!1},n=!1;this.data.direction=null,t.time=10*((new Date).getTime()-this.data.time.start),e.time=10*((new Date).getTime()-this.data.time.start),e.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),e.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(e.x/e.time),t.y=Math.round(e.y/e.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+t.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+t.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,e.time<2e3&&(n=!0),this.options.enable.x&&this.options.enable.y?Math.abs(e.x)>Math.abs(e.y)?i.x=!0:i.y=!0:this.options.enable.x?Math.abs(e.x)>Math.abs(e.y)&&(i.x=!0):Math.abs(e.y)>Math.abs(e.x)&&(i.y=!0),i.x&&(Math.abs(e.x)>this._el.drag.offsetWidth/2&&(n=!0),Math.abs(e.x)>1e4&&(this.data.direction="left",e.x>0&&(this.data.direction="right"))),i.y&&(Math.abs(e.y)>this._el.drag.offsetHeight/2&&(n=!0),Math.abs(e.y)>1e4&&(this.data.direction="up",e.y>0&&(this.data.direction="down"))),e.time<1e3||this._animateMomentum(),n&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=ao(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:io}))}_animateMomentum(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},e={duration:this.options.duration,easing:io};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),e.top=Math.floor(t.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&t.x>=this.options.constraint.left&&(t.x=this.options.constraint.left),this.options.constraint.right&&t.x<this.options.constraint.right&&(t.x=this.options.constraint.right),e.left=Math.floor(t.x)+"px"),this.animator=ao(this._el.move,e),this.fire("momentum",this.data)}}ja($l,ro);class Gl{constructor(t,e,i,n){this.language=n,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,this._el.container="object"===typeof t?t:Sa(t),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=e,this.options={width:600,height:600,duration:1e3,ease:no,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,Oa(this.options,i)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(t){for(var e=0;e<this._markers.length;e++){var i=this.timescale.getPositionInfo(e);t?this._markers[e].setClass("tl-timemarker tl-timemarker-fast"):this._markers[e].setClass("tl-timemarker"),this._markers[e].setPosition({left:i.start}),this._markers[e].setWidth(i.width)}}updateDisplay(t,e,i){let n=!1;t&&(0==this.options.width&&t>0&&(n=!0),this.options.width=t),e&&e!=this.options.height&&(this.options.height=e,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-this.options.width/2+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),n&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var t=0;try{t=parseInt(this.options.marker_height_min)}catch(e){Ca("Invalid value for marker_height_min option."),t=30}return 0==t&&(Ca("marker_height_min option must not be zero."),t=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/t),this.max_rows<1&&(this.max_rows=1),new ll(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(t){this.options.scale_factor=t,this._updateDrawTimeline()}zoomIn(){var t=function(t,e,i){for(var n=0;n<t.length;n++)if(e<t[n])return t[n];return i||e}(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}zoomOut(){var t=function(t,e,i){for(var n=t.length-1;n>=0;n--)if(e>t[n])return t[n];return i||e}(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}setZoom(t){var e=this.options.zoom_sequence[t];"number"==typeof e?this.setZoomFactor(e):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(t){t<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),t>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),0==t&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),t=.1),this.options.scale_factor=t,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var t=this.timescale.getGroupLabels();if(t){this.options.has_groups=!0;for(var e=0;e<t.length;e++)this._createGroup(t[e])}}_createGroup(t){var e=new hl(t);this._addGroup(e),this._groups.push(e)}_addGroup(t){t.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups)for(var t=this.options.height-this._el.timeaxis_background.offsetHeight,e=Math.floor(t/this.timescale.getNumberOfRows()-this.options.marker_padding),i=(this.timescale.getGroupLabels(),0),n=0;i<this._groups.length;i++){var s=Math.floor(n*(e+this.options.marker_padding)),r=!1;s>t-this.options.marker_padding&&(r=!0),this._groups[i].setRowPosition(s,this._calculated_row_height+this.options.marker_padding/2),this._groups[i].setAlternateRowColor(Va(i),r),n+=this._groups[i].data.rows}}_addMarker(t){t.addTo(this._el.marker_item_container),t.on("markerclick",this._onMarkerClick,this),t.on("added",this._onMarkerAdded,this)}_createMarker(t,e){var i=new Yl(t,this.options);this._addMarker(i),e<0?this._markers.push(i):this._markers.splice(e,0,i)}_createMarkers(t){for(var e=0;e<t.length;e++)this._createMarker(t[e],-1)}_removeMarker(t){t.removeFrom(this._el.marker_item_container)}_destroyMarker(t){this._removeMarker(this._markers[t]),this._markers.splice(t,1)}_calculateMarkerHeight(t){return t/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(t){return t/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var t=this._calculateAvailableHeight(),e=this._calculateMarkerHeight(t);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(t);for(var i=0;i<this._markers.length;i++){this._markers[i].setHeight(e);var n=this.timescale.getPositionInfo(i).row,s=Math.floor(n*(e+this.options.marker_padding))+this.options.marker_padding,r=t-s+this.options.marker_padding;this._markers[i].setRowPosition(s,r)}}_resetMarkersActive(){for(var t=0;t<this._markers.length;t++)this._markers[t].setActive(!1)}_resetMarkersBlurListeners(){for(var t=0;t<this._markers.length;t++)this._markers[t].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(t){var e=-1;return("string"==typeof t||t instanceof String)&&(e=Ha(t,this._markers,"unique_id",e)),e}_createEras(t){for(var e=0;e<t.length;e++){var i=t[e],n=new cl(i.start_date,i.end_date,i.headline,this.options);this._eras.push(n),n.addTo(this._el.marker_item_container),n.on("added",this._onEraAdded,this)}}_positionEras(t){for(var e=0,i=0;i<this._eras.length;i++){var n={start:0,end:0,width:0};n.start=this.timescale.getPosition(this._eras[i].start_date.getTime()),n.end=this.timescale.getPosition(this._eras[i].end_date.getTime()),n.width=n.end-n.start,t?this._eras[i].setClass("tl-timeera tl-timeera-fast"):this._eras[i].setClass("tl-timeera"),this._eras[i].setPosition({left:n.start}),this._eras[i].setWidth(n.width),++e>5&&(e=0),this._eras[i].setColor(e)}}createMarker(t,e){this._createMarker(t,e)}createMarkers(t){this._createMarkers(t)}destroyMarker(t){this._destroyMarker(t)}destroyMarkerId(t){this.destroyMarker(this._findMarkerIndex(t))}goTo(t,e,i){var n=this.options.ease,s=this.options.duration,r=t<0?0:t;this._resetMarkersActive(),t>=0&&t<this._markers.length&&this._markers[t].setActive(!0),this.animateMovement(r,e,i,s,n),t>=0&&t<this._markers.length?this.current_id=this.current_focused_id=this._markers[t].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(t,e,i){this.goTo(this._findMarkerIndex(t),e,i)}focusOn(t,e,i){const n=this.options.ease,s=this.options.duration,r=t<0?0:t;this.animateMovement(r,e,i,s,n),this._resetMarkersBlurListeners(),t>=0&&t<this._markers.length&&(this._markers[t].setFocus(),this.current_focused_id=this._markers[t].data.unique_id,this._markers[t].on("markerblur",this._onMarkerBlur,this))}focusNext(){const t=this._findMarkerIndex(this.current_focused_id);t+1<this._markers.length?this.focusOn(t+1):this.focusOn(t)}focusPrevious(){const t=this._findMarkerIndex(this.current_focused_id);t-1>=0?this.focusOn(t-1):this.focusOn(t)}animateMovement(t,e,i,n,s){this.animator&&this.animator.stop(),e?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[t].getLeft()+this.options.width/2+"px"):i?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[t].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=ao(this._el.slider,{left:-this._markers[t].getLeft()+this.options.width/2+"px",duration:n,easing:s})),t>=0&&t<this._markers.length?this.current_id=this._markers[t].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(t,e,i){this.goTo(this._findMarkerIndex(t),e,i)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout((()=>{const t=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:t})}),this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(t){this.fire("dateAdded",this.config)}_onEraAdded(t){this.fire("eraAdded",this.config)}_onMarkerRemoved(t){this.fire("dateRemoved",this.config)}_onMarkerClick(t){this.goToId(t.unique_id),this.fire("change",{unique_id:t.unique_id})}_onMarkerBlur(t){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(t){var e=0,i=0,n={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};t||(t=window.event),t.originalEvent&&(t=t.originalEvent),"undefined"!=typeof t.wheelDeltaX&&(e=t.wheelDeltaY/6,e=Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)?t.wheelDeltaX/6:0),e&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1),(i=parseInt(this._el.slider.style.left.replace("px",""))+e)>n.left?i=n.left:i<n.right&&(i=n.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=i+"px"}_onDragMove(t){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(t){switch(uo.stopPropagation(t),t.key){case"ArrowUp":case"ArrowRight":this.focusNext();break;case"ArrowDown":case"ArrowLeft":this.focusPrevious();break;case"Home":this.focusOn(0);break;case"End":this.focusOn(this._markers.length-1)}}_drawTimeline(t){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(t),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(t)}_updateDrawTimeline(t){var e=!1;if(t){var i=new ll(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==i.getMajorScale()&&this.timescale.getMinorScale()==i.getMinorScale()&&(e=!0)}else e=!0;return e?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),e}_setLabelWithCurrentMarker(){const t=this._markers[this._findMarkerIndex(this.current_focused_id)],e=t&&t.ariaLabel?", ".concat(t.ariaLabel,", shown"):"";this._el.container.setAttribute("aria-label","Timeline navigation ".concat(e))}_initLayout(){this._el.line=ka("div","tl-timenav-line",this._el.container),this._el.slider=ka("div","tl-timenav-slider",this._el.container),this._el.slider_background=ka("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=ka("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=ka("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=ka("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=ka("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=ka("div","tl-timeaxis-background",this._el.container),this.timeaxis=new dl(this._el.timeaxis,this.options,this.language),this._swipable=new $l(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),uo.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),uo.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),uo.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}ja(Gl,ro,lo,Uo);i(833);class Zl{constructor(t,e,i,n){n&&this.setLanguage(n),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=i,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:eo,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},Oa(this.options,e),Oa(this.data,t),this._initLayout(),this._initEvents()}show(){this.animator=ao(this._el.slider_container,{left:-this._el.container.offsetWidth*n+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(t){this.active=t,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,e,i){var n,s=this.options.slide_padding_lr,r=this.options.slide_padding_lr;this.options.width=t||this._el.container.offsetWidth,n=this.options.width-2*this.options.slide_padding_lr,ua&&this.options.width<=this.options.skinny_size?(s=0,r=0,n=this.options.width):"landscape"==i||this.options.width<=this.options.skinny_size&&(s=50,r=50,n=this.options.width-s-r),this._el.content.style.paddingLeft=s+"px",this._el.content.style.paddingRight=r+"px",this._el.content.style.width=n+"px",this.options.height=e||this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(n,this.options.height-this._text.headlineHeight(),i):this.has.text||this.has.headline?this.options.width<=this.options.skinny_size?this._media.updateDisplay(n,this.options.height,i):this._media.updateDisplay(n/2,this.options.height,i):this._media.updateDisplay(n,this.options.height,i)),this._updateBackgroundDisplay()}loadMedia(){var t=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",(function(){t._updateBackgroundDisplay()})),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(Ua(this.data.display_date).length>0)return this.data.display_date;var t="";return this.has.title||(this.data.end_date&&(t=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=this.data.start_date.getDisplayDate(this.getLanguage())+t)),t}_initLayout(){if(this._el.container=ka("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=ka("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=ka("div","tl-slide-content-container",this._el.scroll_container),this._el.content=ka("div","tl-slide-content",this._el.content_container),this._el.background=ka("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var t=Wl(this.data.background,!0);t&&(this._background_media=new t.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&""!=this.data.media.url&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=Wl(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new ul(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),this.has.text||this.has.headline||!this.has.media?this.has.headline&&this.has.media&&!this.has.text?(this._el.container.classList.add("tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.classList.add("tl-slide-text-only"),this._text.addTo(this._el.content)):(this._el.container.classList.add("tl-slide-media-only"),this._media.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(t){t?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}ja(Zl,Uo,ro,lo);class Jl{constructor(t,e,i){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,Oa(this.options,e),Oa(this.data,t),this._el.container=Ia("tl-slidenav-"+this.options.direction),ua&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),i&&i.appendChild(this._el.container)}update(t){var e={title:"",description:"",date:t.getFormattedDate()};t.data.text&&t.data.text.headline&&(e.title=t.data.text.headline),this._update(e)}setColor(t){this._el.content_container.className=t?"tl-slidenav-content-container tl-slidenav-inverted":"tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(t){this.data=Oa(this.data,t);const e=qa(this.data.title);this._el.title.innerHTML=e;const i=qa(this.data.date);this._el.description.innerHTML=i,this._el.container.setAttribute("aria-label","".concat(this.options.direction,", ").concat(e,", ").concat(i))}_initLayout(){this._el.content_container=ka("div","tl-slidenav-content-container",this._el.container),this._el.icon=ka("div","tl-slidenav-icon",this._el.content_container),this._el.title=ka("div","tl-slidenav-title",this._el.content_container),this._el.description=ka("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){uo.addListener(this._el.container,"click",this._onMouseClick,this)}}ja(Jl,lo,ro);class Kl{constructor(t,e,i,n){n&&this.setLanguage(n),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:no,dragging:!0,trackResize:!0},"object"===typeof t?(this._el.container=t,this.options.id=za(6,"tl")):(this.options.id=t,this._el.container=Sa(t)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,Oa(this.options,i),Oa(this.data,e)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(t){t.addTo(this._el.slider_item_container),t.on("added",this._onSlideAdded,this),t.on("background_change",this._onBackgroundChange,this)}_createSlide(t,e,i){var n=new Zl(t,this.options,e,this.getLanguage());this._addSlide(n),i<0?this._slides.push(n):this._slides.splice(i,0,n)}_createSlides(t){for(var e=0;e<t.length;e++)""==t[e].unique_id&&(t[e].unique_id=za(6,"tl-slide")),this._createSlide(t[e],!1,-1)}_removeSlide(t){t.removeFrom(this._el.slider_item_container),t.off("added",this._onSlideRemoved,this),t.off("background_change",this._onBackgroundChange)}_destroySlide(t){this._removeSlide(this._slides[t]),this._slides.splice(t,1)}_findSlideIndex(t){var e=t;return("string"==typeof t||t instanceof String)&&(e=Ha(t,this._slides,"unique_id")),e}updateDisplay(t,e,i,n){var s,r;r="undefined"===typeof n?this.options.layout:n,this.options.layout=r,this.options.width=t||this._el.container.offsetWidth,this.options.height=e||this._el.container.offsetHeight,this.slide_spacing=2*this.options.width,s=this.options.height/2,this._nav.next.setPosition({top:s}),this._nav.previous.setPosition({top:s});for(var a=0;a<this._slides.length;a++)this._slides[a].updateDisplay(this.options.width,this.options.height,r),this._slides[a].setPosition({left:this.slide_spacing*a,top:0});this.goToId(this.current_id,!0,!0)}createSlide(t,e){this._createSlide(t,!1,e)}createSlides(t){this._createSlides(t)}destroySlide(t){this._destroySlide(t)}destroySlideId(t){this.destroySlide(this._findSlideIndex(t))}goTo(t,e,i){t=parseInt(t),isNaN(t)&&(t=0);var n=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var s=0;s<this._slides.length;s++)this._slides[s].setActive(!1);t<this._slides.length&&t>=0&&(this.current_id=this._slides[t].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),e?(this._el.slider_container.style.left=-this.slide_spacing*t+"px",this._onSlideChange(i)):this.animator=ao(this._el.slider_container,{left:-this.slide_spacing*t+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(i)}),this._slides[t].setActive(!0),this._slides[t+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[t+1])):this.showNav(this._nav.next,!1),this._slides[t-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[t-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout((function(){n.preloadSlides(t)}),this.options.duration))}goToId(t,e,i){this.goTo(this._findSlideIndex(t),e,i)}preloadSlides(t){this._slides[t+1]&&(this._slides[t+1].loadMedia(),this._slides[t+1].scrollToTop()),this._slides[t+2]&&(this._slides[t+2].loadMedia(),this._slides[t+2].scrollToTop()),this._slides[t-1]&&(this._slides[t-1].loadMedia(),this._slides[t-1].scrollToTop()),this._slides[t-2]&&(this._slides[t-2].loadMedia(),this._slides[t-2].scrollToTop())}next(){var t=this._findSlideIndex(this.current_id);t+1<this._slides.length?this.goTo(t+1):this.goTo(t)}previous(){var t=this._findSlideIndex(this.current_id);t-1>=0?this.goTo(t-1):this.goTo(t)}showNav(t,e){this.options.width<=500&&ua?t.hide():e?t.show():t.hide()}changeBackground(t){var e={r:256,g:256,b:256};t.color_value&&""!=t.color_value?(e=Ea(t.color_value))||(Ca("Invalid color value "+t.color_value),e=this.options.default_bg_color):(e=this.options.default_bg_color,t.color_value="rgb("+e.r+" , "+e.g+", "+e.b+")"),e.r,e.g,e.b,this._el.background.style.backgroundImage="none",t.color_value?this._el.background.style.backgroundColor=t.color_value:this._el.background.style.backgroundColor="transparent",e.r<255||e.g<255||e.b<255||t.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var t=this.options.layout,e=0;e<this._slides.length;e++)this._slides[e].updateDisplay(this.options.width,this.options.height,t),this._slides[e].setPosition({left:this.slide_spacing*e,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){this._el.container.classList.add("tl-storyslider"),this._nav.previous=new Jl({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new Jl({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=ka("div","tl-slider-container-mask",this._el.container),this._el.background=ka("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=ka("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=ka("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",Ta&&(this._swipable=new $l(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new jo(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(t){var e=this._findSlideIndex(this.current_id),i=this._slides[e].getBackground();this.changeBackground(t),this.fire("colorchange",i)}_onMessageClick(t){this._message.hide()}_onSwipeNoDirection(t){this.goToId(this.current_id)}_onNavigation(t){"next"==t.direction||"left"==t.direction?this.next():"previous"!=t.direction&&"right"!=t.direction||this.previous(),this.fire("nav_"+t.direction,this.data)}_onSlideAdded(t){Ca("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(t){this.fire("slideRemoved",this.data)}_onSlideChange(t){t||this.fire("change",{unique_id:this.current_id})}_onMouseClick(t){}_fireMouseEvent(t){if(this._loaded){var e=t.type;e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)&&("contextmenu"===e&&uo.preventDefault(t),this.fire(e,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}ja(Kl,Uo,ro);class Xl{constructor(t,e,i,n){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,this._el.container="object"===typeof t?t:Sa(t),e&&(this._el.parent=e),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:no,menubar_default_y:0},this.animator={},this.setLanguage(n),Oa(this.options,i),this._initLayout(),this._initEvents()}show(t){this.options.duration}hide(t){}toogleZoomIn(t){t?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(t){t?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(t){const e=t.minor;if(!e.length)return void(this.data.visible_ticks_dates={});const i=e[0].date.getFullYear(),n=e[e.length-1].date.getFullYear();this.data.visible_ticks_dates={start:i,end:n},this._updateZoomAriaLabels()}setSticky(t){this.options.menubar_default_y=t}setColor(t){this._el.container.className=t?"tl-menubar tl-menubar-inverted":"tl-menubar"}updateDisplay(t,e,i,n){this._updateDisplay(t,e,i,n)}_onButtonZoomIn(t){this.fire("zoom_in",t)}_onButtonZoomOut(t){this.fire("zoom_out",t)}_onButtonForwardToEnd(t){this.fire("forward_to_end",t)}_onButtonBackToStart(t){this.fire("back_to_start",t)}_initLayout(){this._el.button_zoomin=Ia("tl-menubar-button",this._el.container),this._el.button_zoomout=Ia("tl-menubar-button",this._el.container),this._el.button_forwardtoend=Ia("tl-menubar-button",this._el.container),this._el.button_backtostart=Ia("tl-menubar-button",this._el.container),ua&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){uo.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),uo.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),uo.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),uo.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}_updateZoomAriaLabels(){0==Object.keys(this.data.visible_ticks_dates).length?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}ja(Xl,lo,ro,Uo);let Ql=null;if(document){let t=document.getElementsByTagName("script");t&&t.length>0&&(Ql=t[t.length-1].src)}class th{constructor(t,e,i){if(i||(i={}),this.ready=!1,this._el={container:Sa(t),storyslider:{},timenav:{},menubar:{}},i.lang&&!i.language&&(i.language=i.lang),this.language=Ro,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:no,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_measurement_id:null,ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new jo(this._el.container,{message_class:"tl-message-full"}),"string"==typeof i.default_bg_color){var n=Ea(i.default_bg_color);n?i.default_bg_color=n:(delete i.default_bg_color,Ca("Invalid default background color. Ignoring."))}var s;Oa(this.options,i),this.options.script_path||(this.options.script_path=this.determineScriptPath()),i.soundcite&&this.on("ready",(()=>{Ca("Loading Soundcite resources "),_l("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),ml("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")})),this._loadStyles(),document.addEventListener("keydown",function(t){return function(e){if(t.config){var i=e.key,n=t._getSlideIndex(self.current_id),s=t.config.events.length-1,r=t.config.title?s+1:s;"ArrowLeft"==i?0!=n&&t.goToPrev():"ArrowRight"==i&&n!=r&&t.goToNext()}}}(this)),window.addEventListener("resize",function(t){this.updateDisplay()}.bind(this)),this.options.debug&&(s=console.log,Ba.push(s)),this._el.container.classList.add("tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&this._el.container.classList.add("tl-timeline-embed"),this.options.is_full_embed&&this._el.container.classList.add("tl-timeline-full-embed"),this._loadLanguage(e)}_loadStyles(){let t=null,e=null;if(this.options.font&&(0==this.options.font.indexOf("http")||this.options.font.match(/\.css$/)))t=this.options.font;else if(this.options.font){let e="../css/fonts/font."+this.options.font.toLowerCase()+".css";t=new URL(e,this.options.script_path).toString()}if(t&&_l(t),this.options.theme&&(0==this.options.theme.indexOf("http")||this.options.theme.match(/\.css$/)))e=this.options.theme;else if(this.options.theme){let t="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";e=new URL(t,this.options.script_path).toString()}e&&_l(e)}_loadLanguage(t){try{var e=this.options.language,i=this.options.script_path;(async function(t,e){var i=Bo(t,e);try{if(!Fo[t]){let e=await _o(i);Fo[t]=e}return new No(t,e)}catch(n){return console.log("Error loading language [".concat(i,"] ").concat(n.statusText)),null}})(e,i).then((i=>{i?(this.language=i,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage("Error loading ".concat(e)),this._initData(t)}))}catch(n){this.showMessage(this._translateError(n))}}_initData(t){"string"==typeof t?nl(t,{callback:function(t){this.setConfig(t)}.bind(this),sheets_proxy:this.options.sheets_proxy}):Ko==t.constructor?this.setConfig(t):this.setConfig(new Ko(t))}_translateError(t){return t.hasOwnProperty("stack")&&Ca(t.stack),t.message_key?this._(t.message_key)+(t.detail?" ["+t.detail+"]":""):t}showMessage(t){this.message?this.message.updateMessage(t):(Ca("No message display available."),Ca(t))}determineScriptPath(){let t=null;if(Ql)t=Ql;else{let e=document.getElementById("timeline-script-tag");e&&(t=e.src)}if(!t){let e=document.getElementsByTagName("script");for(let i=e.length-1;i>=0;i--)if(e[i].src){t=e[i].src;break}}return t?t.substr(0,t.lastIndexOf("/")+1):""}setConfig(t){if(this.config=t,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(s){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(s))}else{for(var e=[],i=0,n=this.config.getErrors();i<n.length;i++)e.push(this._translateError(n[i]));this.showMessage("<strong>"+this._("error")+":</strong> "+e.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();new IntersectionObserver(((t,e)=>{t.reduce(((t,e)=>t||e.isIntersecting),!1)&&this.updateDisplay()}).bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="","top"==this.options.timenav_position?(this._el.timenav=ka("div","tl-timenav",this._el.container),this._el.menubar=ka("div","tl-menubar",this._el.container),this._el.storyslider=ka("div","tl-storyslider",this._el.container)):(this._el.storyslider=ka("div","tl-storyslider",this._el.container),this._el.timenav=ka("div","tl-timenav",this._el.container),this._el.menubar=ka("div","tl-menubar",this._el.container)),this._el.attribution=ka("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new Gl(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new Kl(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new Xl(this._el.menubar,this._el.container,this.options,this.getLanguage()),"portrait"==this.options.layout?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay(this._timenav.options.height,!0,2e3)}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(t){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._timenav.goToId(this.current_id),this._onChange(t))}_onTimeNavChange(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._storyslider.goToId(this.current_id),this._onChange(t))}_onZoomToggle(t){"in"==t.zoom?this._menubar.toogleZoomIn(t.show):"out"==t.zoom&&this._menubar.toogleZoomOut(t.show)}_onChange(t){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(t){this._menubar.changeVisibleTicks(t.visible_ticks)}_onForwardToEnd(t){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(t){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(t){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(t){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(t){this.fire("nav_next",t)}_onStorySliderPrevious(t){this.fire("nav_previous",t)}_updateDisplay(t,e,i){var n=this.options.duration,s=this.options.base_class,r=0;i&&(n=i),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(s+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(s+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",Ta&&(this.options.layout=function(){var t="portrait";return window.innerWidth>window.innerHeight&&(t="landscape"),Math.abs(window.orientation),t}()),ua?(s+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(t,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(t),"portrait"==this.options.layout?s+=" tl-layout-portrait":s+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,r="top"==this.options.timenav_position?Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-19.5:Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-17.5),e?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=ao(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:n/2,easing:io}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=ao(this._el.menubar,{top:r+"px",duration:n/2,easing:io})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=r+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,e),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,e,this.options.layout),"rtl"==this.language.direction&&(s+=" tl-rtl"),this._el.container.className=s}_calculateTimeNavHeight(t,e){var i=0;return t?i=t:(this.options.timenav_height_percentage||e)&&(i=e?Math.round(this.options.height/100*e):Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),i<this.options.timenav_height_min&&(i=this.options.timenav_height_min),i-=2*this.options.marker_padding}_validateOptions(){for(var t=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],e=0;e<t.length;e++){var i=t[e],n=this.options[i];let s=!0;"number"==typeof n?s=n==parseInt(n):"string"==typeof n&&(s=n.match(/^\s*(\-?\d+)?\s*$/)),s||this.config.logError({message_key:"invalid_integer_option",detail:i})}}_getSlideIndex(t){if(this.config){if(this.config.title&&this.config.title.unique_id==t)return 0;for(var e=0;e<this.config.events.length;e++)if(t==this.config.events[e].unique_id)return this.config.title?e+1:e}return-1}_getEventIndex(t){for(var e=0;e<this.config.events.length;e++)if(t==this.config.events[e].unique_id)return e;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),null!=(t=this.options.start_at_end)&&(1==t||"true"==String(t).toLowerCase()||1==Number(t))||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){""!=window.location.hash?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let t=this;window.addEventListener("hashchange",(function(){0==window.location.hash.indexOf("#event-")&&t.goToId(window.location.hash.replace("#event-",""))}),!1)}var t}_updateHashBookmark(t){if(t){var e="#event-"+t.toString();window.history.replaceState(null,"Browsing TimelineJS",e),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+t.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(t){this._timenav.setZoom(t)}goToId(t){this.current_id!=t&&(this.current_id=t,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(t){if(!(t<0))try{this.config.title?0===t?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[t-1].unique_id):this.goToId(this.config.events[t].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var t=this.config.events.length-1;this.goTo(this.config.title?t+1:t)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(t){var e=this.config.addEvent(t),i=this._getEventIndex(e),n=this.config.events[i];this._storyslider.createSlide(n,this.config.title?i+1:i),this._storyslider._updateDrawSlides(),this._timenav.createMarker(n,i),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:e})}remove(t){if(t>=0&&t<this.config.events.length){this.config.events[t].unique_id==this.current_id&&(t<this.config.events.length-1?this.goTo(t+1):this.goTo(t-1));var e=this.config.events.splice(t,1);delete this.config.event_dict[e[0].unique_id],this._storyslider.destroySlide(this.config.title?t+1:t),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(t),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:e[0].unique_id})}}removeId(t){this.remove(this._getEventIndex(t))}getData(t){if(this.config.title){if(0==t)return this.config.title;if(t>0&&t<=this.config.events.length)return this.config.events[t-1]}else if(t>=0&&t<this.config.events.length)return this.config.events[t];return null}getDataById(t){return this.getData(this._getSlideIndex(t))}getSlide(t){return t>=0&&t<this._storyslider._slides.length?this._storyslider._slides[t]:null}getSlideById(t){return this.getSlide(this._getSlideIndex(t))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():Ca("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(t){ml("https://www.googletagmanager.com/gtag/js?id=".concat(t)),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",t)}_initAnalytics(){let t=this.options.ga_measurement_id||this.options.ga_property_id||null;if(t){this._initGoogleAnalytics(t);var e=this.options.track_events;for(let t=0;t<e.length;t++){var i=e[t];this.addEventListener(i,(function(t){gtag("event",t.type)}))}}}}ja(th,Uo,ro);const eh=document.createElement("div");eh.id="timeline-embed",eh.style.width="100%",eh.style.height="500px";const ih=document.createElement("style");ih.innerHTML="\n  body div .tl-headline-date{\n    font-size: 32px !important;\n    padding-bottom: 5px !important;\n  }",document.head.appendChild(ih),document.body.appendChild(eh),na.setComponentValue({}),na.events.addEventListener(na.RENDER_EVENT,(function(t){const e=t.detail;let i=e.args.data,n=e.args.height;if(i)try{const t={is_embed:!0,height:n||500,marker_height_min:60,slide_padding_lr:10,start_at_slide:i.startIndex?i.startIndex:0};new th(eh,i.data,t).on("change",(t=>{if(t&&t.unique_id&&t.target){let e=t.target._getSlideIndex(t.unique_id),i=t.target.config.title?e-1:e,n={text:{headline:"",text:""},title:!1,index:i};if(i>-1){const e=t.target.config.events[i];e.text&&e.text.headline&&(n.text.headline=e.text.headline),e.text&&e.text.text&&(n.text.text=e.text.text)}else n.title=!0;na.setComponentValue(n)}})),na.setFrameHeight()}catch(s){console.log("error making timeline..."),console.error(s)}na.setFrameHeight()})),na.setComponentReady()})()})();
//# sourceMappingURL=main.4c8f0533.js.map